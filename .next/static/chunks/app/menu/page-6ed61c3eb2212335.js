(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{3901:function(e,t,s){Promise.resolve().then(s.bind(s,4014))},4014:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var n=s(7437),o=s(7648),a=s(9376),r=s(2265),l=s(1127),i=s(6544);function c(){let e=(0,l.g)(),t=(0,a.useRouter)(),[s,c]=(0,r.useState)(Date.now()),u=(0,i.Q)();(0,r.useEffect)(()=>{let e=setInterval(()=>c(Date.now()),1e3);return()=>clearInterval(e)},[]);let m=(0,r.useMemo)(()=>e.sessionStartAt?{durationMs:s-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect}:e.lastSession,[e.sessionStartAt,e.sessionAttempts,e.sessionCorrect,e.lastSession,s]);return(0,n.jsxs)("main",{className:"container py-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-extrabold",children:u("appTitle")}),(0,n.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[(0,n.jsxs)(o.default,{href:"/play",className:"btn bg-brand text-white text-lg",children:["▶ ",u("continue")]}),(0,n.jsxs)(o.default,{href:"/settings",className:"btn btn-ghost text-lg",children:["⚙ ",u("settings")]}),(0,n.jsxs)(o.default,{href:"/rewards",className:"btn btn-ghost text-lg",children:["\uD83C\uDFC6 ",u("rewards")]})]}),(0,n.jsxs)("div",{className:"mt-6 card p-4",children:[(0,n.jsx)("h2",{className:"font-bold mb-2",children:u("session")}),m?(0,n.jsxs)("div",{className:"text-sm text-gray-600 flex gap-4 flex-wrap",children:[(0,n.jsxs)("span",{children:["⏱ ",m.durationMs/1e3|0,"s"]}),(0,n.jsxs)("span",{children:["✅ ",m.correct,"/",m.attempts]}),(0,n.jsxs)("span",{children:["⭐ ",e.profile.points]})]}):(0,n.jsx)("div",{className:"text-sm text-gray-500",children:u("noSessionYet")})]}),(0,n.jsx)("div",{className:"mt-6",children:(0,n.jsxs)("button",{onClick:function(){e.endSession(),t.push("/")},className:"btn btn-ghost",children:["\uD83C\uDFE0 ",u("exit")]})})]})}},6544:function(e,t,s){"use strict";s.d(t,{Q:function(){return a}});var n=s(1127);let o={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"МэтТик",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"מתיק",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function a(){let e=(0,n.g)(e=>e.profile.language||"en");return t=>o[e][t]}},1127:function(e,t,s){"use strict";s.d(t,{O:function(){return c},g:function(){return p}});var n=s(9625),o=s(6885);let a=e=>Math.floor(Math.random()*e),r=(e,t,s)=>Math.max(t,Math.min(s,e)),l=(e,t,s)=>"mul"===e?"m:".concat(t,"x").concat(s):"d:".concat(t,"/").concat(s);function i(){return Math.floor(Date.now()/1e3)}let c=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],u={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function m(e){let t=a(e)+1,s=a(e)+1;return{op:"mul",a:t,b:s,answer:t*s}}function d(e){let t=a(e)+1,s=a(e)+1;return{op:"div",a:t*s,b:t,answer:s}}let p=(0,n.Ue)()((0,o.tJ)((e,t)=>({...u,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let s;let n=t(),o=r(n.profile.maxFactor,2,10);if(n.recentMistakes.length){let[e,t]=n.recentMistakes.shift().split(":"),[o,a]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);s={op:"m"===e?"mul":"div",a:o,b:a}}else{let e=Object.values(n.mastery).find(e=>e.dueAt<=i());if(e){let[t,n]=e.key.split(":"),[o,a]=n.includes("x")?n.split("x").map(Number):n.split("/").map(Number);s={op:"m"===t?"mul":"div",a:o,b:a}}}let l=function(e,t,s){let n=s?{op:s.op,a:s.a,b:s.b,answer:"mul"===s.op?s.a*s.b:Math.floor(s.a/s.b)}:.5>Math.random()?m(e):d(e),o=!s&&t&&.5>Math.random()?"mul"===t?d(e):m(e):n;return{id:"".concat(o.op,":").concat(o.a,":").concat(o.b,":").concat(Date.now()),op:o.op,a:o.a,b:o.b,answer:o.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let s=a(9)-4,n=Math.max(0,e+s+(0===s?a(3)+1:0));t.add(n)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}([...t])}(o.answer),game:"mul"===o.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(o,n.lastOp,s);e({current:l,startedAt:Date.now(),lastOp:l.op})},answer:s=>{var n,o,a;let u=t(),m=u.current;if(!m)return;let d=s===m.answer;Date.now(),null!==(n=u.startedAt)&&void 0!==n||Date.now();let p=l(m.op,m.a,m.b),h=u.mastery[p],f=function(e,t){let s=i();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:s+10,lastResult:t};let n=r(e.score+(t?1:-2),0,5),o=r(e.ease+(t?.08:-.2),1.2,2.6),a=t?Math.max(10,Math.round(e.intervalSec*o)):10;return{...e,score:n,ease:o,intervalSec:a,dueAt:s+a,lastResult:t}}(h&&{...h,key:p},d);f.key=p;let g=Math.min(10,Math.max(0,2*u.profile.streak)),x={...u.profile};if(x.totalAttempts+=1,d)for(let e of(x.totalCorrect+=1,x.streak+=1,x.bestStreak=Math.max(x.bestStreak,x.streak),x.points+=10+g,x.streak%4==0&&(x.maxFactor=r(x.maxFactor+1,2,10),x.level=Math.max(x.level,x.maxFactor)),c))x.points>=e.cost&&(x.unlocked[e.id]=!0);else{x.streak=0,x.maxFactor=r(x.maxFactor-1,2,10),x.level=Math.max(1,x.maxFactor);let t="mul"===m.op?"m:".concat(m.a,"x").concat(m.b):"d:".concat(m.a,"/").concat(m.b),s=u.recentMistakes.slice();s.includes(t)||s.push(t),e({recentMistakes:s})}e({profile:x,mastery:{...u.mastery,[f.key]:f},sessionAttempts:(null!==(o=u.sessionAttempts)&&void 0!==o?o:0)+1,sessionCorrect:(null!==(a=u.sessionCorrect)&&void 0!==a?a:0)+(d?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}})}},function(e){e.O(0,[883,648,971,117,744],function(){return e(e.s=3901)}),_N_E=e.O()}]);