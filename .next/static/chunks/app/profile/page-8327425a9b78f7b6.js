(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{7188:function(e,t,s){Promise.resolve().then(s.bind(s,112))},112:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),r=s(2265),l=s(1127);function n(){let e=(0,l.g)(),t=(0,r.useMemo)(()=>{let t=Object.values(e.mastery),s=t.filter(e=>e.dueAt<=Math.floor(Date.now()/1e3)).length,a=t.filter(e=>e.score>=4).length,r=t.filter(e=>e.score<=1).length;return{total:t.length,due:s,strong:a,weak:r}},[e.mastery]);return(0,a.jsxs)("main",{className:"container pt-6 pb-24",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-extrabold",children:"Profile"}),(0,a.jsxs)("div",{className:"text-sm bg-white px-3 py-1 rounded-xl border",children:["Lvl ",e.profile.level]})]}),(0,a.jsxs)("section",{className:"card p-4 mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"text-5xl",children:"\uD83D\uDE42"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-extrabold",children:"Math Explorer"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Facts up to \xd7",e.profile.maxFactor]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-4 text-center",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Points"}),(0,a.jsx)("div",{className:"text-xl font-extrabold",children:e.profile.points})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Streak"}),(0,a.jsx)("div",{className:"text-xl font-extrabold",children:e.profile.streak})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Best"}),(0,a.jsx)("div",{className:"text-xl font-extrabold",children:e.profile.bestStreak})]})]})]}),(0,a.jsxs)("section",{className:"card p-4 mt-3",children:[(0,a.jsx)("div",{className:"font-bold",children:"Mastery"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mt-2 text-center",children:[(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Tracked"}),(0,a.jsx)("div",{className:"text-lg font-extrabold",children:t.total})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Due"}),(0,a.jsx)("div",{className:"text-lg font-extrabold",children:t.due})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Strong"}),(0,a.jsx)("div",{className:"text-lg font-extrabold text-good",children:t.strong})]}),(0,a.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Weak"}),(0,a.jsx)("div",{className:"text-lg font-extrabold text-bad",children:t.weak})]})]})]})]})}},1127:function(e,t,s){"use strict";s.d(t,{O:function(){return c},g:function(){return u}});var a=s(9625),r=s(6885);let l=e=>Math.floor(Math.random()*e),n=(e,t,s)=>Math.max(t,Math.min(s,e)),o=(e,t,s)=>"mul"===e?"m:".concat(t,"x").concat(s):"d:".concat(t,"/").concat(s);function i(){return Math.floor(Date.now()/1e3)}let c=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],d={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function x(e){let t=l(e)+1,s=l(e)+1;return{op:"mul",a:t,b:s,answer:t*s}}function m(e){let t=l(e)+1,s=l(e)+1;return{op:"div",a:t*s,b:t,answer:s}}let u=(0,a.Ue)()((0,r.tJ)((e,t)=>({...d,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let s;let a=t(),r=n(a.profile.maxFactor,2,10);if(a.recentMistakes.length){let[e,t]=a.recentMistakes.shift().split(":"),[r,l]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);s={op:"m"===e?"mul":"div",a:r,b:l}}else{let e=Object.values(a.mastery).find(e=>e.dueAt<=i());if(e){let[t,a]=e.key.split(":"),[r,l]=a.includes("x")?a.split("x").map(Number):a.split("/").map(Number);s={op:"m"===t?"mul":"div",a:r,b:l}}}let o=function(e,t,s){let a=s?{op:s.op,a:s.a,b:s.b,answer:"mul"===s.op?s.a*s.b:Math.floor(s.a/s.b)}:.5>Math.random()?x(e):m(e),r=!s&&t&&.5>Math.random()?"mul"===t?m(e):x(e):a;return{id:"".concat(r.op,":").concat(r.a,":").concat(r.b,":").concat(Date.now()),op:r.op,a:r.a,b:r.b,answer:r.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let s=l(9)-4,a=Math.max(0,e+s+(0===s?l(3)+1:0));t.add(a)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}([...t])}(r.answer),game:"mul"===r.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(r,a.lastOp,s);e({current:o,startedAt:Date.now(),lastOp:o.op})},answer:s=>{var a,r,l;let d=t(),x=d.current;if(!x)return;let m=s===x.answer;Date.now(),null!==(a=d.startedAt)&&void 0!==a||Date.now();let u=o(x.op,x.a,x.b),h=d.mastery[u],p=function(e,t){let s=i();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:s+10,lastResult:t};let a=n(e.score+(t?1:-2),0,5),r=n(e.ease+(t?.08:-.2),1.2,2.6),l=t?Math.max(10,Math.round(e.intervalSec*r)):10;return{...e,score:a,ease:r,intervalSec:l,dueAt:s+l,lastResult:t}}(h&&{...h,key:u},m);p.key=u;let f=Math.min(10,Math.max(0,2*d.profile.streak)),b={...d.profile};if(b.totalAttempts+=1,m)for(let e of(b.totalCorrect+=1,b.streak+=1,b.bestStreak=Math.max(b.bestStreak,b.streak),b.points+=10+f,b.streak%4==0&&(b.maxFactor=n(b.maxFactor+1,2,10),b.level=Math.max(b.level,b.maxFactor)),c))b.points>=e.cost&&(b.unlocked[e.id]=!0);else{b.streak=0,b.maxFactor=n(b.maxFactor-1,2,10),b.level=Math.max(1,b.maxFactor);let t="mul"===x.op?"m:".concat(x.a,"x").concat(x.b):"d:".concat(x.a,"/").concat(x.b),s=d.recentMistakes.slice();s.includes(t)||s.push(t),e({recentMistakes:s})}e({profile:b,mastery:{...d.mastery,[p.key]:p},sessionAttempts:(null!==(r=d.sessionAttempts)&&void 0!==r?r:0)+1,sessionCorrect:(null!==(l=d.sessionCorrect)&&void 0!==l?l:0)+(m?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))}},function(e){e.O(0,[883,971,117,744],function(){return e(e.s=7188)}),_N_E=e.O()}]);