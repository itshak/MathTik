(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6778:function(t,e,n){Promise.resolve().then(n.t.bind(n,7960,23)),Promise.resolve().then(n.bind(n,8121))},8121:function(t,e,n){"use strict";n.d(e,{ThemeEffect:function(){return s}});var o=n(2265),a=n(1127);function s(){let t=(0,a.g)(t=>t.profile.theme),e=(0,a.g)(t=>t.profile.language||"en");return(0,o.useEffect)(()=>{"undefined"!=typeof document&&document.documentElement.setAttribute("data-theme",t||"buzz")},[t]),(0,o.useEffect)(()=>{if("undefined"!=typeof document){document.documentElement.setAttribute("lang",e);let t="he"===e?"rtl":"ltr";document.documentElement.setAttribute("dir",t)}},[e]),null}},1127:function(t,e,n){"use strict";n.d(e,{O:function(){return u},g:function(){return p}});var o=n(9625),a=n(6885);let s=t=>Math.floor(Math.random()*t),r=(t,e,n)=>Math.max(e,Math.min(n,t)),l=(t,e,n)=>"mul"===t?"m:".concat(e,"x").concat(n):"d:".concat(e,"/").concat(n);function i(){return Math.floor(Date.now()/1e3)}let u=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],c={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"buzz"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function m(t){let e=Math.max(5,t),n=s(e)+1,o=e>=5?s(e-4)+5:5;return{op:"mul",a:n,b:o,answer:n*o}}function d(t){let e=Math.max(5,t),n=s(e)+1,o=e>=5?s(e-4)+5:5;return{op:"div",a:n*o,b:n,answer:o}}let p=(0,o.Ue)()((0,a.tJ)((t,e)=>({...c,startSession:()=>t(t=>t.sessionStartAt?t:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>t(t=>t.sessionStartAt?{lastSession:{durationMs:Date.now()-t.sessionStartAt,attempts:t.sessionAttempts,correct:t.sessionCorrect},sessionStartAt:void 0}:t),setLanguage:e=>t(t=>({profile:{...t.profile,language:e}})),setTheme:e=>t(t=>({profile:{...t.profile,theme:e}})),nextChallenge:()=>{let n;let o=e(),a=r(o.profile.maxFactor,2,10);if(o.recentMistakes.length){let[t,e]=o.recentMistakes.shift().split(":"),[a,s]=e.includes("x")?e.split("x").map(Number):e.split("/").map(Number);n={op:"m"===t?"mul":"div",a,b:s}}else{let t=Object.values(o.mastery).find(t=>t.dueAt<=i());if(t){let[e,o]=t.key.split(":"),[a,s]=o.includes("x")?o.split("x").map(Number):o.split("/").map(Number);n={op:"m"===e?"mul":"div",a,b:s}}}let l=function(t,e,n){var o,a,r;let l=n?{op:n.op,a:n.a,b:n.b,answer:"mul"===n.op?n.a*n.b:Math.floor(n.a/n.b)}:.5>Math.random()?m(t):d(t),i=!n&&e&&.5>Math.random()?"mul"===e?d(t):m(t):l;return{id:"".concat(i.op,":").concat(i.a,":").concat(i.b,":").concat(Date.now()),op:i.op,a:i.a,b:i.b,answer:i.answer,choices:function(t){let e=new Set([t]);for(;e.size<4;){let n=s(9)-4,o=Math.max(0,t+n+(0===n?s(3)+1:0));e.add(o)}return function(t){let e=t.slice();for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}([...e])}(i.answer),game:(o=i.op,a=i.a,r=i.b,"mul"===o?r>4?"coins-multiply-groups":"multiply-groups":Math.floor(a/r)>4?"coins-division-dealer":"division-dealer"),input:.75>Math.random()?"mc":"wheel"}}(a,o.lastOp,n);t({current:l,startedAt:Date.now(),lastOp:l.op})},answer:n=>{var o,a,s;let c=e(),m=c.current;if(!m)return;let d=n===m.answer;Date.now(),null!==(o=c.startedAt)&&void 0!==o||Date.now();let p=l(m.op,m.a,m.b),f=c.mastery[p],h=function(t,e){let n=i();if(!t)return{key:"",score:e?1:0,ease:e?2:1.6,intervalSec:10,dueAt:n+10,lastResult:e};let o=r(t.score+(e?1:-2),0,5),a=r(t.ease+(e?.08:-.2),1.2,2.6),s=e?Math.max(10,Math.round(t.intervalSec*a)):10;return{...t,score:o,ease:a,intervalSec:s,dueAt:n+s,lastResult:e}}(f&&{...f,key:p},d);h.key=p;let b=Math.min(10,Math.max(0,2*c.profile.streak)),M={...c.profile};if(M.totalAttempts+=1,d)for(let t of(M.totalCorrect+=1,M.streak+=1,M.bestStreak=Math.max(M.bestStreak,M.streak),M.points+=10+b,M.streak%4==0&&(M.maxFactor=r(M.maxFactor+1,2,10),M.level=Math.max(M.level,M.maxFactor)),u))M.points>=t.cost&&(M.unlocked[t.id]=!0);else{M.streak=0,M.maxFactor=r(M.maxFactor-1,2,10),M.level=Math.max(1,M.maxFactor);let e="mul"===m.op?"m:".concat(m.a,"x").concat(m.b):"d:".concat(m.a,"/").concat(m.b),n=c.recentMistakes.slice();n.includes(e)||n.push(e),t({recentMistakes:n})}t({profile:M,mastery:{...c.mastery,[h.key]:h},sessionAttempts:(null!==(a=c.sessionAttempts)&&void 0!==a?a:0)+1,sessionCorrect:(null!==(s=c.sessionCorrect)&&void 0!==s?s:0)+(d?1:0)}),e().nextChallenge()},toggleSound:()=>t(t=>({profile:{...t.profile,soundOn:!t.profile.soundOn}}))}),{name:"mg2_state"}))},7960:function(){}},function(t){t.O(0,[587,883,971,117,744],function(){return t(t.s=6778)}),_N_E=t.O()}]);