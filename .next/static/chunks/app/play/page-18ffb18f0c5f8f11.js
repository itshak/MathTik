(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{778:function(e,t,r){Promise.resolve().then(r.bind(r,2662))},2662:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return z}});var n=r(7437),s=r(2265),i=r(7648),a=r(6391),l=r(1994);function o(e){let{values:t,correct:r,onSelect:s,disabled:i,highlightCorrect:a}=e;return(0,n.jsx)("div",{className:(0,l.Z)("grid grid-cols-2 sm:grid-cols-4 gap-3",i&&"opacity-60 pointer-events-none"),children:t.map(e=>{let t=e===r;return(0,n.jsx)("button",{onClick:()=>s(e),className:(0,l.Z)("btn btn-secondary text-3xl py-6",a&&t&&"animate-pump"),"data-correct":t?"true":"false",children:e},e)})})}function c(e){let{min:t=0,max:r=100,value:i,onPick:a,disabled:o,correct:c,highlightCorrect:u}=e,d=(0,s.useMemo)(()=>{let e=[];for(let n=t;n<=r;n++)e.push(n);return e},[t,r]);return(0,n.jsx)("div",{dir:"ltr",className:(0,l.Z)("overflow-x-auto card p-3",o&&"opacity-60 pointer-events-none"),children:(0,n.jsx)("div",{className:"flex gap-3 w-max",children:d.map(e=>{let t="number"==typeof c&&e===c;return(0,n.jsx)("button",{onClick:()=>a(e),className:(0,l.Z)("px-5 py-4 rounded-xl font-extrabold shadow-soft text-2xl",e===i?"bg-brand text-white":"bg-white border",u&&t&&"animate-pump"),"data-correct":t?"true":"false",children:e},e)})})})}var u=r(1660);function d(e){let{size:t=28}=e;return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"g",x1:"0",y1:"0",x2:"1",y2:"1",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#ff8a8a"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#ff3b3b"})]})}),(0,n.jsx)("path",{d:"M44 22c4 1 8 5 8 12 0 10-8 18-20 18S12 44 12 34c0-7 4-11 8-12 3-1 6 0 8 1 2 1 4 1 6 0 2-1 5-2 8-1z",fill:"url(#g)"}),(0,n.jsx)("path",{d:"M34 18c-2-6 4-9 8-8-2 5-5 7-8 8z",fill:"#6b7280"}),(0,n.jsx)("path",{d:"M34 14c0-2 2-4 4-4",stroke:"#15803d",strokeWidth:"4",strokeLinecap:"round"})]})}function h(e){let{size:t=28,skin:r="#f9c9b6",shirt:s="#93c5fd"}=e;return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"32",cy:"22",r:"12",fill:r}),(0,n.jsx)("rect",{x:"16",y:"36",width:"32",height:"20",rx:"10",fill:s}),(0,n.jsx)("circle",{cx:"26",cy:"24",r:"2",fill:"#111827"}),(0,n.jsx)("circle",{cx:"38",cy:"24",r:"2",fill:"#111827"}),(0,n.jsx)("path",{d:"M24 30c4 3 12 3 16 0",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"})]})}class m{setEnabled(e){this.enabled=e}ensure(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))}tone(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;if(!this.enabled||(this.ensure(),!this.ctx))return;let s=this.ctx.createOscillator(),i=this.ctx.createGain();s.type=r,s.frequency.value=e,i.gain.value=n,s.connect(i).connect(this.ctx.destination),s.start(),i.gain.exponentialRampToValueAtTime(1e-4,this.ctx.currentTime+t),s.stop(this.ctx.currentTime+t)}success(){this.tone(660,.08,"triangle",.25),setTimeout(()=>this.tone(880,.1,"triangle",.22),60)}error(){this.tone(200,.12,"sawtooth",.2),setTimeout(()=>this.tone(150,.14,"sawtooth",.18),60)}drag(){this.tone(500,.05,"sine",.05)}drop(){this.tone(420,.06,"square",.08)}levelUp(){this.tone(523,.08,"triangle",.2),setTimeout(()=>this.tone(659,.08,"triangle",.18),70),setTimeout(()=>this.tone(783,.12,"triangle",.16),140)}constructor(){this.enabled=!0}}let f=new m;function p(e){let{id:t,children:r}=e,{attributes:s,listeners:i,setNodeRef:a,transform:o,isDragging:c}=(0,u.O1)({id:String(t)}),d=o?{transform:"translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)")}:{};return(0,n.jsx)("div",{ref:a,...i,...s,style:d,className:(0,l.Z)(c&&"opacity-70"),children:r})}function x(e){let{id:t,className:r,style:s,children:i}=e,{isOver:a,setNodeRef:o}=(0,u.Zj)({id:t});return(0,n.jsx)("div",{ref:o,className:(0,l.Z)(r,a&&"ring-2 ring-brand/50"),style:s,children:i})}var g=r(6544);function v(e){let{a:t,b:r,mistake:i,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let m="he"===(0,a.g)(e=>e.profile.language||"en"),v=t*r,[b,y]=(0,s.useState)(()=>[]),[M,j]=(0,s.useState)(()=>{let e=Array.from({length:v},(e,t)=>t),n=Array.from({length:t},()=>[]),s=0;for(let i=0;i<t;i++)for(let t=0;t<r;t++)n[i].push(e[s++]);return n}),[w,N]=(0,s.useState)(!1),[D,k]=(0,s.useState)(null),[E,z]=(0,s.useState)(-1),S=(0,s.useRef)(null),T=(0,s.useRef)(0),R=(0,s.useRef)(null),C=(0,s.useRef)(-1),L=(0,s.useRef)(!1);(0,s.useEffect)(()=>{L.current=!1},[o]),(0,s.useEffect)(()=>{let e=Array.from({length:v},(e,t)=>t),n=Array.from({length:t},()=>[]),s=0;for(let i=0;i<t;i++)for(let t=0;t<r;t++)n[i].push(e[s++]);j(n),y([])},[t,r,v]),(0,s.useEffect)(()=>{b.length!==v||L.current||(L.current=!0,null==l||l())},[b.length,v]),(0,s.useEffect)(()=>{if(!i)return;N(!0);let e=[];M.forEach(t=>t.forEach(t=>e.push(t)));let t=0;T.current+=1;let r=T.current,n=()=>{if(r!==T.current)return;if(t>=e.length){N(!1),o&&!(o<2)||L.current||(L.current=!0,null==l||l());return}let s=e[t++];j(e=>e.map(e=>e.includes(s)?e.filter(e=>e!==s):e)),y(e=>e.includes(s)?e:[...e,s]),k(s),S.current=window.setTimeout(n,180)};return n(),()=>{T.current+=1,S.current&&(clearTimeout(S.current),S.current=null)}},[i]),(0,s.useEffect)(()=>{if(R.current&&(clearTimeout(R.current),R.current=null),C.current=-1,w||!o){z(-1);return}if(o>=3){z(v-1),L.current||(L.current=!0,null==l||l());return}if(o>=2){let e=()=>{C.current=Math.min(v-1,C.current+1),z(C.current),C.current<v-1?R.current=window.setTimeout(e,600):L.current||(L.current=!0,null==l||l())};return e(),()=>{R.current&&(clearTimeout(R.current),R.current=null)}}z(-1)},[o,v,w]);let A=(0,s.useRef)(null),[I,B]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!A.current)return;let e=new ResizeObserver(e=>{for(let t of e)B(Math.floor(t.contentRect.width))});return e.observe(A.current),()=>e.disconnect()},[]);let P=(0,s.useMemo)(()=>t>=6&&I<420?Math.min(4,t):Math.min(3,t),[t,I]),H=Math.min(10,r),O=I>0?Math.floor((I-12*(P-1))/Math.max(P,1)):320,W=(0,s.useMemo)(()=>{let e=Math.max(24,Math.min(140,Math.floor((O-8*(H-1))/Math.max(H,1))));if(!c||c<=0)return e;let n=24,s=e,i=24;for(;n<=s;){let e=Math.floor((n+s)/2);(function(e){let n=Math.ceil(r/H),s=Math.ceil(t/P);return 48+e+12+(s*(Math.round(.9*e)+8+(n*e+8*Math.max(0,n-1))+24)+12*Math.max(0,s-1))})(e)<=c?(i=e,n=e+1):s=e-1}return i},[O,H,t,r,P,8,12,c]),U=Math.max(20,Math.round(.75*W)),Z=(0,s.useMemo)(()=>Math.round(1.3*W),[W]);(0,s.useMemo)(()=>Math.max(8,Math.round(.6*Z)),[Z]);let F=(0,s.useMemo)(()=>Math.max(16,Math.round(1.6*Z)),[Z]),_=(0,s.useMemo)(()=>Math.max(6,Math.round(.4*Z)),[Z]),Q=(0,s.useMemo)(()=>Math.max(12,Math.round(.8*Z)),[Z]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let n=Number(e.active.id),s=null===(t=e.over)||void 0===t?void 0:t.id;if(!s)return;f.drop();let i=M.findIndex(e=>e.includes(n)),a=-1===i;if("pool"===s){a||(j(e=>e.map((e,t)=>t===i?e.filter(e=>e!==n):e)),y(e=>[...e,n]));return}if(s.startsWith("group-")){let e=parseInt(s.split("-")[1]);if(isNaN(e)||M[e].length>=r)return;if(a)y(e=>e.filter(e=>e!==n)),j(t=>t.map((t,r)=>r===e?[...t,n]:t));else{if(i===e)return;j(t=>t.map((t,r)=>r===i?t.filter(e=>e!==n):r===e?[...t,n]:t))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(i?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[m?"paddingRight":"paddingLeft"]:F,paddingTop:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," text-gray-400 z-0"),style:{fontSize:Z},children:"\uD83E\uDDFA"}),(0,n.jsx)(x,{id:"pool",className:"relative z-20 flex flex-nowrap items-center overflow-x-auto gap-2 ".concat(w||"number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:Math.max(W,Z+8)},children:b.map((e,t)=>(0,n.jsx)(p,{id:e,children:(0,n.jsxs)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative z-20"),style:{width:W,height:W},children:[(0,n.jsx)(d,{size:U}),"number"==typeof o&&(o>=3?(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:t+1}):o>=2?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:t<E?String(t+1):t===v-1?"?":""}),t===Math.min(E,v-1)&&(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-[999] ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"})]}):1===o&&0===t?(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-[999] ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"}):null)]})},e))})]}),(0,n.jsx)("div",{ref:A,className:"grid gap-3 ".concat(w||"number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{gridTemplateColumns:"repeat(".concat(P,", minmax(0, 1fr))")},children:M.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[m?"paddingRight":"paddingLeft"]:Q,paddingTop:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*W)})}),(0,n.jsxs)(x,{id:"group-".concat(t),className:"flex flex-wrap gap-2",style:{minHeight:Math.max(W,Z+8)},children:[e.map((e,t)=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative z-20"),style:{width:W,height:W},children:(0,n.jsx)(d,{size:U})})},e)),Array.from({length:Math.max(0,r-e.length)}).map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl border border-gray-200",style:{width:W,height:W}},t))]})]},t))})]})})}function b(e){let{a:t,b:r,mistake:i,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let m="he"===(0,a.g)(e=>e.profile.language||"en"),v=Math.floor(t/r),[b,y]=(0,s.useState)(()=>Array.from({length:t},(e,t)=>t)),[M,j]=(0,s.useState)(()=>Array.from({length:r},()=>[])),[w,N]=(0,s.useState)(!1),[D,k]=(0,s.useState)(null),[E,z]=(0,s.useState)(-1),S=(0,s.useRef)(null),T=(0,s.useRef)(0),R=(0,s.useRef)(null),C=(0,s.useRef)(-1),L=(0,s.useRef)(!1);(0,s.useEffect)(()=>{L.current=!1},[o]),(0,s.useEffect)(()=>{y(Array.from({length:t},(e,t)=>t)),j(Array.from({length:r},()=>[]))},[t,r]),(0,s.useEffect)(()=>{0===b.length&&M.every(e=>e.length===v)&&!L.current&&(L.current=!0,null==l||l())},[b.length,M,v]),(0,s.useEffect)(()=>{if(!i)return;N(!0);let e=M.map(e=>Math.max(0,v-e.length)),t=[];e.forEach((e,r)=>{for(let n=0;n<e;n++)t.push(r)});let r=b.slice(0,t.length),n=0;T.current+=1;let s=T.current,a=()=>{if(s!==T.current)return;if(n>=t.length){N(!1),o&&!(o<2)||L.current||(L.current=!0,null==l||l());return}let e=t[n++],i=r[n-1];y(e=>e.includes(i)?e.filter(e=>e!==i):e),j(t=>t.map((t,r)=>r!==e||t.length>=v||t.includes(i)?t:[...t,i])),k(i),S.current=window.setTimeout(a,180)};return a(),()=>{T.current+=1,S.current&&(clearTimeout(S.current),S.current=null)}},[i]),(0,s.useEffect)(()=>{if(R.current&&(clearTimeout(R.current),R.current=null),C.current=-1,w||!o){z(-1);return}if(o>=3){z(v-1),L.current||(L.current=!0,null==l||l());return}if(o>=2){let e=()=>{C.current=Math.min(v-1,C.current+1),z(C.current),C.current<v-1?R.current=window.setTimeout(e,600):L.current||(L.current=!0,null==l||l())};return e(),()=>{R.current&&(clearTimeout(R.current),R.current=null)}}z(-1)},[o,v,w]);let A=(0,s.useRef)(null),[I,B]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!A.current)return;let e=new ResizeObserver(e=>{for(let t of e)B(Math.floor(t.contentRect.width))});return e.observe(A.current),()=>e.disconnect()},[]);let P=(0,s.useMemo)(()=>r>=6&&I<420?Math.min(4,r):Math.min(3,r),[r,I]),H=Math.min(10,v),O=I>0?Math.floor((I-12*(P-1))/Math.max(P,1)):320,W=(0,s.useMemo)(()=>{let e=Math.max(24,Math.min(140,Math.floor((O-8*(H-1))/Math.max(H,1))));if(!c||c<=0)return e;let t=24,n=e,s=24;for(;t<=n;){let e=Math.floor((t+n)/2);(function(e){let t=Math.ceil(v/H),n=Math.ceil(r/P);return 48+e+12+(n*(Math.round(.9*e)+8+(t*e+8*Math.max(0,t-1))+24)+12*Math.max(0,n-1))})(e)<=c?(s=e,t=e+1):n=e-1}return s},[O,H,v,r,P,8,12,c]),U=Math.max(20,Math.round(.75*W)),Z=(0,s.useMemo)(()=>Math.round(1.3*W),[W]);(0,s.useMemo)(()=>Math.max(8,Math.round(.6*Z)),[Z]);let F=(0,s.useMemo)(()=>Math.max(16,Math.round(1.6*Z)),[Z]),_=(0,s.useMemo)(()=>Math.max(6,Math.round(.4*Z)),[Z]),Q=(0,s.useMemo)(()=>Math.max(12,Math.round(.8*Z)),[Z]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let r=Number(e.active.id),n=null===(t=e.over)||void 0===t?void 0:t.id;if(!n)return;f.drop();let s=M.findIndex(e=>e.includes(r)),i=-1===s;if("pool"===n){i||(j(e=>e.map((e,t)=>t===s?e.filter(e=>e!==r):e)),y(e=>[...e,r]));return}if(n.startsWith("friend-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||M[e].length>=v)return;if(i)y(e=>e.filter(e=>e!==r)),j(t=>t.map((t,n)=>n===e?[...t,r]:t));else{if(s===e)return;j(t=>t.map((t,n)=>n===s?t.filter(e=>e!==r):n===e?[...t,r]:t))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(i?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[m?"paddingRight":"paddingLeft"]:F,paddingTop:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," text-gray-400 z-0"),style:{fontSize:Z},children:"\uD83D\uDDC3️"}),(0,n.jsx)(x,{id:"pool",className:"relative z-20 flex flex-nowrap items-center overflow-x-auto gap-2 ".concat("number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:Math.max(W,Z+8)},children:b.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative z-20"),style:{width:W,height:W},children:(0,n.jsx)(d,{size:U})})},e))})]}),(0,n.jsx)("div",{ref:A,className:"grid gap-3 ".concat(w||"number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{gridTemplateColumns:"repeat(".concat(P,", minmax(0, 1fr))")},children:M.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[m?"paddingRight":"paddingLeft"]:Q,paddingTop:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*W)})}),(0,n.jsxs)(x,{id:"friend-".concat(t),className:"flex flex-wrap gap-2",style:{minHeight:Math.max(W,Z+8)},children:[e.map((e,r)=>(0,n.jsx)(p,{id:e,children:(0,n.jsxs)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative z-20"),style:{width:W,height:W},children:[(0,n.jsx)(d,{size:U}),"number"==typeof o&&(o>=3||o>=2&&0===t)&&(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:o>=3?String(r+1):r<E?String(r+1):r===v-1?"?":""}),"number"==typeof o&&2===o&&0===t&&r===Math.min(E,v-1)&&(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-[999] ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"}),"number"==typeof o&&1===o&&0===t&&0===r&&(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-[999] ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"})]})},e)),Array.from({length:Math.max(0,v-e.length)}).map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl border border-gray-200",style:{width:W,height:W}},t))]})]},t))})]})})}function y(e){let{size:t=28}=e,r=Math.max(1,Math.round(.04*t)),s=Math.round(t/2);return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 ".concat(t," ").concat(t),xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"gold",cx:"50%",cy:"40%",r:"70%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#fde68a"}),(0,n.jsx)("stop",{offset:"60%",stopColor:"#fbbf24"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#f59e0b"})]})}),(0,n.jsx)("circle",{cx:s,cy:s,r:s-r,fill:"url(#gold)",stroke:"#b45309",strokeWidth:r}),(0,n.jsx)("circle",{cx:s,cy:s,r:Math.round(.55*s),fill:"none",stroke:"#d97706",strokeWidth:r})]})}function M(e){let{count:t=1,size:r=40}=e,s=Math.round(.8*r),i=Math.round(.2*r),a=Array.from({length:Math.min(5,Math.max(1,t))}),l=s+i*(a.length-1);return(0,n.jsx)("div",{style:{width:r,height:"100%",position:"relative"},children:(0,n.jsx)("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:(0,n.jsx)("div",{style:{position:"relative",width:s,height:l},children:a.map((e,t)=>(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:t*i,display:"grid",placeItems:"center"},children:(0,n.jsx)(y,{size:s})},t))})})})}function j(e){let t=[],r=Math.max(0,Math.floor(e)),n=e=>{e>=1&&t.push(Math.min(5,Math.max(1,e)))};for(;r>=5;)n(5),r-=5;for(let e of[4,3,2,1])for(;r>=e;)n(e),r-=e;return t}function w(e){let{count:t,size:r,overlayNumbers:s,pointerIndex:i,rtl:a,questionIndex:l}=e,o=j(t),c=Math.max(20,Math.min(r,40)),u=Math.round(.8*c),d=Math.max(2,Math.round(.2*c)),h=e=>u+d*(e-1),m=h(5);return(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-1",style:{minHeight:m},children:o.map((e,t)=>(0,n.jsxs)("div",{className:"relative rounded-md bg-white shadow-soft grid place-items-center",style:{width:c,height:h(e)},children:[(0,n.jsx)(M,{count:e,size:c}),s&&"number"==typeof s[t]&&(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-xs sm:text-sm lg:text-base font-black text-white num-stroke",children:s[t]}),"number"==typeof l&&l===t&&!(s&&"number"==typeof s[t])&&(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-xs sm:text-sm lg:text-base font-black text-white num-stroke",children:"?"}),"number"==typeof i&&i===t&&(0,n.jsx)("span",{className:"absolute ".concat(a?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-[999] ").concat(a?"animate-pointer-rtl":"animate-pointer"),children:a?"\uD83D\uDC48":"\uD83D\uDC49"})]},t))})}function N(e){let{a:t,b:r,mistake:i,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let d="he"===(0,a.g)(e=>e.profile.language||"en"),m=t*r,[v,b]=(0,s.useState)(()=>0),[M,N]=(0,s.useState)(()=>Array.from({length:t},()=>r)),[D,k]=(0,s.useState)(null),E=(0,s.useRef)(0),z=(0,s.useRef)(null),S=(0,s.useRef)(0),T=(0,s.useRef)(!1),R=(0,s.useRef)(!1);(0,s.useEffect)(()=>{T.current=!1},[o]),(0,s.useEffect)(()=>{b(0),N(Array.from({length:t},()=>r)),E.current=0},[t,r,m]),(0,s.useEffect)(()=>{v!==m||T.current||(T.current=!0,null==l||l())},[v,m,l]),(0,s.useEffect)(()=>{if(!i)return;let e=[];M.forEach((t,r)=>{for(let n=0;n<t;n++)e.push(r)});let t=0;S.current+=1;let r=S.current,n=()=>{if(r!==S.current){R.current=!1;return}if(t>=e.length){R.current=!1,T.current||(T.current=!0,null==l||l());return}let s=e[t++];N(e=>e.map((e,t)=>t===s?Math.max(0,e-1):e)),b(e=>Math.min(m,e+1)),k(E.current++),R.current=!0,z.current=window.setTimeout(n,160)};return z.current&&(clearTimeout(z.current),z.current=null),R.current=!1,z.current=window.setTimeout(n,0),()=>{S.current+=1,z.current&&(clearTimeout(z.current),z.current=null),R.current=!1}},[i]);let C=(0,s.useMemo)(()=>t>=8?5:t>=6?4:Math.min(3,t),[t]),L=(0,s.useMemo)(()=>t>=8?32:t>=6?36:40,[t]),A=(0,s.useMemo)(()=>j(v),[v]),I=(0,s.useMemo)(()=>{if("number"==typeof o&&0!==A.length){if(o>=3){let e=0;return A.map(t=>e+=t)}if(2===o){let e=0;return A.map((t,r)=>r<A.length-1?e+=t:void 0)}}},[o,A]),B=(0,s.useMemo)(()=>{if("number"==typeof o&&2===o&&A.length>0)return A.length-1},[o,A]),P=(0,s.useMemo)(()=>{if("number"==typeof o&&0!==A.length){if(1===o)return 0;if(2===o)return A.length-1}},[o,A]),H=(0,s.useMemo)(()=>Math.round(.8*L),[L]),O=(0,s.useMemo)(()=>Math.max(2,Math.round(.2*L)),[L]),W=e=>H+O*(e-1),U=(0,s.useMemo)(()=>W(5),[H,O]),Z=(0,s.useMemo)(()=>Math.round(1.3*L),[L]),F=(0,s.useMemo)(()=>Math.max(8,Math.round(.6*Z)),[Z]),_=(0,s.useMemo)(()=>Math.max(12,Math.round(1.2*Z)),[Z]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let r=null===(t=e.over)||void 0===t?void 0:t.id;if(!r||(f.drop(),"pool"!==r))return;let n=String(e.active.id);if(!n.startsWith("g-"))return;let s=parseInt(n.split("-")[1]);!isNaN(s)&&(M[s]<=0||(N(e=>e.map((e,t)=>t===s?Math.max(0,e-1):e)),b(e=>Math.min(m,e+1)),k(E.current++)))},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(i?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[d?"paddingRight":"paddingLeft"]:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," text-gray-400 z-0"),style:{fontSize:Z},children:"\uD83D\uDDC3️"}),(0,n.jsx)(x,{id:"pool",className:"relative z-20 flex flex-nowrap items-center overflow-x-auto gap-2 py-1 ".concat("number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:U},children:(0,n.jsx)(w,{count:v,size:L,overlayNumbers:I,questionIndex:B,pointerIndex:P,rtl:d})})]}),(0,n.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:"repeat(".concat(C,", minmax(0, 1fr))")},children:M.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[d?"paddingRight":"paddingLeft"]:F},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*L)})}),(0,n.jsx)(x,{id:"group-".concat(t),className:"grid place-items-center py-1",style:{minHeight:U},children:j(e).map((e,r)=>{let s=W(e);return(0,n.jsx)("div",{className:"relative rounded-md bg-white shadow-soft",style:{width:L,height:s},children:(0,n.jsx)("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:(0,n.jsx)("div",{style:{position:"relative",width:H,height:s},children:Array.from({length:e}).map((s,i)=>{let a="g-".concat(t,"-s-").concat(r,"-c-").concat(i,"-").concat(null!=D?D:0);return(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:i*O,display:"grid",placeItems:"center",zIndex:10+i},children:(0,n.jsx)(p,{id:a,children:(0,n.jsx)("div",{className:"grid place-items-center ".concat(i===e-1?"animate-pop":""),style:{width:H,height:H},children:(0,n.jsx)(y,{size:H})})})},a)})})})},"g-".concat(t,"-s-").concat(r,"-").concat(null!=D?D:0))})})]},t))})]})})}function D(e){let{a:t,b:r,mistake:i,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let d="he"===(0,a.g)(e=>e.profile.language||"en"),m=Math.floor(t/r),[v,b]=(0,s.useState)(()=>t),[M,N]=(0,s.useState)(()=>Array.from({length:r},()=>0)),[D,k]=(0,s.useState)(null),E=(0,s.useRef)(0),z=(0,s.useRef)(null),S=(0,s.useRef)(0),T=(0,s.useRef)(!1),R=(0,s.useRef)(!1);(0,s.useEffect)(()=>{T.current=!1},[o]),(0,s.useEffect)(()=>{b(t),N(Array.from({length:r},()=>0)),E.current=0},[t,r]),(0,s.useEffect)(()=>{0===v&&M.every(e=>e===m)&&!T.current&&(T.current=!0,null==l||l())},[v,M,m,l]),(0,s.useEffect)(()=>{if(!i)return;let e=M.map(e=>Math.max(0,m-e)),t=[];e.forEach((e,r)=>{for(let n=0;n<e;n++)t.push(r)});let r=0;S.current+=1;let n=S.current,s=()=>{if(n!==S.current){R.current=!1;return}if(r>=t.length||v<=0){R.current=!1,T.current||(T.current=!0,null==l||l());return}let e=t[r++];b(e=>Math.max(0,e-1)),N(t=>t.map((t,r)=>r===e?Math.min(m,t+1):t)),k(E.current++),R.current=!0,z.current=window.setTimeout(s,160)};return z.current&&(clearTimeout(z.current),z.current=null),R.current=!1,z.current=window.setTimeout(s,0),()=>{S.current+=1,z.current&&(clearTimeout(z.current),z.current=null),R.current=!1}},[i]);let C=(0,s.useMemo)(()=>r>=8?5:r>=6?4:Math.min(3,r),[r]),L=(0,s.useMemo)(()=>r>=8?32:r>=6?36:40,[r]),A=(0,s.useMemo)(()=>j(v),[v]),I=(0,s.useMemo)(()=>"number"!=typeof o?[]:M.map((e,t)=>{let r=j(e);if(o>=3){let e=0;return r.map(t=>e+=t)}if(2===o&&0===t){if(0===r.length)return;let e=0;return r.map((t,n)=>n<r.length-1?e+=t:void 0)}}),[o,M]),B=(0,s.useMemo)(()=>"number"!=typeof o?[]:M.map((e,t)=>{let r=j(e);if(2===o&&0===t&&r.length>0)return r.length-1}),[o,M]),P=(0,s.useMemo)(()=>"number"!=typeof o?[]:M.map((e,t)=>{let r=j(e);if(0===t&&0!==r.length){if(1===o)return 0;if(2===o)return r.length-1}}),[o,M]),H=(0,s.useMemo)(()=>Math.round(.8*L),[L]),O=(0,s.useMemo)(()=>Math.max(2,Math.round(.2*L)),[L]),W=e=>H+O*(e-1),U=(0,s.useMemo)(()=>W(5),[H,O]),Z=(0,s.useMemo)(()=>Math.round(1.3*L),[L]),F=(0,s.useMemo)(()=>Math.max(8,Math.round(.6*Z)),[Z]),_=(0,s.useMemo)(()=>Math.max(12,Math.round(1.2*Z)),[Z]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let r=null===(t=e.over)||void 0===t?void 0:t.id;if(!r||(f.drop(),!r.startsWith("friend-")))return;let n=parseInt(r.split("-")[1]);isNaN(n)||M[n]>=m||v<=0||(b(e=>Math.max(0,e-1)),N(e=>e.map((e,t)=>t===n?Math.min(m,e+1):e)),k(E.current++))},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(i?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[d?"paddingRight":"paddingLeft"]:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," text-gray-400 z-0"),style:{fontSize:Z},children:"\uD83D\uDDC3️"}),(0,n.jsx)(x,{id:"pool",className:"relative z-20 flex flex-nowrap items-center overflow-x-auto gap-2 py-1 ".concat("number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:U},children:A.map((e,t)=>{let r=W(e);return(0,n.jsx)("div",{className:"relative rounded-md bg-white shadow-soft",style:{width:L,height:r},children:(0,n.jsx)("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:(0,n.jsx)("div",{style:{position:"relative",width:H,height:r},children:Array.from({length:e}).map((r,s)=>{let i="p-".concat(t,"-").concat(s,"-").concat(null!=D?D:0);return(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:s*O,display:"grid",placeItems:"center",zIndex:10+s},children:(0,n.jsx)(p,{id:i,children:(0,n.jsx)("div",{className:"grid place-items-center ".concat(s===e-1?"animate-pop":""),style:{width:H,height:H},children:(0,n.jsx)(y,{size:H})})})},i)})})})},"s-".concat(t,"-").concat(null!=D?D:0))})})]}),(0,n.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:"repeat(".concat(C,", minmax(0, 1fr))")},children:M.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[d?"paddingRight":"paddingLeft"]:F},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*L)})}),(0,n.jsx)(x,{id:"friend-".concat(t),className:"grid place-items-center py-1",children:(0,n.jsx)(w,{count:e,size:L,overlayNumbers:I[t],questionIndex:B[t],pointerIndex:P[t],rtl:d})})]},t))})]})})}function k(e){let{level:t,onClose:r}=e;return(0,s.useEffect)(()=>{let e=e=>{("Enter"===e.key||" "===e.key)&&r()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[r]),(0,n.jsx)("div",{className:"fixed inset-0 z-[999] grid place-items-center bg-black/30 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl px-6 py-6 w-[min(92vw,420px)] text-center select-none",children:[(0,n.jsx)("div",{className:"text-5xl mb-2 animate-salute",children:"\uD83E\uDEE1"}),(0,n.jsx)("div",{className:"text-2xl font-extrabold mb-4",children:"Level Up!"}),(0,n.jsx)("div",{className:"grid place-items-center mb-4",children:(0,n.jsx)("div",{className:"rounded-full bg-brand text-white w-24 h-24 grid place-items-center text-4xl font-black animate-badge-pop",children:t})}),(0,n.jsx)("button",{onClick:r,className:"btn btn-primary w-full",children:"Continue"})]})})}function E(e){let{onClose:t}=e;return(0,s.useEffect)(()=>{let e=e=>{("Enter"===e.key||" "===e.key)&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t]),(0,n.jsx)("div",{className:"fixed inset-0 z-[999] grid place-items-center bg-black/40 backdrop-blur-sm",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-2xl px-6 py-6 w-[min(92vw,460px)] text-center select-none",children:[(0,n.jsx)("div",{className:"text-6xl mb-2",children:"\uD83C\uDFC6"}),(0,n.jsx)("div",{className:"text-2xl font-extrabold mb-2",children:"Champion!"}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"You completed Level 10. Entering Review Mode."}),(0,n.jsx)("div",{className:"grid place-items-center mb-4",children:(0,n.jsx)("div",{className:"rounded-full bg-brand text-white w-28 h-28 grid place-items-center text-4xl font-black animate-badge-pop",children:"⭐️"})}),(0,n.jsx)("button",{onClick:t,className:"w-full px-4 py-2 rounded-lg bg-brand text-white font-semibold shadow-soft active:scale-95",children:"Start Review"})]})})}function z(){var e;let t=(0,a.g)(),r=t.current;(0,s.useEffect)(()=>{r||t.nextChallenge()},[r,t]),(0,s.useEffect)(()=>{t.sessionStartAt||t.startSession()},[t.sessionStartAt,t.startSession]),(0,s.useEffect)(()=>{f.setEnabled(t.profile.soundOn)},[t.profile.soundOn]);let[l,u]=(0,s.useState)(!1),[d,h]=(0,s.useState)(0),[m,p]=(0,s.useState)(!1),x=(0,s.useRef)(null),g=(0,s.useRef)(null),[y,M]=(0,s.useState)(0),j=(0,s.useMemo)(()=>r?"multiply-groups"===r.game?(0,n.jsx)(v,{a:r.a,b:r.b,mistake:l,mistakes:d,onReady:z,maxH:y},r.id):"division-dealer"===r.game?(0,n.jsx)(b,{a:r.a,b:r.b,mistake:l,onReady:z,mistakes:d,maxH:y},r.id):"coins-multiply-groups"===r.game?(0,n.jsx)(N,{a:r.a,b:r.b,mistake:l,mistakes:d,onReady:z,maxH:y},r.id):"coins-division-dealer"===r.game?(0,n.jsx)(D,{a:r.a,b:r.b,mistake:l,onReady:z,mistakes:d,maxH:y},r.id):null:null,[r,l,d,y]);if(!r)return null;function w(e){if(!r)return;let n=e===r.answer;if(n?f.success():f.error(),!n){u(!0),h(e=>e+1),p(!0);return}u(!1),t.answer(e)}function z(){p(!1),u(!1)}(0,s.useEffect)(()=>{h(0),u(!1)},[null==r?void 0:r.id]);let S=Math.min(100,Math.round((null!==(e=t.profile.levelXP)&&void 0!==e?e:0)/10*100));return(0,s.useEffect)(()=>{if(!x.current)return;let e=new ResizeObserver(e=>{for(let t of e)M(Math.max(0,Math.floor(t.contentRect.height-(g.current?g.current.offsetHeight:0)-28)))});return e.observe(x.current),()=>e.disconnect()},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("main",{className:"game-screen flex flex-col",children:[(0,n.jsxs)("div",{className:"px-4 pt-4",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between",children:[(0,n.jsx)(i.default,{href:"/menu",className:"text-xl px-3 py-1 rounded-lg border bg-white shadow-soft active:scale-95 select-none",children:"☰"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"text-xs bg-white px-2 py-1 rounded-lg border flex items-center gap-1 ".concat(t.badgeFlash?"animate-badge-pop":""),children:["\uD83C\uDFC5 ",(0,n.jsx)("span",{className:"font-bold",children:t.profile.level})]}),(0,n.jsxs)("span",{className:"text-xs bg-white px-2 py-1 rounded-lg border",children:["⭐ ",t.profile.points]}),(0,n.jsx)("button",{onClick:()=>t.toggleSound(),className:"text-xs px-2 py-1 rounded-lg border ".concat(t.profile.soundOn?"bg-green-50":"bg-red-50"),children:t.profile.soundOn?"\uD83D\uDD0A":"\uD83D\uDD07"})]})]}),(0,n.jsx)("div",{className:"progress mt-2",children:(0,n.jsx)("div",{className:"bar bg-brand",style:{width:"".concat(S,"%")}})})]}),(0,n.jsx)("section",{className:"flex-1 overflow-hidden px-4 py-1",children:(0,n.jsxs)("div",{ref:x,className:"card h-full p-3 game-area overflow-hidden flex flex-col items-center",children:[(0,n.jsx)("div",{ref:g,className:"text-center mb-4 mt-2",children:(0,n.jsxs)("div",{dir:"ltr",className:"text-4xl sm:text-5xl font-black tracking-tight",children:[r.a," ","mul"===r.op?"\xd7":"\xf7"," ",r.b]})}),(0,n.jsx)("div",{className:"w-full",children:j})]})}),(0,n.jsx)("section",{className:"px-4 pb-5",children:"mc"===r.input?(0,n.jsx)(o,{values:r.choices,correct:r.answer,onSelect:w,disabled:m,highlightCorrect:d>=3}):(0,n.jsx)(c,{min:0,max:100,onPick:w,disabled:m,correct:r.answer,highlightCorrect:d>=3})})]}),t.levelUpPending?(0,n.jsx)(k,{level:t.levelUpPending,onClose:()=>t.dismissLevelUp()}):null,t.championPending?(0,n.jsx)(E,{onClose:()=>t.dismissChampion()}):null]})}},6544:function(e,t,r){"use strict";r.d(t,{Q:function(){return i}});var n=r(6391);let s={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",themeBuzz:"Buzz",themeBarbie:"Barbie",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"MathTik",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",themeBuzz:"Базз",themeBarbie:"Барби",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"MathTik",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",themeBuzz:"באז",themeBarbie:"ברבי",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function i(){let e=(0,n.g)(e=>e.profile.language||"en");return t=>s[e][t]}}},function(e){e.O(0,[883,648,633,391,971,117,744],function(){return e(e.s=778)}),_N_E=e.O()}]);