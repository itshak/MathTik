(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{778:function(e,t,r){Promise.resolve().then(r.bind(r,9519))},9519:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return k}});var n=r(7437),s=r(2265),a=r(7648),i=r(1127),l=r(1994);function o(e){let{values:t,correct:r,onSelect:s,disabled:a,highlightCorrect:i}=e;return(0,n.jsx)("div",{className:(0,l.Z)("grid grid-cols-2 sm:grid-cols-4 gap-3",a&&"opacity-60 pointer-events-none"),children:t.map(e=>{let t=e===r;return(0,n.jsx)("button",{onClick:()=>s(e),className:(0,l.Z)("btn btn-secondary text-3xl py-6",i&&t&&"animate-pump"),"data-correct":t?"true":"false",children:e},e)})})}function c(e){let{min:t=0,max:r=100,value:a,onPick:i,disabled:o,correct:c,highlightCorrect:u}=e,d=(0,s.useMemo)(()=>{let e=[];for(let n=t;n<=r;n++)e.push(n);return e},[t,r]);return(0,n.jsx)("div",{dir:"ltr",className:(0,l.Z)("overflow-x-auto card p-3",o&&"opacity-60 pointer-events-none"),children:(0,n.jsx)("div",{className:"flex gap-3 w-max",children:d.map(e=>{let t="number"==typeof c&&e===c;return(0,n.jsx)("button",{onClick:()=>i(e),className:(0,l.Z)("px-5 py-4 rounded-xl font-extrabold shadow-soft text-2xl",e===a?"bg-brand text-white":"bg-white border",u&&t&&"animate-pump"),"data-correct":t?"true":"false",children:e},e)})})})}var u=r(1660);function d(e){let{size:t=28}=e;return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"g",x1:"0",y1:"0",x2:"1",y2:"1",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#ff8a8a"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#ff3b3b"})]})}),(0,n.jsx)("path",{d:"M44 22c4 1 8 5 8 12 0 10-8 18-20 18S12 44 12 34c0-7 4-11 8-12 3-1 6 0 8 1 2 1 4 1 6 0 2-1 5-2 8-1z",fill:"url(#g)"}),(0,n.jsx)("path",{d:"M34 18c-2-6 4-9 8-8-2 5-5 7-8 8z",fill:"#6b7280"}),(0,n.jsx)("path",{d:"M34 14c0-2 2-4 4-4",stroke:"#15803d",strokeWidth:"4",strokeLinecap:"round"})]})}function h(e){let{size:t=28,skin:r="#f9c9b6",shirt:s="#93c5fd"}=e;return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"32",cy:"22",r:"12",fill:r}),(0,n.jsx)("rect",{x:"16",y:"36",width:"32",height:"20",rx:"10",fill:s}),(0,n.jsx)("circle",{cx:"26",cy:"24",r:"2",fill:"#111827"}),(0,n.jsx)("circle",{cx:"38",cy:"24",r:"2",fill:"#111827"}),(0,n.jsx)("path",{d:"M24 30c4 3 12 3 16 0",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"})]})}class m{setEnabled(e){this.enabled=e}ensure(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))}tone(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.12,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;if(!this.enabled||(this.ensure(),!this.ctx))return;let s=this.ctx.createOscillator(),a=this.ctx.createGain();s.type=r,s.frequency.value=e,a.gain.value=n,s.connect(a).connect(this.ctx.destination),s.start(),a.gain.exponentialRampToValueAtTime(1e-4,this.ctx.currentTime+t),s.stop(this.ctx.currentTime+t)}success(){this.tone(660,.08,"triangle",.25),setTimeout(()=>this.tone(880,.1,"triangle",.22),60)}error(){this.tone(200,.12,"sawtooth",.2),setTimeout(()=>this.tone(150,.14,"sawtooth",.18),60)}drag(){this.tone(500,.05,"sine",.05)}drop(){this.tone(420,.06,"square",.08)}levelUp(){this.tone(523,.08,"triangle",.2),setTimeout(()=>this.tone(659,.08,"triangle",.18),70),setTimeout(()=>this.tone(783,.12,"triangle",.16),140)}constructor(){this.enabled=!0}}let f=new m;function p(e){let{id:t,children:r}=e,{attributes:s,listeners:a,setNodeRef:i,transform:o,isDragging:c}=(0,u.O1)({id:String(t)}),d=o?{transform:"translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)")}:{};return(0,n.jsx)("div",{ref:i,...a,...s,style:d,className:(0,l.Z)(c&&"opacity-70"),children:r})}function x(e){let{id:t,className:r,style:s,children:a}=e,{isOver:i,setNodeRef:o}=(0,u.Zj)({id:t});return(0,n.jsx)("div",{ref:o,className:(0,l.Z)(r,i&&"ring-2 ring-brand/50"),style:s,children:a})}var g=r(6544);function M(e){let{a:t,b:r,mistake:a,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let m="he"===(0,i.g)(e=>e.profile.language||"en"),M=t*r,[b,v]=(0,s.useState)(()=>[]),[y,j]=(0,s.useState)(()=>{let e=Array.from({length:M},(e,t)=>t),n=Array.from({length:t},()=>[]),s=0;for(let a=0;a<t;a++)for(let t=0;t<r;t++)n[a].push(e[s++]);return n}),[w,N]=(0,s.useState)(!1),[D,k]=(0,s.useState)(null),[S,C]=(0,s.useState)(-1),R=(0,s.useRef)(null),T=(0,s.useRef)(0),E=(0,s.useRef)(null),A=(0,s.useRef)(-1),z=(0,s.useRef)(!1);(0,s.useEffect)(()=>{z.current=!1},[o]),(0,s.useEffect)(()=>{let e=Array.from({length:M},(e,t)=>t),n=Array.from({length:t},()=>[]),s=0;for(let a=0;a<t;a++)for(let t=0;t<r;t++)n[a].push(e[s++]);j(n),v([])},[t,r,M]),(0,s.useEffect)(()=>{b.length!==M||z.current||(z.current=!0,null==l||l())},[b.length,M]),(0,s.useEffect)(()=>{if(!a)return;N(!0);let e=[];y.forEach(t=>t.forEach(t=>e.push(t)));let t=0;T.current+=1;let r=T.current,n=()=>{if(r!==T.current)return;if(t>=e.length){N(!1),o&&!(o<2)||z.current||(z.current=!0,null==l||l());return}let s=e[t++];j(e=>e.map(e=>e.includes(s)?e.filter(e=>e!==s):e)),v(e=>e.includes(s)?e:[...e,s]),k(s),R.current=window.setTimeout(n,180)};return n(),()=>{T.current+=1,R.current&&(clearTimeout(R.current),R.current=null)}},[a]),(0,s.useEffect)(()=>{if(E.current&&(clearTimeout(E.current),E.current=null),A.current=-1,w||!o){C(-1);return}if(o>=3){C(M-1),z.current||(z.current=!0,null==l||l());return}if(o>=2){let e=()=>{A.current=Math.min(M-1,A.current+1),C(A.current),A.current<M-1?E.current=window.setTimeout(e,600):z.current||(z.current=!0,null==l||l())};return e(),()=>{E.current&&(clearTimeout(E.current),E.current=null)}}C(-1)},[o,M,w]);let L=(0,s.useRef)(null),[O,I]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!L.current)return;let e=new ResizeObserver(e=>{for(let t of e)I(Math.floor(t.contentRect.width))});return e.observe(L.current),()=>e.disconnect()},[]);let B=(0,s.useMemo)(()=>t>=6&&O<420?Math.min(4,t):Math.min(3,t),[t,O]),F=Math.min(10,r),H=O>0?Math.floor((O-12*(B-1))/Math.max(B,1)):320,P=(0,s.useMemo)(()=>{let e=Math.max(24,Math.min(140,Math.floor((H-8*(F-1))/Math.max(F,1))));if(!c||c<=0)return e;let n=24,s=e,a=24;for(;n<=s;){let e=Math.floor((n+s)/2);(function(e){let n=Math.ceil(r/F),s=Math.ceil(t/B);return 48+e+12+(s*(Math.round(.9*e)+8+(n*e+8*Math.max(0,n-1))+24)+12*Math.max(0,s-1))})(e)<=c?(a=e,n=e+1):s=e-1}return a},[H,F,t,r,B,8,12,c]),W=Math.max(20,Math.round(.75*P)),Z=(0,s.useMemo)(()=>Math.round(1.3*P),[P]);(0,s.useMemo)(()=>Math.max(8,Math.round(.6*Z)),[Z]);let _=(0,s.useMemo)(()=>Math.max(12,Math.round(1.2*Z)),[Z]),Q=(0,s.useMemo)(()=>Math.max(6,Math.round(.4*Z)),[Z]),U=(0,s.useMemo)(()=>Math.max(12,Math.round(.8*Z)),[Z]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let n=Number(e.active.id),s=null===(t=e.over)||void 0===t?void 0:t.id;if(!s)return;f.drop();let a=y.findIndex(e=>e.includes(n)),i=-1===a;if("pool"===s){i||(j(e=>e.map((e,t)=>t===a?e.filter(e=>e!==n):e)),v(e=>[...e,n]));return}if(s.startsWith("group-")){let e=parseInt(s.split("-")[1]);if(isNaN(e)||y[e].length>=r)return;if(i)v(e=>e.filter(e=>e!==n)),j(t=>t.map((t,r)=>r===e?[...t,n]:t));else{if(a===e)return;j(t=>t.map((t,r)=>r===a?t.filter(e=>e!==n):r===e?[...t,n]:t))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[m?"paddingRight":"paddingLeft"]:_,paddingTop:Q},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," text-gray-400"),style:{fontSize:Z},children:"\uD83E\uDDFA"}),(0,n.jsx)(x,{id:"pool",className:"flex flex-nowrap items-center overflow-x-auto gap-2 ".concat(w||"number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:Math.max(P,Z+8)},children:b.map((e,t)=>(0,n.jsx)(p,{id:e,children:(0,n.jsxs)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative"),style:{width:P,height:P},children:[(0,n.jsx)(d,{size:W}),"number"==typeof o&&(o>=3?(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:t+1}):o>=2?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:t<S?String(t+1):t===M-1?"?":""}),t===Math.min(S,M-1)&&(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-50 ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"})]}):1===o&&0===t?(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-50 ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"}):null)]})},e))})]}),(0,n.jsx)("div",{ref:L,className:"grid gap-3 ".concat(w||"number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{gridTemplateColumns:"repeat(".concat(B,", minmax(0, 1fr))")},children:y.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[m?"paddingRight":"paddingLeft"]:U,paddingTop:Q},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*P)})}),(0,n.jsxs)(x,{id:"group-".concat(t),className:"flex flex-wrap gap-2",style:{minHeight:Math.max(P,Z+8)},children:[e.map((e,t)=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative"),style:{width:P,height:P},children:(0,n.jsx)(d,{size:W})})},e)),Array.from({length:Math.max(0,r-e.length)}).map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl border border-gray-200",style:{width:P,height:P}},t))]})]},t))})]})})}function b(e){let{a:t,b:r,mistake:a,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let m="he"===(0,i.g)(e=>e.profile.language||"en"),M=Math.floor(t/r),[b,v]=(0,s.useState)(()=>Array.from({length:t},(e,t)=>t)),[y,j]=(0,s.useState)(()=>Array.from({length:r},()=>[])),[w,N]=(0,s.useState)(!1),[D,k]=(0,s.useState)(null),[S,C]=(0,s.useState)(-1),R=(0,s.useRef)(null),T=(0,s.useRef)(0),E=(0,s.useRef)(null),A=(0,s.useRef)(-1),z=(0,s.useRef)(!1);(0,s.useEffect)(()=>{z.current=!1},[o]),(0,s.useEffect)(()=>{v(Array.from({length:t},(e,t)=>t)),j(Array.from({length:r},()=>[]))},[t,r]),(0,s.useEffect)(()=>{0===b.length&&y.every(e=>e.length===M)&&!z.current&&(z.current=!0,null==l||l())},[b.length,y,M]),(0,s.useEffect)(()=>{if(!a)return;N(!0);let e=y.map(e=>Math.max(0,M-e.length)),t=[];e.forEach((e,r)=>{for(let n=0;n<e;n++)t.push(r)});let r=b.slice(0,t.length),n=0;T.current+=1;let s=T.current,i=()=>{if(s!==T.current)return;if(n>=t.length){N(!1),o&&!(o<2)||z.current||(z.current=!0,null==l||l());return}let e=t[n++],a=r[n-1];v(e=>e.includes(a)?e.filter(e=>e!==a):e),j(t=>t.map((t,r)=>r!==e||t.length>=M||t.includes(a)?t:[...t,a])),k(a),R.current=window.setTimeout(i,180)};return i(),()=>{T.current+=1,R.current&&(clearTimeout(R.current),R.current=null)}},[a]),(0,s.useEffect)(()=>{if(E.current&&(clearTimeout(E.current),E.current=null),A.current=-1,w||!o){C(-1);return}if(o>=3){C(M-1),z.current||(z.current=!0,null==l||l());return}if(o>=2){let e=()=>{A.current=Math.min(M-1,A.current+1),C(A.current),A.current<M-1?E.current=window.setTimeout(e,600):z.current||(z.current=!0,null==l||l())};return e(),()=>{E.current&&(clearTimeout(E.current),E.current=null)}}C(-1)},[o,M,w]);let L=(0,s.useRef)(null),[O,I]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!L.current)return;let e=new ResizeObserver(e=>{for(let t of e)I(Math.floor(t.contentRect.width))});return e.observe(L.current),()=>e.disconnect()},[]);let B=(0,s.useMemo)(()=>r>=6&&O<420?Math.min(4,r):Math.min(3,r),[r,O]),F=Math.min(10,M),H=O>0?Math.floor((O-12*(B-1))/Math.max(B,1)):320,P=(0,s.useMemo)(()=>{let e=Math.max(24,Math.min(140,Math.floor((H-8*(F-1))/Math.max(F,1))));if(!c||c<=0)return e;let t=24,n=e,s=24;for(;t<=n;){let e=Math.floor((t+n)/2);(function(e){let t=Math.ceil(M/F),n=Math.ceil(r/B);return 48+e+12+(n*(Math.round(.9*e)+8+(t*e+8*Math.max(0,t-1))+24)+12*Math.max(0,n-1))})(e)<=c?(s=e,t=e+1):n=e-1}return s},[H,F,M,r,B,8,12,c]),W=Math.max(20,Math.round(.75*P)),Z=(0,s.useMemo)(()=>Math.round(1.3*P),[P]);(0,s.useMemo)(()=>Math.max(8,Math.round(.6*Z)),[Z]);let _=(0,s.useMemo)(()=>Math.max(12,Math.round(1.2*Z)),[Z]),Q=(0,s.useMemo)(()=>Math.max(6,Math.round(.4*Z)),[Z]),U=(0,s.useMemo)(()=>Math.max(12,Math.round(.8*Z)),[Z]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let r=Number(e.active.id),n=null===(t=e.over)||void 0===t?void 0:t.id;if(!n)return;f.drop();let s=y.findIndex(e=>e.includes(r)),a=-1===s;if("pool"===n){a||(j(e=>e.map((e,t)=>t===s?e.filter(e=>e!==r):e)),v(e=>[...e,r]));return}if(n.startsWith("friend-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||y[e].length>=M)return;if(a)v(e=>e.filter(e=>e!==r)),j(t=>t.map((t,n)=>n===e?[...t,r]:t));else{if(s===e)return;j(t=>t.map((t,n)=>n===s?t.filter(e=>e!==r):n===e?[...t,r]:t))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[m?"paddingRight":"paddingLeft"]:_,paddingTop:Q},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," text-gray-400"),style:{fontSize:Z},children:"\uD83D\uDDC3️"}),(0,n.jsx)(x,{id:"pool",className:"flex flex-nowrap items-center overflow-x-auto gap-2 ".concat("number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:Math.max(P,Z+8)},children:b.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""),style:{width:P,height:P},children:(0,n.jsx)(d,{size:W})})},e))})]}),(0,n.jsx)("div",{ref:L,className:"grid gap-3 ".concat(w||"number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{gridTemplateColumns:"repeat(".concat(B,", minmax(0, 1fr))")},children:y.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[m?"paddingRight":"paddingLeft"]:U,paddingTop:Q},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(m?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*P)})}),(0,n.jsxs)(x,{id:"friend-".concat(t),className:"flex flex-wrap gap-2",style:{minHeight:Math.max(P,Z+8)},children:[e.map((e,r)=>(0,n.jsx)(p,{id:e,children:(0,n.jsxs)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""," relative"),style:{width:P,height:P},children:[(0,n.jsx)(d,{size:W}),"number"==typeof o&&(o>=3||o>=2&&0===t)&&(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:o>=3?String(r+1):r<S?String(r+1):r===M-1?"?":""}),"number"==typeof o&&2===o&&0===t&&r===Math.min(S,M-1)&&(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-50 ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"}),"number"==typeof o&&1===o&&0===t&&0===r&&(0,n.jsx)("span",{className:"absolute ".concat(m?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-50 ").concat(m?"animate-pointer-rtl":"animate-pointer"),children:m?"\uD83D\uDC48":"\uD83D\uDC49"})]})},e)),Array.from({length:Math.max(0,M-e.length)}).map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl border border-gray-200",style:{width:P,height:P}},t))]})]},t))})]})})}function v(e){let{size:t=28}=e,r=Math.max(1,Math.round(.04*t)),s=Math.round(t/2);return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 ".concat(t," ").concat(t),xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("radialGradient",{id:"gold",cx:"50%",cy:"40%",r:"70%",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#fde68a"}),(0,n.jsx)("stop",{offset:"60%",stopColor:"#fbbf24"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#f59e0b"})]})}),(0,n.jsx)("circle",{cx:s,cy:s,r:s-r,fill:"url(#gold)",stroke:"#b45309",strokeWidth:r}),(0,n.jsx)("circle",{cx:s,cy:s,r:Math.round(.55*s),fill:"none",stroke:"#d97706",strokeWidth:r})]})}function y(e){let{count:t=1,size:r=40}=e,s=Math.round(.8*r),a=Math.round(.2*r),i=Array.from({length:Math.min(5,Math.max(1,t))}),l=s+a*(i.length-1);return(0,n.jsx)("div",{style:{width:r,height:"100%",position:"relative"},children:(0,n.jsx)("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:(0,n.jsx)("div",{style:{position:"relative",width:s,height:l},children:i.map((e,t)=>(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:t*a,display:"grid",placeItems:"center"},children:(0,n.jsx)(v,{size:s})},t))})})})}function j(e){let t=[],r=Math.max(0,Math.floor(e)),n=e=>{e>=1&&t.push(Math.min(5,Math.max(1,e)))};for(;r>=5;)n(5),r-=5;for(let e of[4,3,2,1])for(;r>=e;)n(e),r-=e;return t}function w(e){let{count:t,size:r,overlayNumbers:s,pointerIndex:a,rtl:i,questionIndex:l}=e,o=j(t),c=Math.max(20,Math.min(r,40)),u=Math.round(.8*c),d=Math.max(2,Math.round(.2*c)),h=e=>u+d*(e-1),m=h(5);return(0,n.jsx)("div",{className:"flex flex-wrap items-center gap-1",style:{minHeight:m},children:o.map((e,t)=>(0,n.jsxs)("div",{className:"relative rounded-md bg-white shadow-soft grid place-items-center",style:{width:c,height:h(e)},children:[(0,n.jsx)(y,{count:e,size:c}),s&&"number"==typeof s[t]&&(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-xs sm:text-sm lg:text-base font-black text-white num-stroke",children:s[t]}),"number"==typeof l&&l===t&&!(s&&"number"==typeof s[t])&&(0,n.jsx)("span",{className:"absolute inset-0 grid place-items-center text-xs sm:text-sm lg:text-base font-black text-white num-stroke",children:"?"}),"number"==typeof a&&a===t&&(0,n.jsx)("span",{className:"absolute ".concat(i?"-right-6":"-left-6"," top-[35%] pointer-events-none text-2xl z-50 ").concat(i?"animate-pointer-rtl":"animate-pointer"),children:i?"\uD83D\uDC48":"\uD83D\uDC49"})]},t))})}function N(e){let{a:t,b:r,mistake:a,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let d="he"===(0,i.g)(e=>e.profile.language||"en"),m=t*r,[M,b]=(0,s.useState)(()=>0),[y,N]=(0,s.useState)(()=>Array.from({length:t},()=>r)),[D,k]=(0,s.useState)(null),S=(0,s.useRef)(0),C=(0,s.useRef)(null),R=(0,s.useRef)(0),T=(0,s.useRef)(!1);(0,s.useEffect)(()=>{T.current=!1},[o]),(0,s.useEffect)(()=>{b(0),N(Array.from({length:t},()=>r)),S.current=0},[t,r,m]),(0,s.useEffect)(()=>{M!==m||T.current||(T.current=!0,null==l||l())},[M,m,l]),(0,s.useEffect)(()=>{if(!a)return;let e=[];y.forEach((t,r)=>{for(let n=0;n<t;n++)e.push(r)});let t=0;R.current+=1;let r=R.current,n=()=>{if(r!==R.current)return;if(t>=e.length){T.current||(T.current=!0,null==l||l());return}let s=e[t++];N(e=>e.map((e,t)=>t===s?Math.max(0,e-1):e)),b(e=>Math.min(m,e+1)),k(S.current++),C.current=window.setTimeout(n,160)};return n(),()=>{R.current+=1,C.current&&(clearTimeout(C.current),C.current=null)}},[a]);let E=(0,s.useMemo)(()=>t>=8?5:t>=6?4:Math.min(3,t),[t]),A=(0,s.useMemo)(()=>t>=8?32:t>=6?36:40,[t]),z=(0,s.useMemo)(()=>j(M),[M]),L=(0,s.useMemo)(()=>{if("number"==typeof o&&0!==z.length){if(o>=3){let e=0;return z.map(t=>e+=t)}if(2===o){let e=0;return z.map((t,r)=>r<z.length-1?e+=t:void 0)}}},[o,z]),O=(0,s.useMemo)(()=>{if("number"==typeof o&&2===o&&z.length>0)return z.length-1},[o,z]),I=(0,s.useMemo)(()=>{if("number"==typeof o&&0!==z.length){if(1===o)return 0;if(2===o)return z.length-1}},[o,z]),B=(0,s.useMemo)(()=>Math.round(.8*A),[A]),F=(0,s.useMemo)(()=>Math.max(2,Math.round(.2*A)),[A]),H=e=>B+F*(e-1),P=(0,s.useMemo)(()=>H(5),[B,F]),W=(0,s.useMemo)(()=>Math.round(1.3*A),[A]),Z=(0,s.useMemo)(()=>Math.max(8,Math.round(.6*W)),[W]),_=(0,s.useMemo)(()=>Math.max(12,Math.round(1.2*W)),[W]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let r=null===(t=e.over)||void 0===t?void 0:t.id;if(!r||(f.drop(),"pool"!==r))return;let n=String(e.active.id);if(!n.startsWith("g-"))return;let s=parseInt(n.split("-")[1]);!isNaN(s)&&(y[s]<=0||(N(e=>e.map((e,t)=>t===s?Math.max(0,e-1):e)),b(e=>Math.min(m,e+1)),k(S.current++)))},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[d?"paddingRight":"paddingLeft"]:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," text-gray-400"),style:{fontSize:W},children:"\uD83D\uDDC3️"}),(0,n.jsx)(x,{id:"pool",className:"flex flex-nowrap items-center overflow-x-auto gap-2 py-1 ".concat("number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:P},children:(0,n.jsx)(w,{count:M,size:A,overlayNumbers:L,questionIndex:O,pointerIndex:I,rtl:d})})]}),(0,n.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:"repeat(".concat(E,", minmax(0, 1fr))")},children:y.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[d?"paddingRight":"paddingLeft"]:Z},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*A)})}),(0,n.jsx)(x,{id:"group-".concat(t),className:"grid place-items-center py-1",style:{minHeight:P},children:j(e).map((e,r)=>{let s=H(e);return(0,n.jsx)("div",{className:"relative rounded-md bg-white shadow-soft",style:{width:A,height:s},children:(0,n.jsx)("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:(0,n.jsx)("div",{style:{position:"relative",width:B,height:s},children:Array.from({length:e}).map((s,a)=>{let i="g-".concat(t,"-s-").concat(r,"-c-").concat(a,"-").concat(null!=D?D:0);return(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:a*F,display:"grid",placeItems:"center",zIndex:10+a},children:(0,n.jsx)(p,{id:i,children:(0,n.jsx)("div",{className:"grid place-items-center ".concat(a===e-1?"animate-pop":""),style:{width:B,height:B},children:(0,n.jsx)(v,{size:B})})})},i)})})})},"g-".concat(t,"-s-").concat(r,"-").concat(null!=D?D:0))})})]},t))})]})})}function D(e){let{a:t,b:r,mistake:a,onReady:l,mistakes:o,maxH:c}=e;(0,g.Q)();let d="he"===(0,i.g)(e=>e.profile.language||"en"),m=Math.floor(t/r),[M,b]=(0,s.useState)(()=>t),[y,N]=(0,s.useState)(()=>Array.from({length:r},()=>0)),[D,k]=(0,s.useState)(null),S=(0,s.useRef)(0),C=(0,s.useRef)(null),R=(0,s.useRef)(0),T=(0,s.useRef)(!1);(0,s.useEffect)(()=>{T.current=!1},[o]),(0,s.useEffect)(()=>{b(t),N(Array.from({length:r},()=>0)),S.current=0},[t,r]),(0,s.useEffect)(()=>{0===M&&y.every(e=>e===m)&&!T.current&&(T.current=!0,null==l||l())},[M,y,m,l]),(0,s.useEffect)(()=>{if(!a)return;let e=y.map(e=>Math.max(0,m-e)),t=[];e.forEach((e,r)=>{for(let n=0;n<e;n++)t.push(r)});let r=0;R.current+=1;let n=R.current,s=()=>{if(n!==R.current)return;if(r>=t.length||M<=0){T.current||(T.current=!0,null==l||l());return}let e=t[r++];b(e=>Math.max(0,e-1)),N(t=>t.map((t,r)=>r===e?Math.min(m,t+1):t)),k(S.current++),C.current=window.setTimeout(s,160)};return s(),()=>{R.current+=1,C.current&&(clearTimeout(C.current),C.current=null)}},[a]);let E=(0,s.useMemo)(()=>r>=8?5:r>=6?4:Math.min(3,r),[r]),A=(0,s.useMemo)(()=>r>=8?32:r>=6?36:40,[r]),z=(0,s.useMemo)(()=>j(M),[M]),L=(0,s.useMemo)(()=>"number"!=typeof o?[]:y.map((e,t)=>{let r=j(e);if(o>=3){let e=0;return r.map(t=>e+=t)}if(2===o&&0===t){if(0===r.length)return;let e=0;return r.map((t,n)=>n<r.length-1?e+=t:void 0)}}),[o,y]),O=(0,s.useMemo)(()=>"number"!=typeof o?[]:y.map((e,t)=>{let r=j(e);if(2===o&&0===t&&r.length>0)return r.length-1}),[o,y]),I=(0,s.useMemo)(()=>"number"!=typeof o?[]:y.map((e,t)=>{let r=j(e);if(0===t&&0!==r.length){if(1===o)return 0;if(2===o)return r.length-1}}),[o,y]),B=(0,s.useMemo)(()=>Math.round(.8*A),[A]),F=(0,s.useMemo)(()=>Math.max(2,Math.round(.2*A)),[A]),H=e=>B+F*(e-1),P=(0,s.useMemo)(()=>H(5),[B,F]),W=(0,s.useMemo)(()=>Math.round(1.3*A),[A]),Z=(0,s.useMemo)(()=>Math.max(8,Math.round(.6*W)),[W]),_=(0,s.useMemo)(()=>Math.max(12,Math.round(1.2*W)),[W]);return(0,n.jsx)(u.LB,{onDragStart:function(){f.drag()},onDragEnd:function(e){var t;if("number"==typeof o&&o>=1)return;let r=null===(t=e.over)||void 0===t?void 0:t.id;if(!r||(f.drop(),!r.startsWith("friend-")))return;let n=parseInt(r.split("-")[1]);isNaN(n)||y[n]>=m||M<=0||(b(e=>Math.max(0,e-1)),N(e=>e.map((e,t)=>t===n?Math.min(m,e+1):e)),k(S.current++))},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[d?"paddingRight":"paddingLeft"]:_},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," text-gray-400"),style:{fontSize:W},children:"\uD83D\uDDC3️"}),(0,n.jsx)(x,{id:"pool",className:"flex flex-nowrap items-center overflow-x-auto gap-2 py-1 ".concat("number"==typeof o&&o>=1?"pointer-events-none opacity-95":""),style:{minHeight:P},children:z.map((e,t)=>{let r=H(e);return(0,n.jsx)("div",{className:"relative rounded-md bg-white shadow-soft",style:{width:A,height:r},children:(0,n.jsx)("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:(0,n.jsx)("div",{style:{position:"relative",width:B,height:r},children:Array.from({length:e}).map((r,s)=>{let a="p-".concat(t,"-").concat(s,"-").concat(null!=D?D:0);return(0,n.jsx)("div",{style:{position:"absolute",left:0,right:0,bottom:s*F,display:"grid",placeItems:"center",zIndex:10+s},children:(0,n.jsx)(p,{id:a,children:(0,n.jsx)("div",{className:"grid place-items-center ".concat(s===e-1?"animate-pop":""),style:{width:B,height:B},children:(0,n.jsx)(v,{size:B})})})},a)})})})},"s-".concat(t,"-").concat(null!=D?D:0))})})]}),(0,n.jsx)("div",{className:"grid gap-3",style:{gridTemplateColumns:"repeat(".concat(E,", minmax(0, 1fr))")},children:y.map((e,t)=>(0,n.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[d?"paddingRight":"paddingLeft"]:Z},children:[(0,n.jsx)("span",{className:"pointer-events-none absolute top-1 ".concat(d?"right-1":"left-1"," opacity-80"),children:(0,n.jsx)(h,{size:Math.round(1.3*A)})}),(0,n.jsx)(x,{id:"friend-".concat(t),className:"grid place-items-center py-1",children:(0,n.jsx)(w,{count:e,size:A,overlayNumbers:L[t],questionIndex:O[t],pointerIndex:I[t],rtl:d})})]},t))})]})})}function k(){let e=(0,i.g)(),t=e.current;(0,s.useEffect)(()=>{t||e.nextChallenge()},[t,e]),(0,s.useEffect)(()=>{e.sessionStartAt||e.startSession()},[e.sessionStartAt,e.startSession]),(0,s.useEffect)(()=>{f.setEnabled(e.profile.soundOn)},[e.profile.soundOn]);let[r,l]=(0,s.useState)(!1),[u,d]=(0,s.useState)(0),[h,m]=(0,s.useState)(!1),p=(0,s.useRef)(null),x=(0,s.useRef)(null),[g,v]=(0,s.useState)(0),y=(0,s.useMemo)(()=>t?"multiply-groups"===t.game?(0,n.jsx)(M,{a:t.a,b:t.b,mistake:r,mistakes:u,onReady:w,maxH:g},t.id):"division-dealer"===t.game?(0,n.jsx)(b,{a:t.a,b:t.b,mistake:r,onReady:w,mistakes:u,maxH:g},t.id):"coins-multiply-groups"===t.game?(0,n.jsx)(N,{a:t.a,b:t.b,mistake:r,mistakes:u,onReady:w,maxH:g},t.id):"coins-division-dealer"===t.game?(0,n.jsx)(D,{a:t.a,b:t.b,mistake:r,onReady:w,mistakes:u,maxH:g},t.id):null:null,[t,r,u,g]);if(!t)return null;function j(r){if(!t)return;let n=r===t.answer;if(n?f.success():f.error(),!n){l(!0),d(e=>e+1),m(!0);return}l(!1),e.answer(r)}function w(){m(!1),l(!1)}(0,s.useEffect)(()=>{d(0),l(!1)},[null==t?void 0:t.id]);let k=Math.min(100,Math.round(e.sessionCorrect%10/10*100));return(0,s.useEffect)(()=>{if(!p.current)return;let e=new ResizeObserver(e=>{for(let t of e)v(Math.max(0,Math.floor(t.contentRect.height-(x.current?x.current.offsetHeight:0)-28)))});return e.observe(p.current),()=>e.disconnect()},[]),(0,n.jsxs)("main",{className:"game-screen flex flex-col",children:[(0,n.jsxs)("div",{className:"px-4 pt-4",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between",children:[(0,n.jsx)(a.default,{href:"/menu",className:"text-xl px-3 py-1 rounded-lg border bg-white shadow-soft active:scale-95 select-none",children:"☰"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"text-xs bg-white px-2 py-1 rounded-lg border flex items-center gap-1",children:["\uD83C\uDFC5 ",(0,n.jsx)("span",{className:"font-bold",children:e.profile.level})]}),(0,n.jsxs)("span",{className:"text-xs bg-white px-2 py-1 rounded-lg border",children:["⭐ ",e.profile.points]}),(0,n.jsx)("button",{onClick:()=>e.toggleSound(),className:"text-xs px-2 py-1 rounded-lg border ".concat(e.profile.soundOn?"bg-green-50":"bg-red-50"),children:e.profile.soundOn?"\uD83D\uDD0A":"\uD83D\uDD07"})]})]}),(0,n.jsx)("div",{className:"progress mt-2",children:(0,n.jsx)("div",{className:"bar bg-brand",style:{width:"".concat(k,"%")}})})]}),(0,n.jsx)("section",{className:"flex-1 overflow-hidden px-4 py-1",children:(0,n.jsxs)("div",{ref:p,className:"card h-full p-3 game-area overflow-hidden flex flex-col items-center",children:[(0,n.jsx)("div",{ref:x,className:"text-center mb-4 mt-2",children:(0,n.jsxs)("div",{dir:"ltr",className:"text-4xl sm:text-5xl font-black tracking-tight",children:[t.a," ","mul"===t.op?"\xd7":"\xf7"," ",t.b]})}),(0,n.jsx)("div",{className:"w-full",children:y})]})}),(0,n.jsx)("section",{className:"px-4 pb-5",children:"mc"===t.input?(0,n.jsx)(o,{values:t.choices,correct:t.answer,onSelect:j,disabled:h,highlightCorrect:u>=3}):(0,n.jsx)(c,{min:0,max:100,onPick:j,disabled:h,correct:t.answer,highlightCorrect:u>=3})})]})}},6544:function(e,t,r){"use strict";r.d(t,{Q:function(){return a}});var n=r(1127);let s={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",themeBuzz:"Buzz",themeBarbie:"Barbie",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"MathTik",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",themeBuzz:"Базз",themeBarbie:"Барби",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"MathTik",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",themeBuzz:"באז",themeBarbie:"ברבי",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function a(){let e=(0,n.g)(e=>e.profile.language||"en");return t=>s[e][t]}},1127:function(e,t,r){"use strict";r.d(t,{O:function(){return c},g:function(){return m}});var n=r(9625),s=r(6885);let a=e=>Math.floor(Math.random()*e),i=(e,t,r)=>Math.max(t,Math.min(r,e)),l=(e,t,r)=>"mul"===e?"m:".concat(t,"x").concat(r):"d:".concat(t,"/").concat(r);function o(){return Math.floor(Date.now()/1e3)}let c=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],u={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"buzz"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function d(e){let t=Math.max(5,e),r=a(t)+1,n=t>=5?a(t-4)+5:5;return{op:"mul",a:r,b:n,answer:r*n}}function h(e){let t=Math.max(5,e),r=a(t)+1,n=t>=5?a(t-4)+5:5;return{op:"div",a:r*n,b:r,answer:n}}let m=(0,n.Ue)()((0,s.tJ)((e,t)=>({...u,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let r;let n=t(),s=i(n.profile.maxFactor,2,10);if(n.recentMistakes.length){let[e,t]=n.recentMistakes.shift().split(":"),[s,a]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);r={op:"m"===e?"mul":"div",a:s,b:a}}else{let e=Object.values(n.mastery).find(e=>e.dueAt<=o());if(e){let[t,n]=e.key.split(":"),[s,a]=n.includes("x")?n.split("x").map(Number):n.split("/").map(Number);r={op:"m"===t?"mul":"div",a:s,b:a}}}let l=function(e,t,r){var n,s,i;let l=r?{op:r.op,a:r.a,b:r.b,answer:"mul"===r.op?r.a*r.b:Math.floor(r.a/r.b)}:.5>Math.random()?d(e):h(e),o=!r&&t&&.5>Math.random()?"mul"===t?h(e):d(e):l;return{id:"".concat(o.op,":").concat(o.a,":").concat(o.b,":").concat(Date.now()),op:o.op,a:o.a,b:o.b,answer:o.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let r=a(9)-4,n=Math.max(0,e+r+(0===r?a(3)+1:0));t.add(n)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}([...t])}(o.answer),game:(n=o.op,s=o.a,i=o.b,"mul"===n?i>4?"coins-multiply-groups":"multiply-groups":Math.floor(s/i)>4?"coins-division-dealer":"division-dealer"),input:.75>Math.random()?"mc":"wheel"}}(s,n.lastOp,r);e({current:l,startedAt:Date.now(),lastOp:l.op})},answer:r=>{var n,s,a;let u=t(),d=u.current;if(!d)return;let h=r===d.answer;Date.now(),null!==(n=u.startedAt)&&void 0!==n||Date.now();let m=l(d.op,d.a,d.b),f=u.mastery[m],p=function(e,t){let r=o();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:r+10,lastResult:t};let n=i(e.score+(t?1:-2),0,5),s=i(e.ease+(t?.08:-.2),1.2,2.6),a=t?Math.max(10,Math.round(e.intervalSec*s)):10;return{...e,score:n,ease:s,intervalSec:a,dueAt:r+a,lastResult:t}}(f&&{...f,key:m},h);p.key=m;let x=Math.min(10,Math.max(0,2*u.profile.streak)),g={...u.profile};if(g.totalAttempts+=1,h)for(let e of(g.totalCorrect+=1,g.streak+=1,g.bestStreak=Math.max(g.bestStreak,g.streak),g.points+=10+x,g.streak%4==0&&(g.maxFactor=i(g.maxFactor+1,2,10),g.level=Math.max(g.level,g.maxFactor)),c))g.points>=e.cost&&(g.unlocked[e.id]=!0);else{g.streak=0,g.maxFactor=i(g.maxFactor-1,2,10),g.level=Math.max(1,g.maxFactor);let t="mul"===d.op?"m:".concat(d.a,"x").concat(d.b):"d:".concat(d.a,"/").concat(d.b),r=u.recentMistakes.slice();r.includes(t)||r.push(t),e({recentMistakes:r})}e({profile:g,mastery:{...u.mastery,[p.key]:p},sessionAttempts:(null!==(s=u.sessionAttempts)&&void 0!==s?s:0)+1,sessionCorrect:(null!==(a=u.sessionCorrect)&&void 0!==a?a:0)+(h?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))}},function(e){e.O(0,[883,648,633,971,117,744],function(){return e(e.s=778)}),_N_E=e.O()}]);