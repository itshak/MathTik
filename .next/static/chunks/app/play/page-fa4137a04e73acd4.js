(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{778:function(e,t,s){Promise.resolve().then(s.bind(s,9345))},9345:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return y}});var n=s(7437),r=s(2265),a=s(7648),l=s(1127),i=s(1994);function o(e){let{values:t,correct:s,onSelect:r,disabled:a,highlightCorrect:l}=e;return(0,n.jsx)("div",{className:(0,i.Z)("grid grid-cols-2 sm:grid-cols-4 gap-3",a&&"opacity-60 pointer-events-none"),children:t.map(e=>{let t=e===s;return(0,n.jsx)("button",{onClick:()=>r(e),className:(0,i.Z)("btn btn-secondary text-3xl py-6",l&&t&&"ring-4 ring-good animate-pump"),"data-correct":t?"true":"false",children:e},e)})})}function c(e){let{min:t=0,max:s=100,value:a,onPick:l,disabled:o}=e,c=(0,r.useMemo)(()=>{let e=[];for(let n=t;n<=s;n++)e.push(n);return e},[t,s]);return(0,n.jsx)("div",{className:(0,i.Z)("overflow-x-auto card p-3",o&&"opacity-60 pointer-events-none"),children:(0,n.jsx)("div",{className:"flex gap-3 w-max",children:c.map(e=>(0,n.jsx)("button",{onClick:()=>l(e),className:(0,i.Z)("px-5 py-4 rounded-xl font-extrabold shadow-soft text-2xl",e===a?"bg-brand text-white":"bg-white border"),children:e},e))})})}var d=s(1660);function u(e){let{size:t=28}=e;return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("defs",{children:(0,n.jsxs)("linearGradient",{id:"g",x1:"0",y1:"0",x2:"1",y2:"1",children:[(0,n.jsx)("stop",{offset:"0%",stopColor:"#ff8a8a"}),(0,n.jsx)("stop",{offset:"100%",stopColor:"#ff3b3b"})]})}),(0,n.jsx)("path",{d:"M44 22c4 1 8 5 8 12 0 10-8 18-20 18S12 44 12 34c0-7 4-11 8-12 3-1 6 0 8 1 2 1 4 1 6 0 2-1 5-2 8-1z",fill:"url(#g)"}),(0,n.jsx)("path",{d:"M34 18c-2-6 4-9 8-8-2 5-5 7-8 8z",fill:"#6b7280"}),(0,n.jsx)("path",{d:"M34 14c0-2 2-4 4-4",stroke:"#15803d",strokeWidth:"4",strokeLinecap:"round"})]})}function m(e){let{size:t=28,skin:s="#f9c9b6",shirt:r="#93c5fd"}=e;return(0,n.jsxs)("svg",{width:t,height:t,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("circle",{cx:"32",cy:"22",r:"12",fill:s}),(0,n.jsx)("rect",{x:"16",y:"36",width:"32",height:"20",rx:"10",fill:r}),(0,n.jsx)("circle",{cx:"26",cy:"24",r:"2",fill:"#111827"}),(0,n.jsx)("circle",{cx:"38",cy:"24",r:"2",fill:"#111827"}),(0,n.jsx)("path",{d:"M24 30c4 3 12 3 16 0",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"})]})}class h{setEnabled(e){this.enabled=e}ensure(){this.ctx||(this.ctx=new(window.AudioContext||window.webkitAudioContext))}tone(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.12,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sine",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2;if(!this.enabled||(this.ensure(),!this.ctx))return;let r=this.ctx.createOscillator(),a=this.ctx.createGain();r.type=s,r.frequency.value=e,a.gain.value=n,r.connect(a).connect(this.ctx.destination),r.start(),a.gain.exponentialRampToValueAtTime(1e-4,this.ctx.currentTime+t),r.stop(this.ctx.currentTime+t)}success(){this.tone(660,.08,"triangle",.25),setTimeout(()=>this.tone(880,.1,"triangle",.22),60)}error(){this.tone(200,.12,"sawtooth",.2),setTimeout(()=>this.tone(150,.14,"sawtooth",.18),60)}drag(){this.tone(500,.05,"sine",.05)}drop(){this.tone(420,.06,"square",.08)}levelUp(){this.tone(523,.08,"triangle",.2),setTimeout(()=>this.tone(659,.08,"triangle",.18),70),setTimeout(()=>this.tone(783,.12,"triangle",.16),140)}constructor(){this.enabled=!0}}let x=new h;function p(e){let{id:t,children:s}=e,{attributes:r,listeners:a,setNodeRef:l,transform:o,isDragging:c}=(0,d.O1)({id:String(t)}),u=o?{transform:"translate3d(".concat(o.x,"px, ").concat(o.y,"px, 0)")}:{};return(0,n.jsx)("div",{ref:l,...a,...r,style:u,className:(0,i.Z)(c&&"opacity-70"),children:s})}function f(e){let{id:t,className:s,style:r,children:a}=e,{isOver:l,setNodeRef:o}=(0,d.Zj)({id:t});return(0,n.jsx)("div",{ref:o,className:(0,i.Z)(s,l&&"ring-2 ring-brand/50"),style:r,children:a})}var g=s(6544);function v(e){let{a:t,b:s,mistake:a,onReady:l,mistakes:i}=e,o=(0,g.Q)(),c=t*s,[h,v]=(0,r.useState)([]),[j,b]=(0,r.useState)(()=>Array.from({length:t},(e,t)=>Array.from({length:s},(e,n)=>t*s+n))),[y,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(0),[D,M]=(0,r.useState)(null);(0,r.useEffect)(()=>{v([]),b(Array.from({length:t},(e,t)=>Array.from({length:s},(e,n)=>t*s+n)))},[t,s]),(0,r.useEffect)(()=>{h.length===c&&(null==l||l())},[h.length,c,l]),(0,r.useEffect)(()=>{if(!a||y)return;w(!0);let e=[];j.forEach(t=>t.forEach(t=>e.push(t)));let t=0,s=setInterval(()=>{if(t>=e.length){clearInterval(s),w(!1);return}let n=e[t++];b(e=>e.map(e=>e.includes(n)?e.filter(e=>e!==n):e)),v(e=>[...e,n]),M(n),k(e=>e+1)},180);return()=>clearInterval(s)},[a,y,j]);let S=Math.min(10,s),A=(0,r.useMemo)(()=>S>=10?32:S>=8?36:S>=6?44:56,[S]),C=Math.max(20,Math.round(.66*A));return(0,n.jsx)(d.LB,{onDragStart:function(){x.drag()},onDragEnd:function(e){var t;let n=Number(e.active.id),r=null===(t=e.over)||void 0===t?void 0:t.id;if(!r)return;x.drop();let a=j.findIndex(e=>e.includes(n)),l=-1===a;if("pool"===r){l||(b(e=>e.map((e,t)=>t===a?e.filter(e=>e!==n):e)),v(e=>[...e,n]));return}if(r.startsWith("group-")){let e=parseInt(r.split("-")[1]);if(isNaN(e)||j[e].length>=s)return;if(l)v(e=>e.filter(e=>e!==n)),b(t=>t.map((t,s)=>s===e?[...t,n]:t));else{if(a===e)return;b(t=>t.map((t,s)=>s===a?t.filter(e=>e!==n):s===e?[...t,n]:t))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 ".concat(y?"pointer-events-none opacity-95":""),children:j.map((e,t)=>(0,n.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-2",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[(0,n.jsx)(m,{size:36})," ",(0,n.jsx)("span",{className:"text-base",children:"\xd7"})," ",(0,n.jsx)(u,{size:C})]}),(0,n.jsxs)(f,{id:"group-".concat(t),className:"mt-2 grid gap-2 min-h-[120px]",style:{gridTemplateColumns:"repeat(".concat(S,", minmax(0,1fr))")},children:[e.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""),style:{width:A,height:A},children:(0,n.jsx)(u,{size:C})})},e)),Array.from({length:Math.max(0,s-e.length)}).map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl border border-gray-200",style:{width:A,height:A}},t))]}),(0,n.jsxs)("div",{className:"text-[10px] mt-1 text-gray-400 font-bold",children:[e.length,"/",s]})]},t))}),(0,n.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[(0,n.jsx)("span",{children:"\uD83E\uDDFA"}),(0,n.jsx)("span",{children:o("pool")}),(y||"number"==typeof i&&i>=1)&&(0,n.jsxs)("span",{className:"ml-auto text-[11px] text-gray-400 flex items-center gap-1",children:[(0,n.jsx)("span",{className:"animate-pointer",children:"\uD83D\uDC49"}),o("countTogether")," ",N,"/",c]})]}),(0,n.jsx)(f,{id:"pool",className:"mt-2 flex flex-wrap gap-2 min-h-[120px] ".concat(i&&i>=1?"ring-2 ring-brand/40 rounded-xl p-2 -m-2":""),children:h.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(D===e?"animate-pop":""),style:{width:A,height:A},children:(0,n.jsx)(u,{size:C})})},e))})]})]})})}function j(e){let{a:t,b:s,mistake:a,onReady:l,mistakes:i}=e,o=(0,g.Q)(),c=Math.floor(t/s),[h,v]=(0,r.useState)(()=>Array.from({length:t},(e,t)=>t)),[j,b]=(0,r.useState)(()=>Array.from({length:s},()=>[])),[y,w]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{v(Array.from({length:t},(e,t)=>t)),b(Array.from({length:s},()=>[]))},[t,s]),(0,r.useEffect)(()=>{0===h.length&&j.every(e=>e.length===c)&&(null==l||l())},[h,j,c,l]),(0,r.useEffect)(()=>{if(!a||y)return;w(!0);let e=setInterval(()=>{let t=j.findIndex(e=>e.length<c);if(-1===t||0===h.length){clearInterval(e),w(!1);return}let s=h[0];v(e=>e.slice(1)),b(e=>e.map((e,n)=>n===t?[...e,s]:e)),k(s)},180);return()=>clearInterval(e)},[a,y,j,h.length,c]);let D=Math.min(10,c),M=(0,r.useMemo)(()=>D>=10?32:D>=8?36:D>=6?44:56,[D]),S=Math.max(20,Math.round(.66*M));return(0,n.jsx)(d.LB,{onDragStart:function(){x.drag()},onDragEnd:function(e){var t;let s=Number(e.active.id),n=null===(t=e.over)||void 0===t?void 0:t.id;if(!n)return;x.drop();let r=j.findIndex(e=>e.includes(s)),a=-1===r;if("pool"===n){a||(b(e=>e.map((e,t)=>t===r?e.filter(e=>e!==s):e)),v(e=>[...e,s]));return}if(n.startsWith("friend-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||j[e].length>=c)return;if(a)v(e=>e.filter(e=>e!==s)),b(t=>t.map((t,n)=>n===e?[...t,s]:t));else{if(r===e)return;b(t=>t.map((t,n)=>n===r?t.filter(e=>e!==s):n===e?[...t,s]:t))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[(0,n.jsx)("span",{className:"text-xl",children:"\uD83D\uDDC3️"}),(y||"number"==typeof i&&i>=1)&&(0,n.jsxs)("span",{className:"ml-auto text-[11px] text-gray-400 flex items-center gap-1",children:[(0,n.jsx)("span",{className:"animate-pointer",children:"\uD83D\uDC49"}),o("countTogether")," ",t-h.length,"/",t]})]}),(0,n.jsx)(f,{id:"pool",className:"mt-2 flex flex-wrap gap-2 min-h-[120px]",children:h.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(N===e?"animate-pop":""),style:{width:M,height:M},children:(0,n.jsx)(u,{size:S})})},e))})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3 ".concat(y?"pointer-events-none opacity-95":""),children:j.map((e,t)=>(0,n.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-2",children:[(0,n.jsx)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:(0,n.jsx)(m,{size:36})}),(0,n.jsxs)(f,{id:"friend-".concat(t),className:"mt-2 flex flex-wrap gap-2 min-h-[120px]",children:[e.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(N===e?"animate-pop":""),style:{width:M,height:M},children:(0,n.jsx)(u,{size:S})})},e)),Array.from({length:Math.max(0,c-e.length)}).map((e,t)=>(0,n.jsx)("div",{className:"rounded-xl border border-gray-200",style:{width:M,height:M}},t))]}),(0,n.jsxs)("div",{className:"text-[10px] mt-1 text-gray-400 font-bold",children:[e.length,"/",c]})]},t))})]})})}function b(e){let{a:t,b:s,mistake:a,onReady:l,mistakes:i}=e,o=(0,g.Q)(),c=t*s,[m,h]=(0,r.useState)(()=>Array.from({length:c},(e,t)=>t)),[v,j]=(0,r.useState)(()=>Array.from({length:c},()=>null)),[b,y]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{h(Array.from({length:c},(e,t)=>t)),j(Array.from({length:c},()=>null))},[t,s]),(0,r.useEffect)(()=>{v.every(e=>null!==e)&&(null==l||l())},[v,l]),(0,r.useEffect)(()=>{if(!a||b)return;y(!0);let e=setInterval(()=>{let t=v.findIndex(e=>null===e);if(-1===t||0===m.length){clearInterval(e),y(!1);return}let s=m[0];h(e=>e.slice(1)),j(e=>e.map((e,n)=>n===t?s:e)),N(s)},180);return()=>clearInterval(e)},[a,b,v,m.length]);let k=Math.min(10,s),D=(0,r.useMemo)(()=>k>=10?32:k>=8?36:k>=6?44:56,[k]),M=Math.max(20,Math.round(.66*D));return(0,n.jsx)(d.LB,{onDragStart:function(){x.drag()},onDragEnd:function(e){var t;let s=Number(e.active.id),n=null===(t=e.over)||void 0===t?void 0:t.id;if(!n)return;x.drop();let r=m.includes(s);if("pool"===n){r||(j(e=>e.map(e=>e===s?null:e)),h(e=>[...e,s]));return}if(n.startsWith("cell-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||null!==v[e])return;if(r)h(e=>e.filter(e=>e!==s)),j(t=>t.map((t,n)=>n===e?s:t));else{let t=v.findIndex(e=>e===s);if(-1===t)return;j(n=>n.map((n,r)=>r===t?null:r===e?s:n))}}},children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-3 ".concat(a?"ring-2 ring-red-300 ring-offset-2":""),children:[(0,n.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-3 ".concat(b?"pointer-events-none opacity-95":""),children:[(0,n.jsx)(f,{id:"array",className:"grid gap-2"}),(0,n.jsx)("div",{className:"grid gap-2 mt-1",style:{gridTemplateColumns:"repeat(".concat(s,", minmax(0,1fr))")},children:v.map((e,t)=>(0,n.jsx)(f,{id:"cell-".concat(t),className:"rounded-xl border border-gray-200 grid place-items-center",style:{width:D,height:D},children:null!==e&&(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(w===e?"animate-pop":""),style:{width:D,height:D},children:(0,n.jsx)(u,{size:M})})})},t))}),(0,n.jsxs)("div",{className:"flex justify-between mt-2 text-[10px] text-gray-400 font-bold",children:[(0,n.jsxs)("span",{children:[t,"\xd7",s]}),(0,n.jsxs)("span",{children:[v.filter(e=>null!==e).length,"/",c]})]})]}),(0,n.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[(0,n.jsx)("span",{children:"\uD83E\uDDFA"}),(0,n.jsx)("span",{children:o("pool")}),(b||"number"==typeof i&&i>=1)&&(0,n.jsxs)("span",{className:"ml-auto text-[11px] text-gray-400 flex items-center gap-1",children:[(0,n.jsx)("span",{className:"animate-pointer",children:"\uD83D\uDC49"}),o("countTogether")," ",v.filter(e=>null!==e).length,"/",c]})]}),(0,n.jsx)(f,{id:"pool",className:"mt-2 flex flex-wrap gap-2 min-h-[120px]",children:m.map(e=>(0,n.jsx)(p,{id:e,children:(0,n.jsx)("div",{className:"rounded-xl grid place-items-center bg-white shadow-soft ".concat(w===e?"animate-pop":""),style:{width:D,height:D},children:(0,n.jsx)(u,{size:M})})},e))})]})]})})}function y(){let e=(0,l.g)(),t=e.current;(0,r.useEffect)(()=>{t||e.nextChallenge()},[t,e]),(0,r.useEffect)(()=>{e.sessionStartAt||e.startSession()},[e.sessionStartAt,e.startSession]),(0,r.useEffect)(()=>{x.setEnabled(e.profile.soundOn)},[e.profile.soundOn]);let[s,i]=(0,r.useState)(!1),[d,u]=(0,r.useState)(0),[m,h]=(0,r.useState)(!1),[p,f]=(0,r.useState)(null),g=(0,r.useMemo)(()=>t?"multiply-groups"===t.game?(0,n.jsx)(v,{a:t.a,b:t.b,mistake:s,mistakes:d,onReady:w},t.id):"division-dealer"===t.game?(0,n.jsx)(j,{a:t.a,b:t.b,mistake:s,onReady:w,mistakes:d},t.id):"array-builder"===t.game?(0,n.jsx)(b,{a:t.a,b:t.b,mistake:s,onReady:w,mistakes:d},t.id):null:null,[t,s,d]);if(!t)return null;function y(s){if(!t)return;let n=s===t.answer;if(n?x.success():x.error(),!n){i(!0),u(e=>e+1),h(!0),f(s);return}i(!1),e.answer(s)}function w(){m&&null!==p&&e.answer(p),h(!1),f(null),i(!1)}(0,r.useEffect)(()=>{u(0),i(!1)},[null==t?void 0:t.id]);let N=Math.min(100,Math.round(e.sessionCorrect%10/10*100));return(0,n.jsxs)("main",{className:"game-screen flex flex-col",children:[(0,n.jsxs)("div",{className:"px-4 pt-4",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between",children:[(0,n.jsx)(a.default,{href:"/menu",className:"text-xl px-3 py-1 rounded-lg border bg-white shadow-soft active:scale-95 select-none",children:"☰"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("div",{className:"text-xs bg-white px-2 py-1 rounded-lg border flex items-center gap-1",children:["\uD83C\uDFC5 ",(0,n.jsx)("span",{className:"font-bold",children:e.profile.level})]}),(0,n.jsxs)("span",{className:"text-xs bg-white px-2 py-1 rounded-lg border",children:["⭐ ",e.profile.points]}),(0,n.jsx)("button",{onClick:()=>e.toggleSound(),className:"text-xs px-2 py-1 rounded-lg border ".concat(e.profile.soundOn?"bg-green-50":"bg-red-50"),children:e.profile.soundOn?"\uD83D\uDD0A":"\uD83D\uDD07"})]})]}),(0,n.jsx)("div",{className:"progress mt-2",children:(0,n.jsx)("div",{className:"bar bg-brand",style:{width:"".concat(N,"%")}})})]}),(0,n.jsx)("section",{className:"flex-1 overflow-hidden px-4 py-2",children:(0,n.jsxs)("div",{className:"card h-full p-4 game-area overflow-auto flex flex-col items-center",children:[(0,n.jsx)("div",{className:"text-center mb-4 mt-2",children:(0,n.jsxs)("div",{className:"text-5xl sm:text-6xl font-black tracking-tight",children:[t.a," ","mul"===t.op?"\xd7":"\xf7"," ",t.b]})}),(0,n.jsx)("div",{className:"w-full max-w-4xl mx-auto",children:g})]})}),(0,n.jsx)("section",{className:"px-4 pb-5",children:"mc"===t.input?(0,n.jsx)(o,{values:t.choices,correct:t.answer,onSelect:y,highlightCorrect:d>=3,disabled:m}):(0,n.jsx)(c,{min:0,max:100,onPick:y,disabled:m})})]})}},6544:function(e,t,s){"use strict";s.d(t,{Q:function(){return a}});var n=s(1127);let r={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"МэтТик",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"מתיק",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function a(){let e=(0,n.g)(e=>e.profile.language||"en");return t=>r[e][t]}},1127:function(e,t,s){"use strict";s.d(t,{O:function(){return c},g:function(){return h}});var n=s(9625),r=s(6885);let a=e=>Math.floor(Math.random()*e),l=(e,t,s)=>Math.max(t,Math.min(s,e)),i=(e,t,s)=>"mul"===e?"m:".concat(t,"x").concat(s):"d:".concat(t,"/").concat(s);function o(){return Math.floor(Date.now()/1e3)}let c=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],d={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function u(e){let t=a(e)+1,s=a(e)+1;return{op:"mul",a:t,b:s,answer:t*s}}function m(e){let t=a(e)+1,s=a(e)+1;return{op:"div",a:t*s,b:t,answer:s}}let h=(0,n.Ue)()((0,r.tJ)((e,t)=>({...d,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let s;let n=t(),r=l(n.profile.maxFactor,2,10);if(n.recentMistakes.length){let[e,t]=n.recentMistakes.shift().split(":"),[r,a]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);s={op:"m"===e?"mul":"div",a:r,b:a}}else{let e=Object.values(n.mastery).find(e=>e.dueAt<=o());if(e){let[t,n]=e.key.split(":"),[r,a]=n.includes("x")?n.split("x").map(Number):n.split("/").map(Number);s={op:"m"===t?"mul":"div",a:r,b:a}}}let i=function(e,t,s){let n=s?{op:s.op,a:s.a,b:s.b,answer:"mul"===s.op?s.a*s.b:Math.floor(s.a/s.b)}:.5>Math.random()?u(e):m(e),r=!s&&t&&.5>Math.random()?"mul"===t?m(e):u(e):n;return{id:"".concat(r.op,":").concat(r.a,":").concat(r.b,":").concat(Date.now()),op:r.op,a:r.a,b:r.b,answer:r.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let s=a(9)-4,n=Math.max(0,e+s+(0===s?a(3)+1:0));t.add(n)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}([...t])}(r.answer),game:"mul"===r.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(r,n.lastOp,s);e({current:i,startedAt:Date.now(),lastOp:i.op})},answer:s=>{var n,r,a;let d=t(),u=d.current;if(!u)return;let m=s===u.answer;Date.now(),null!==(n=d.startedAt)&&void 0!==n||Date.now();let h=i(u.op,u.a,u.b),x=d.mastery[h],p=function(e,t){let s=o();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:s+10,lastResult:t};let n=l(e.score+(t?1:-2),0,5),r=l(e.ease+(t?.08:-.2),1.2,2.6),a=t?Math.max(10,Math.round(e.intervalSec*r)):10;return{...e,score:n,ease:r,intervalSec:a,dueAt:s+a,lastResult:t}}(x&&{...x,key:h},m);p.key=h;let f=Math.min(10,Math.max(0,2*d.profile.streak)),g={...d.profile};if(g.totalAttempts+=1,m)for(let e of(g.totalCorrect+=1,g.streak+=1,g.bestStreak=Math.max(g.bestStreak,g.streak),g.points+=10+f,g.streak%4==0&&(g.maxFactor=l(g.maxFactor+1,2,10),g.level=Math.max(g.level,g.maxFactor)),c))g.points>=e.cost&&(g.unlocked[e.id]=!0);else{g.streak=0,g.maxFactor=l(g.maxFactor-1,2,10),g.level=Math.max(1,g.maxFactor);let t="mul"===u.op?"m:".concat(u.a,"x").concat(u.b):"d:".concat(u.a,"/").concat(u.b),s=d.recentMistakes.slice();s.includes(t)||s.push(t),e({recentMistakes:s})}e({profile:g,mastery:{...d.mastery,[p.key]:p},sessionAttempts:(null!==(r=d.sessionAttempts)&&void 0!==r?r:0)+1,sessionCorrect:(null!==(a=d.sessionCorrect)&&void 0!==a?a:0)+(m?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))}},function(e){e.O(0,[883,648,633,971,117,744],function(){return e(e.s=778)}),_N_E=e.O()}]);