(()=>{var e={};e.id=409,e.ids=[409],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u}),r(7352),r(5866),r(5349);var n=r(3191),o=r(8716),s=r(7922),a=r.n(s),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let u=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5349)),"/Users/ais/Projects/edugames/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=[],c="/_not-found/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:o.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},3911:(e,t,r)=>{Promise.resolve().then(r.bind(r,6817))},4667:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},6817:(e,t,r)=>{"use strict";r.d(t,{ThemeEffect:()=>o}),r(7577);var n=r(8490);function o(){return(0,n.g)(e=>e.profile.theme),(0,n.g)(e=>e.profile.language||"en"),null}},8490:(e,t,r)=>{"use strict";r.d(t,{O:()=>u,g:()=>p});var n=r(114),o=r(5251);let s=e=>Math.floor(Math.random()*e),a=(e,t,r)=>Math.max(t,Math.min(r,e)),i=(e,t,r)=>"mul"===e?`m:${t}x${r}`:`d:${t}/${r}`;function l(){return Math.floor(Date.now()/1e3)}let u=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],d={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"buzz"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function c(e){let t=Math.max(5,e),r=s(t)+1,n=t>=5?s(t-4)+5:5;return{op:"mul",a:r,b:n,answer:r*n}}function m(e){let t=Math.max(5,e),r=s(t)+1,n=t>=5?s(t-4)+5:5;return{op:"div",a:r*n,b:r,answer:n}}let p=(0,n.Ue)()((0,o.tJ)((e,t)=>({...d,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let r;let n=t(),o=a(n.profile.maxFactor,2,10);if(n.recentMistakes.length){let[e,t]=n.recentMistakes.shift().split(":"),[o,s]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);r={op:"m"===e?"mul":"div",a:o,b:s}}else{let e=Object.values(n.mastery).find(e=>e.dueAt<=l());if(e){let[t,n]=e.key.split(":"),[o,s]=n.includes("x")?n.split("x").map(Number):n.split("/").map(Number);r={op:"m"===t?"mul":"div",a:o,b:s}}}let i=function(e,t,r){var n,o,a;let i=r?{op:r.op,a:r.a,b:r.b,answer:"mul"===r.op?r.a*r.b:Math.floor(r.a/r.b)}:.5>Math.random()?c(e):m(e),l=!r&&t&&.5>Math.random()?"mul"===t?m(e):c(e):i;return{id:`${l.op}:${l.a}:${l.b}:${Date.now()}`,op:l.op,a:l.a,b:l.b,answer:l.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let r=s(9)-4,n=Math.max(0,e+r+(0===r?s(3)+1:0));t.add(n)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}([...t])}(l.answer),game:(n=l.op,o=l.a,a=l.b,"mul"===n?a>4?"coins-multiply-groups":"multiply-groups":Math.floor(o/a)>4?"coins-division-dealer":"division-dealer"),input:.75>Math.random()?"mc":"wheel"}}(o,n.lastOp,r);e({current:i,startedAt:Date.now(),lastOp:i.op})},answer:r=>{let n=t(),o=n.current;if(!o)return;let s=r===o.answer;Date.now(),n.startedAt??Date.now();let d=i(o.op,o.a,o.b),c=n.mastery[d],m=function(e,t){let r=l();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:r+10,lastResult:t};let n=a(e.score+(t?1:-2),0,5),o=a(e.ease+(t?.08:-.2),1.2,2.6),s=t?Math.max(10,Math.round(e.intervalSec*o)):10;return{...e,score:n,ease:o,intervalSec:s,dueAt:r+s,lastResult:t}}(c&&{...c,key:d},s);m.key=d;let p=Math.min(10,Math.max(0,2*n.profile.streak)),f={...n.profile};if(f.totalAttempts+=1,s)for(let e of(f.totalCorrect+=1,f.streak+=1,f.bestStreak=Math.max(f.bestStreak,f.streak),f.points+=10+p,f.streak%4==0&&(f.maxFactor=a(f.maxFactor+1,2,10),f.level=Math.max(f.level,f.maxFactor)),u))f.points>=e.cost&&(f.unlocked[e.id]=!0);else{f.streak=0,f.maxFactor=a(f.maxFactor-1,2,10),f.level=Math.max(1,f.maxFactor);let t="mul"===o.op?`m:${o.a}x${o.b}`:`d:${o.a}/${o.b}`,r=n.recentMistakes.slice();r.includes(t)||r.push(t),e({recentMistakes:r})}e({profile:f,mastery:{...n.mastery,[m.key]:m},sessionAttempts:(n.sessionAttempts??0)+1,sessionCorrect:(n.sessionCorrect??0)+(s?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},5349:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s,viewport:()=>a});var n=r(9510);r(7272);let o=(0,r(8570).createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/ThemeEffect.tsx#ThemeEffect`),s={title:"MathTik",description:"MathTik â€” Multiply & Divide with fun mini-games"},a={width:"device-width",initialScale:1,maximumScale:1,minimumScale:1,userScalable:!1};function i({children:e}){return n.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,n.jsxs)("body",{children:[n.jsx(o,{}),n.jsx("div",{className:"min-h-screen bg-[var(--bg)]",children:e})]})})}},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return o},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function o(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return o},default:function(){return s}});let n=r(6399),o="next/dist/client/components/parallel-route-default.js";function s(){(0,n.notFound)()}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,807],()=>r(6016));module.exports=n})();