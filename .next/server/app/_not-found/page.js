(()=>{var e={};e.id=409,e.ids=[409],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6016:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>d,routeModule:()=>p,tree:()=>u}),r(7352),r(5866),r(5624);var n=r(3191),s=r(8716),o=r(7922),a=r.n(o),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let u=["",{children:["/_not-found",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,5624)),"/Users/ais/Projects/edugames/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=[],c="/_not-found/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/_not-found/page",pathname:"/_not-found",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},6440:(e,t,r)=>{Promise.resolve().then(r.bind(r,2195)),Promise.resolve().then(r.bind(r,6817))},4667:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2195:(e,t,r)=>{"use strict";r.d(t,{FabMenu:()=>i});var n=r(326),s=r(434),o=r(5047);r(7577);var a=r(8490);function i(){let e=["/menu","/settings"].includes((0,o.usePathname)());return((0,a.g)(e=>e.profile.theme),e)?null:n.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:n.jsx(s.default,{href:"/menu",className:"rounded-full w-14 h-14 grid place-items-center bg-brand text-white shadow-soft active:scale-95 select-none text-2xl",children:"☰"})})}},6817:(e,t,r)=>{"use strict";r.d(t,{ThemeEffect:()=>s}),r(7577);var n=r(8490);function s(){return(0,n.g)(e=>e.profile.theme),(0,n.g)(e=>e.profile.language||"en"),null}},8490:(e,t,r)=>{"use strict";r.d(t,{O:()=>u,g:()=>p});var n=r(114),s=r(5251);let o=e=>Math.floor(Math.random()*e),a=(e,t,r)=>Math.max(t,Math.min(r,e)),i=(e,t,r)=>"mul"===e?`m:${t}x${r}`:`d:${t}/${r}`;function l(){return Math.floor(Date.now()/1e3)}let u=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],d={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function c(e){let t=o(e)+1,r=o(e)+1;return{op:"mul",a:t,b:r,answer:t*r}}function m(e){let t=o(e)+1,r=o(e)+1;return{op:"div",a:t*r,b:t,answer:r}}let p=(0,n.Ue)()((0,s.tJ)((e,t)=>({...d,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let r;let n=t(),s=a(n.profile.maxFactor,2,10);if(n.recentMistakes.length){let[e,t]=n.recentMistakes.shift().split(":"),[s,o]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);r={op:"m"===e?"mul":"div",a:s,b:o}}else{let e=Object.values(n.mastery).find(e=>e.dueAt<=l());if(e){let[t,n]=e.key.split(":"),[s,o]=n.includes("x")?n.split("x").map(Number):n.split("/").map(Number);r={op:"m"===t?"mul":"div",a:s,b:o}}}let i=function(e,t,r){let n=r?{op:r.op,a:r.a,b:r.b,answer:"mul"===r.op?r.a*r.b:Math.floor(r.a/r.b)}:.5>Math.random()?c(e):m(e),s=!r&&t&&.5>Math.random()?"mul"===t?m(e):c(e):n;return{id:`${s.op}:${s.a}:${s.b}:${Date.now()}`,op:s.op,a:s.a,b:s.b,answer:s.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let r=o(9)-4,n=Math.max(0,e+r+(0===r?o(3)+1:0));t.add(n)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}([...t])}(s.answer),game:"mul"===s.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(s,n.lastOp,r);e({current:i,startedAt:Date.now(),lastOp:i.op})},answer:r=>{let n=t(),s=n.current;if(!s)return;let o=r===s.answer;Date.now(),n.startedAt??Date.now();let d=i(s.op,s.a,s.b),c=n.mastery[d],m=function(e,t){let r=l();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:r+10,lastResult:t};let n=a(e.score+(t?1:-2),0,5),s=a(e.ease+(t?.08:-.2),1.2,2.6),o=t?Math.max(10,Math.round(e.intervalSec*s)):10;return{...e,score:n,ease:s,intervalSec:o,dueAt:r+o,lastResult:t}}(c&&{...c,key:d},o);m.key=d;let p=Math.min(10,Math.max(0,2*n.profile.streak)),f={...n.profile};if(f.totalAttempts+=1,o)for(let e of(f.totalCorrect+=1,f.streak+=1,f.bestStreak=Math.max(f.bestStreak,f.streak),f.points+=10+p,f.streak%4==0&&(f.maxFactor=a(f.maxFactor+1,2,10),f.level=Math.max(f.level,f.maxFactor)),u))f.points>=e.cost&&(f.unlocked[e.id]=!0);else{f.streak=0,f.maxFactor=a(f.maxFactor-1,2,10),f.level=Math.max(1,f.maxFactor);let t="mul"===s.op?`m:${s.a}x${s.b}`:`d:${s.a}/${s.b}`,r=n.recentMistakes.slice();r.includes(t)||r.push(t),e({recentMistakes:r})}e({profile:f,mastery:{...n.mastery,[m.key]:m},sessionAttempts:(n.sessionAttempts??0)+1,sessionCorrect:(n.sessionCorrect??0)+(o?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},5624:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u,metadata:()=>i,viewport:()=>l});var n=r(9510);r(7272);var s=r(8570);let o=(0,s.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/FabMenu.tsx#FabMenu`),a=(0,s.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/ThemeEffect.tsx#ThemeEffect`),i={title:"MathTik",description:"MathTik — Multiply & Divide with fun mini-games"},l={width:"device-width",initialScale:1,maximumScale:1};function u({children:e}){return n.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,n.jsxs)("body",{children:[n.jsx(a,{}),n.jsx("div",{className:"min-h-screen bg-[var(--bg)]",children:e}),n.jsx(o,{})]})})}},6399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNotFoundError:function(){return s},notFound:function(){return n}});let r="NEXT_NOT_FOUND";function n(){let e=Error(r);throw e.digest=r,e}function s(e){return"object"==typeof e&&null!==e&&"digest"in e&&e.digest===r}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PARALLEL_ROUTE_DEFAULT_PATH:function(){return s},default:function(){return o}});let n=r(6399),s="next/dist/client/components/parallel-route-default.js";function o(){(0,n.notFound)()}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[948,429],()=>r(6016));module.exports=n})();