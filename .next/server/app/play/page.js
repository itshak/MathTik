(()=>{var e={};e.id=974,e.ids=[974],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>d,pages:()=>c,routeModule:()=>f,tree:()=>u}),n(1871),n(5624),n(5866);var r=n(3191),l=n(8716),i=n(7922),a=n.n(i),s=n(5231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);n.d(t,o);let u=["",{children:["play",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1871)),"/Users/ais/Projects/edugames/app/play/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,5624)),"/Users/ais/Projects/edugames/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/ais/Projects/edugames/app/play/page.tsx"],d="/play/page",h={require:n,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/play/page",pathname:"/play",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},6440:(e,t,n)=>{Promise.resolve().then(n.bind(n,2195)),Promise.resolve().then(n.bind(n,6817))},3222:(e,t,n)=>{Promise.resolve().then(n.bind(n,8013))},4667:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},8013:(e,t,n)=>{"use strict";let r;n.r(t),n.d(t,{default:()=>to});var l,i,a,s,o,u,c,d,h,f,p=n(326),g=n(7577),m=n.n(g),x=n(434),v=n(8490);let b=function(){for(var e,t,n=0,r="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=function e(t){var n,r,l="";if("string"==typeof t||"number"==typeof t)l+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=e(t[n]))&&(l&&(l+=" "),l+=r)}else for(r in t)t[r]&&(l&&(l+=" "),l+=r)}return l}(e))&&(r&&(r+=" "),r+=t);return r};function y({values:e,correct:t,onSelect:n,disabled:r,highlightCorrect:l}){return p.jsx("div",{className:b("grid grid-cols-2 sm:grid-cols-4 gap-3",r&&"opacity-60 pointer-events-none"),children:e.map(e=>{let r=e===t;return p.jsx("button",{onClick:()=>n(e),className:b("btn btn-secondary text-3xl py-6",l&&r&&"ring-4 ring-good animate-pump"),"data-correct":r?"true":"false",children:e},e)})})}function w({min:e=0,max:t=100,value:n,onPick:r,disabled:l}){let i=(0,g.useMemo)(()=>{let n=[];for(let r=e;r<=t;r++)n.push(r);return n},[e,t]);return p.jsx("div",{className:b("overflow-x-auto card p-3",l&&"opacity-60 pointer-events-none"),children:p.jsx("div",{className:"flex gap-3 w-max",children:i.map(e=>p.jsx("button",{onClick:()=>r(e),className:b("px-5 py-4 rounded-xl font-extrabold shadow-soft text-2xl",e===n?"bg-brand text-white":"bg-white border"),children:e},e))})})}var D=n(962);let j="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function M(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function S(e){return"nodeType"in e}function C(e){var t,n;return e?M(e)?e:S(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function N(e){let{Document:t}=C(e);return e instanceof t}function E(e){return!M(e)&&e instanceof C(e).HTMLElement}function k(e){return e instanceof C(e).SVGElement}function T(e){return e?M(e)?e.document:S(e)?N(e)?e:E(e)||k(e)?e.ownerDocument:document:document:document}let R=j?g.useLayoutEffect:g.useEffect;function P(e){let t=(0,g.useRef)(e);return R(()=>{t.current=e}),(0,g.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function A(e,t){void 0===t&&(t=[e]);let n=(0,g.useRef)(e);return R(()=>{n.current!==e&&(n.current=e)},t),n}function O(e,t){let n=(0,g.useRef)();return(0,g.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function L(e){let t=P(e),n=(0,g.useRef)(null),r=(0,g.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function z(e){let t=(0,g.useRef)();return(0,g.useEffect)(()=>{t.current=e},[e]),t.current}let F={};function $(e,t){return(0,g.useMemo)(()=>{if(t)return t;let n=null==F[e]?0:F[e]+1;return F[e]=n,e+"-"+n},[e,t])}function B(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return r.reduce((t,n)=>{for(let[r,l]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*l)}return t},{...t})}}let U=B(1),I=B(-1);function _(e){if(!e)return!1;let{KeyboardEvent:t}=C(e.target);return t&&e instanceof t}function W(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=C(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let q=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[q.Translate.toString(e),q.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Y="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",K={display:"none"};function X(e){let{id:t,value:n}=e;return m().createElement("div",{id:t,style:K},n)}function G(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return m().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}let H=(0,g.createContext)(null),V={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},J={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Q(e){let{announcements:t=J,container:n,hiddenTextDescribedById:r,screenReaderInstructions:l=V}=e,{announce:i,announcement:a}=function(){let[e,t]=(0,g.useState)("");return{announce:(0,g.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),s=$("DndLiveRegion"),[o,u]=(0,g.useState)(!1);if((0,g.useEffect)(()=>{u(!0)},[]),function(e){let t=(0,g.useContext)(H);(0,g.useEffect)(()=>{if(!t)throw Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,g.useMemo)(()=>({onDragStart(e){let{active:n}=e;i(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&i(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;i(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;i(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;i(t.onDragCancel({active:n,over:r}))}}),[i,t])),!o)return null;let c=m().createElement(m().Fragment,null,m().createElement(X,{id:r,value:l.draggable}),m().createElement(G,{id:s,announcement:a}));return n?(0,D.createPortal)(c,n):c}function Z(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(l||(l={}));let ee=Object.freeze({x:0,y:0});function et(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}let en=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,l=[];for(let e of r){let{id:r}=e,i=n.get(r);if(i){let n=function(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),l=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height);if(r<l&&n<i){let a=t.width*t.height,s=e.width*e.height,o=(l-r)*(i-n);return Number((o/(a+s-o)).toFixed(4))}return 0}(i,t);n>0&&l.push({id:r,data:{droppableContainer:e,value:n}})}}return l.sort(et)};function er(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ee}let el=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),l=1;l<n;l++)r[l-1]=arguments[l];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}(1),ei={ignoreTransform:!1};function ea(e,t){void 0===t&&(t=ei);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=C(e).getComputedStyle(e);t&&(n=function(e,t,n){let r=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;let{scaleX:l,scaleY:i,x:a,y:s}=r,o=e.left-a-(1-l)*parseFloat(n),u=e.top-s-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),c=l?e.width/l:e.width,d=i?e.height/i:e.height;return{width:c,height:d,top:u,right:o+c,bottom:u+d,left:o}}(n,t,r))}let{top:r,left:l,width:i,height:a,bottom:s,right:o}=n;return{top:r,left:l,width:i,height:a,bottom:s,right:o}}function es(e){return ea(e,{ignoreTransform:!0})}function eo(e,t){let n=[];return e?function r(l){var i;if(null!=t&&n.length>=t||!l)return n;if(N(l)&&null!=l.scrollingElement&&!n.includes(l.scrollingElement))return n.push(l.scrollingElement),n;if(!E(l)||k(l)||n.includes(l))return n;let a=C(e).getComputedStyle(l);return(l!==e&&function(e,t){void 0===t&&(t=C(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&n.test(r)})}(l,a)&&n.push(l),void 0===(i=a)&&(i=C(l).getComputedStyle(l)),"fixed"===i.position)?n:r(l.parentNode)}(e):n}function eu(e){let[t]=eo(e,1);return null!=t?t:null}function ec(e){return j&&e?M(e)?e:S(e)?N(e)||e===T(e).scrollingElement?window:E(e)?e:null:null:null}function ed(e){return M(e)?e.scrollX:e.scrollLeft}function eh(e){return M(e)?e.scrollY:e.scrollTop}function ef(e){return{x:ed(e),y:eh(e)}}function ep(e){return!!j&&!!e&&e===document.scrollingElement}function eg(e){let t={x:0,y:0},n=ep(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},l=e.scrollTop<=t.y;return{isTop:l,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(i||(i={}));let em={x:.2,y:.2};function ex(e){return e.reduce((e,t)=>U(e,ef(t)),ee)}let ev=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ed(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eh(t),0)}]];class eb{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=eo(t),r=ex(n);for(let[t,l,i]of(this.rect={...e},this.width=e.width,this.height=e.height,ev))for(let e of l)Object.defineProperty(this,e,{get:()=>{let l=i(n),a=r[t]-l;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ey{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function ew(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function eD(e){e.preventDefault()}function ej(e){e.stopPropagation()}(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(a||(a={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(s||(s={}));let eM={start:[s.Space,s.Enter],cancel:[s.Esc],end:[s.Space,s.Enter,s.Tab]},eS=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case s.Right:return{...n,x:n.x+25};case s.Left:return{...n,x:n.x-25};case s.Down:return{...n,y:n.y+25};case s.Up:return{...n,y:n.y-25}}};class eC{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new ey(T(t)),this.windowListeners=new ey(C(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(a.Resize,this.handleCancel),this.windowListeners.add(a.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(a.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=ea),!e)return;let{top:n,left:r,bottom:l,right:i}=t(e);eu(e)&&(l<=0||i<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(ee)}handleKeyDown(e){if(_(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:l=eM,coordinateGetter:i=eS,scrollBehavior:a="smooth"}=r,{code:o}=e;if(l.end.includes(o)){this.handleEnd(e);return}if(l.cancel.includes(o)){this.handleCancel(e);return}let{collisionRect:u}=n.current,c=u?{x:u.left,y:u.top}:ee;this.referenceCoordinates||(this.referenceCoordinates=c);let d=i(e,{active:t,context:n.current,currentCoordinates:c});if(d){let t=I(d,c),r={x:0,y:0},{scrollableAncestors:l}=n.current;for(let n of l){let l=e.code,{isTop:i,isRight:o,isLeft:u,isBottom:c,maxScroll:h,minScroll:f}=eg(n),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:l}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:l,width:e.clientWidth,height:e.clientHeight}}(n),g={x:Math.min(l===s.Right?p.right-p.width/2:p.right,Math.max(l===s.Right?p.left:p.left+p.width/2,d.x)),y:Math.min(l===s.Down?p.bottom-p.height/2:p.bottom,Math.max(l===s.Down?p.top:p.top+p.height/2,d.y))},m=l===s.Right&&!o||l===s.Left&&!u,x=l===s.Down&&!c||l===s.Up&&!i;if(m&&g.x!==d.x){let e=n.scrollLeft+t.x,i=l===s.Right&&e<=h.x||l===s.Left&&e>=f.x;if(i&&!t.y){n.scrollTo({left:e,behavior:a});return}i?r.x=n.scrollLeft-e:r.x=l===s.Right?n.scrollLeft-h.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(x&&g.y!==d.y){let e=n.scrollTop+t.y,i=l===s.Down&&e<=h.y||l===s.Up&&e>=f.y;if(i&&!t.x){n.scrollTo({top:e,behavior:a});return}i?r.y=n.scrollTop-e:r.y=l===s.Down?n.scrollTop-h.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,U(I(d,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eN(e){return!!(e&&"distance"in e)}function eE(e){return!!(e&&"delay"in e)}eC.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=eM,onActivation:l}=t,{active:i}=n,{code:a}=e.nativeEvent;if(r.start.includes(a)){let t=i.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==l||l({event:e.nativeEvent}),!0)}return!1}}];class ek{constructor(e,t,n){var r;void 0===n&&(n=function(e){let{EventTarget:t}=C(e);return e instanceof t?e:T(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:l}=e,{target:i}=l;this.props=e,this.events=t,this.document=T(i),this.documentListeners=new ey(this.document),this.listeners=new ey(n),this.windowListeners=new ey(C(i)),this.initialCoordinates=null!=(r=W(l))?r:ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(a.Resize,this.handleCancel),this.windowListeners.add(a.DragStart,eD),this.windowListeners.add(a.VisibilityChange,this.handleCancel),this.windowListeners.add(a.ContextMenu,eD),this.documentListeners.add(a.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(eE(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eN(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(a.Click,ej,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(a.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:l}=this,{onMove:i,options:{activationConstraint:a}}=l;if(!r)return;let s=null!=(t=W(e))?t:ee,o=I(r,s);if(!n&&a){if(eN(a)){if(null!=a.tolerance&&ew(o,a.tolerance))return this.handleCancel();if(ew(o,a.distance))return this.handleStart()}return eE(a)&&ew(o,a.tolerance)?this.handleCancel():void this.handlePending(a,o)}e.cancelable&&e.preventDefault(),i(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===s.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eT={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eR extends ek{constructor(e){let{event:t}=e;super(e,eT,T(t.target))}}eR.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];let eP={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(o||(o={}));class eA extends ek{constructor(e){super(e,eP,T(e.event.target))}}eA.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==o.RightClick&&(null==r||r({event:n}),!0)}}];let eO={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class eL extends ek{constructor(e){super(e,eO)}static setup(){return window.addEventListener(eO.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eO.move.name,e)};function e(){}}}eL.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t,{touches:l}=n;return!(l.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(u||(u={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(c||(c={}));let ez={x:{[i.Backward]:!1,[i.Forward]:!1},y:{[i.Backward]:!1,[i.Forward]:!1}};(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(d||(d={})),(h||(h={})).Optimized="optimized";let eF=new Map;function e$(e,t){return O(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function eB(e){let{callback:t,disabled:n}=e,r=P(t),l=(0,g.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,g.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}function eU(e){return new eb(ea(e),e)}function eI(e,t,n){void 0===t&&(t=eU);let[r,l]=(0,g.useState)(null);function i(){l(r=>{if(!e)return null;if(!1===e.isConnected){var l;return null!=(l=null!=r?r:n)?l:null}let i=t(e);return JSON.stringify(r)===JSON.stringify(i)?r:i})}let a=function(e){let{callback:t,disabled:n}=e,r=P(t),l=(0,g.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,g.useEffect)(()=>()=>null==l?void 0:l.disconnect(),[l]),l}({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){i();break}}}}),s=eB({callback:i});return R(()=>{i(),e?(null==s||s.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==a||a.disconnect())},[e]),r}let e_=[];function eW(e,t){void 0===t&&(t=[]);let n=(0,g.useRef)(null);return(0,g.useEffect)(()=>{n.current=null},t),(0,g.useEffect)(()=>{let t=e!==ee;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?I(e,n.current):ee}function eq(e){return(0,g.useMemo)(()=>e?function(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}let eY=[],eK=[{sensor:eR,options:{}},{sensor:eC,options:{}}],eX={current:{}},eG={draggable:{measure:es},droppable:{measure:es,strategy:d.WhileDragging,frequency:h.Optimized},dragOverlay:{measure:ea}};class eH extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let eV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eH,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Z},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eG,measureDroppableContainers:Z,windowRect:null,measuringScheduled:!1},eJ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Z,draggableNodes:new Map,over:null,measureDroppableContainers:Z},eQ=(0,g.createContext)(eJ),eZ=(0,g.createContext)(eV);function e0(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eH}}}function e1(e,t){switch(t.type){case l.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case l.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case l.DragEnd:case l.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case l.RegisterDroppable:{let{element:n}=t,{id:r}=n,l=new eH(e.droppable.containers);return l.set(r,n),{...e,droppable:{...e.droppable,containers:l}}}case l.SetDroppableDisabled:{let{id:n,key:r,disabled:l}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;let a=new eH(e.droppable.containers);return a.set(n,{...i,disabled:l}),{...e,droppable:{...e.droppable,containers:a}}}case l.UnregisterDroppable:{let{id:n,key:r}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;let i=new eH(e.droppable.containers);return i.delete(n),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function e2(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:l}=(0,g.useContext)(eQ),i=z(r),a=z(null==n?void 0:n.id);return(0,g.useEffect)(()=>{if(!t&&!r&&i&&null!=a){if(!_(i)||document.activeElement===i.target)return;let e=l.get(a);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=e.matches(Y)?e:e.querySelector(Y);if(t){t.focus();break}}})}},[r,t,l,a,i]),null}let e3=(0,g.createContext)({...ee,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(f||(f={}));let e4=(0,g.memo)(function(e){var t,n,r,a,s,o;let{id:h,accessibility:p,autoScroll:x=!0,children:v,sensors:b=eK,collisionDetection:y=en,measuring:w,modifiers:M,...S}=e,[N,k]=(0,g.useReducer)(e1,void 0,e0),[T,P]=function(){let[e]=(0,g.useState)(()=>new Set),t=(0,g.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,g.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[F,B]=(0,g.useState)(f.Uninitialized),I=F===f.Initialized,{draggable:{active:_,nodes:q,translate:Y},droppable:{containers:K}}=N,X=null!=_?q.get(_):null,G=(0,g.useRef)({initial:null,translated:null}),V=(0,g.useMemo)(()=>{var e;return null!=_?{id:_,data:null!=(e=null==X?void 0:X.data)?e:eX,rect:G}:null},[_,X]),J=(0,g.useRef)(null),[Z,et]=(0,g.useState)(null),[ei,es]=(0,g.useState)(null),ed=A(S,Object.values(S)),eh=$("DndDescribedBy",h),ev=(0,g.useMemo)(()=>K.getEnabled(),[K]),ey=(0,g.useMemo)(()=>({draggable:{...eG.draggable,...null==w?void 0:w.draggable},droppable:{...eG.droppable,...null==w?void 0:w.droppable},dragOverlay:{...eG.dragOverlay,...null==w?void 0:w.dragOverlay}}),[null==w?void 0:w.draggable,null==w?void 0:w.droppable,null==w?void 0:w.dragOverlay]),{droppableRects:ew,measureDroppableContainers:eD,measuringScheduled:ej}=function(e,t){let{dragging:n,dependencies:r,config:l}=t,[i,a]=(0,g.useState)(null),{frequency:s,measure:o,strategy:u}=l,c=(0,g.useRef)(e),h=function(){switch(u){case d.Always:return!1;case d.BeforeDragging:return n;default:return!n}}(),f=A(h),p=(0,g.useCallback)(function(e){void 0===e&&(e=[]),f.current||a(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[f]),m=(0,g.useRef)(null),x=O(t=>{if(h&&!n)return eF;if(!t||t===eF||c.current!==e||null!=i){let t=new Map;for(let n of e){if(!n)continue;if(i&&i.length>0&&!i.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new eb(o(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,i,n,h,o]);return(0,g.useEffect)(()=>{c.current=e},[e]),(0,g.useEffect)(()=>{h||p()},[n,h]),(0,g.useEffect)(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),(0,g.useEffect)(()=>{h||"number"!=typeof s||null!==m.current||(m.current=setTimeout(()=>{p(),m.current=null},s))},[s,h,p,...r]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:null!=i}}(ev,{dragging:I,dependencies:[Y.x,Y.y],config:ey.droppable}),eM=function(e,t){let n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return O(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(q,_),eS=(0,g.useMemo)(()=>ei?W(ei):null,[ei]),eC=function(){let e=(null==Z?void 0:Z.autoScrollEnabled)===!1,t="object"==typeof x?!1===x.enabled:!1===x,n=I&&!e&&!t;return"object"==typeof x?{...x,enabled:n}:{enabled:n}}(),eN=e$(eM,ey.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:l=!0}=e,i=(0,g.useRef)(!1),{x:a,y:s}="boolean"==typeof l?{x:l,y:l}:l;R(()=>{if(!a&&!s||!t){i.current=!1;return}if(i.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let l=er(n(e),r);if(a||(l.x=0),s||(l.y=0),i.current=!0,Math.abs(l.x)>0||Math.abs(l.y)>0){let t=eu(e);t&&t.scrollBy({top:l.y,left:l.x})}},[t,a,s,r,n])}({activeNode:null!=_?q.get(_):null,config:eC.layoutShiftCompensation,initialRect:eN,measure:ey.draggable.measure});let eE=eI(eM,ey.draggable.measure,eN),ek=eI(eM?eM.parentElement:null),eT=(0,g.useRef)({activatorEvent:null,active:null,activeNode:eM,collisionRect:null,collisions:null,droppableRects:ew,draggableNodes:q,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eR=K.getNodeFor(null==(t=eT.current.over)?void 0:t.id),eP=function(e){let{measure:t}=e,[n,r]=(0,g.useState)(null),l=eB({callback:(0,g.useCallback)(e=>{for(let{target:n}of e)if(E(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[i,a]=L((0,g.useCallback)(e=>{let n=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return E(t)?t:e}(e);null==l||l.disconnect(),n&&(null==l||l.observe(n)),r(n?t(n):null)},[t,l]));return(0,g.useMemo)(()=>({nodeRef:i,rect:n,setRef:a}),[n,i,a])}({measure:ey.dragOverlay.measure}),eA=null!=(n=eP.nodeRef.current)?n:eM,eO=I?null!=(r=eP.rect)?r:eE:null,eL=!!(eP.nodeRef.current&&eP.rect),eU=function(e){let t=e$(e);return er(e,t)}(eL?null:eE),eH=eq(eA?C(eA):null),eV=function(e){let t=(0,g.useRef)(e),n=O(n=>e?n&&n!==e_&&e&&t.current&&e.parentNode===t.current.parentNode?n:eo(e):e_,[e]);return(0,g.useEffect)(()=>{t.current=e},[e]),n}(I?null!=eR?eR:eM:null),eJ=function(e,t){void 0===t&&(t=ea);let[n]=e,r=eq(n?C(n):null),[l,i]=(0,g.useState)(eY);function a(){i(()=>e.length?e.map(e=>ep(e)?r:new eb(t(e),e)):eY)}let s=eB({callback:a});return R(()=>{null==s||s.disconnect(),a(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),l}(eV),e4=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}(M,{transform:{x:Y.x-eU.x,y:Y.y-eU.y,scaleX:1,scaleY:1},activatorEvent:ei,active:V,activeNodeRect:eE,containerNodeRect:ek,draggingNodeRect:eO,over:eT.current.over,overlayNodeRect:eP.rect,scrollableAncestors:eV,scrollableAncestorRects:eJ,windowRect:eH}),e5=eS?U(eS,Y):null,e8=function(e){let[t,n]=(0,g.useState)(null),r=(0,g.useRef)(e),l=(0,g.useCallback)(e=>{let t=ec(e.target);t&&n(e=>e?(e.set(t,ef(t)),new Map(e)):null)},[]);return(0,g.useEffect)(()=>{let t=r.current;if(e!==t){i(t);let a=e.map(e=>{let t=ec(e);return t?(t.addEventListener("scroll",l,{passive:!0}),[t,ef(t)]):null}).filter(e=>null!=e);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(t)};function i(e){e.forEach(e=>{let t=ec(e);null==t||t.removeEventListener("scroll",l)})}},[l,e]),(0,g.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>U(e,t),ee):ex(e):ee,[e,t])}(eV),e6=eW(e8),e7=eW(e8,[eE]),e9=U(e4,e6),te=eO?el(eO,e4):null,tt=V&&te?y({active:V,collisionRect:te,droppableRects:ew,droppableContainers:ev,pointerCoordinates:e5}):null,tn=function(e,t){if(!e||0===e.length)return null;let[n]=e;return n.id}(tt,0),[tr,tl]=(0,g.useState)(null),ti=(s=eL?e4:U(e4,e7),o=null!=(a=null==tr?void 0:tr.rect)?a:null,{...s,scaleX:o&&eE?o.width/eE.width:1,scaleY:o&&eE?o.height/eE.height:1}),ta=(0,g.useRef)(null),ts=(0,g.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==J.current)return;let i=q.get(J.current);if(!i)return;let a=e.nativeEvent,s=new n({active:J.current,activeNode:i,event:a,options:r,context:eT,onAbort(e){if(!q.get(e))return;let{onDragAbort:t}=ed.current,n={id:e};null==t||t(n),T({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!q.get(e))return;let{onDragPending:l}=ed.current,i={id:e,constraint:t,initialCoordinates:n,offset:r};null==l||l(i),T({type:"onDragPending",event:i})},onStart(e){let t=J.current;if(null==t)return;let n=q.get(t);if(!n)return;let{onDragStart:r}=ed.current,i={activatorEvent:a,active:{id:t,data:n.data,rect:G}};(0,D.unstable_batchedUpdates)(()=>{null==r||r(i),B(f.Initializing),k({type:l.DragStart,initialCoordinates:e,active:t}),T({type:"onDragStart",event:i}),et(ta.current),es(a)})},onMove(e){k({type:l.DragMove,coordinates:e})},onEnd:o(l.DragEnd),onCancel:o(l.DragCancel)});function o(e){return async function(){let{active:t,collisions:n,over:r,scrollAdjustedTranslate:i}=eT.current,s=null;if(t&&i){let{cancelDrop:o}=ed.current;s={activatorEvent:a,active:t,collisions:n,delta:i,over:r},e===l.DragEnd&&"function"==typeof o&&await Promise.resolve(o(s))&&(e=l.DragCancel)}J.current=null,(0,D.unstable_batchedUpdates)(()=>{k({type:e}),B(f.Uninitialized),tl(null),et(null),es(null),ta.current=null;let t=e===l.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=ed.current[t];null==e||e(s),T({type:t,event:s})}})}}ta.current=s},[q]),to=(0,g.useCallback)((e,t)=>(n,r)=>{let l=n.nativeEvent,i=q.get(r);null!==J.current||!i||l.dndKit||l.defaultPrevented||!0!==e(n,t.options,{active:i})||(l.dndKit={capturedBy:t.sensor},J.current=r,ts(n,t))},[q,ts]),tu=(0,g.useMemo)(()=>b.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:to(e.handler,t)}))]},[]),[b,to]);(0,g.useEffect)(()=>{if(!j)return;let e=b.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},b.map(e=>{let{sensor:t}=e;return t})),R(()=>{eE&&F===f.Initializing&&B(f.Initialized)},[eE,F]),(0,g.useEffect)(()=>{let{onDragMove:e}=ed.current,{active:t,activatorEvent:n,collisions:r,over:l}=eT.current;if(!t||!n)return;let i={active:t,activatorEvent:n,collisions:r,delta:{x:e9.x,y:e9.y},over:l};(0,D.unstable_batchedUpdates)(()=>{null==e||e(i),T({type:"onDragMove",event:i})})},[e9.x,e9.y]),(0,g.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:l}=eT.current;if(!e||null==J.current||!t||!l)return;let{onDragOver:i}=ed.current,a=r.get(tn),s=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,o={active:e,activatorEvent:t,collisions:n,delta:{x:l.x,y:l.y},over:s};(0,D.unstable_batchedUpdates)(()=>{tl(s),null==i||i(o),T({type:"onDragOver",event:o})})},[tn]),R(()=>{eT.current={activatorEvent:ei,active:V,activeNode:eM,collisionRect:te,collisions:tt,droppableRects:ew,draggableNodes:q,draggingNode:eA,draggingNodeRect:eO,droppableContainers:K,over:tr,scrollableAncestors:eV,scrollAdjustedTranslate:e9},G.current={initial:eO,translated:te}},[V,eM,tt,te,q,eA,eO,ew,K,tr,eV,e9]),function(e){let{acceleration:t,activator:n=u.Pointer,canScroll:r,draggingRect:l,enabled:a,interval:s=5,order:o=c.TreeOrder,pointerCoordinates:d,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:m}=e,x=function(e){let{delta:t,disabled:n}=e,r=z(t);return O(e=>{if(n||!r||!e)return ez;let l={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[i.Backward]:e.x[i.Backward]||-1===l.x,[i.Forward]:e.x[i.Forward]||1===l.x},y:{[i.Backward]:e.y[i.Backward]||-1===l.y,[i.Forward]:e.y[i.Forward]||1===l.y}}},[n,t,r])}({delta:p,disabled:!a}),[v,b]=function(){let e=(0,g.useRef)(null);return[(0,g.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,g.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=(0,g.useRef)({x:0,y:0}),w=(0,g.useRef)({x:0,y:0}),D=(0,g.useMemo)(()=>{switch(n){case u.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case u.DraggableRect:return l}},[n,l,d]),j=(0,g.useRef)(null),M=(0,g.useCallback)(()=>{let e=j.current;if(!e)return;let t=y.current.x*w.current.x,n=y.current.y*w.current.y;e.scrollBy(t,n)},[]),S=(0,g.useMemo)(()=>o===c.TreeOrder?[...h].reverse():h,[o,h]);(0,g.useEffect)(()=>{if(!a||!h.length||!D){b();return}for(let e of S){if((null==r?void 0:r(e))===!1)continue;let n=f[h.indexOf(e)];if(!n)continue;let{direction:l,speed:a}=function(e,t,n,r,l){let{top:a,left:s,right:o,bottom:u}=n;void 0===r&&(r=10),void 0===l&&(l=em);let{isTop:c,isBottom:d,isLeft:h,isRight:f}=eg(e),p={x:0,y:0},g={x:0,y:0},m={height:t.height*l.y,width:t.width*l.x};return!c&&a<=t.top+m.height?(p.y=i.Backward,g.y=r*Math.abs((t.top+m.height-a)/m.height)):!d&&u>=t.bottom-m.height&&(p.y=i.Forward,g.y=r*Math.abs((t.bottom-m.height-u)/m.height)),!f&&o>=t.right-m.width?(p.x=i.Forward,g.x=r*Math.abs((t.right-m.width-o)/m.width)):!h&&s<=t.left+m.width&&(p.x=i.Backward,g.x=r*Math.abs((t.left+m.width-s)/m.width)),{direction:p,speed:g}}(e,n,D,t,m);for(let e of["x","y"])x[e][l[e]]||(a[e]=0,l[e]=0);if(a.x>0||a.y>0){b(),j.current=e,v(M,s),y.current=a,w.current=l;return}}y.current={x:0,y:0},w.current={x:0,y:0},b()},[t,M,r,b,a,s,JSON.stringify(D),JSON.stringify(x),v,h,S,f,JSON.stringify(m)])}({...eC,delta:Y,draggingRect:te,pointerCoordinates:e5,scrollableAncestors:eV,scrollableAncestorRects:eJ});let tc=(0,g.useMemo)(()=>({active:V,activeNode:eM,activeNodeRect:eE,activatorEvent:ei,collisions:tt,containerNodeRect:ek,dragOverlay:eP,draggableNodes:q,droppableContainers:K,droppableRects:ew,over:tr,measureDroppableContainers:eD,scrollableAncestors:eV,scrollableAncestorRects:eJ,measuringConfiguration:ey,measuringScheduled:ej,windowRect:eH}),[V,eM,eE,ei,tt,ek,eP,q,K,ew,tr,eD,eV,eJ,ey,ej,eH]),td=(0,g.useMemo)(()=>({activatorEvent:ei,activators:tu,active:V,activeNodeRect:eE,ariaDescribedById:{draggable:eh},dispatch:k,draggableNodes:q,over:tr,measureDroppableContainers:eD}),[ei,tu,V,eE,k,eh,q,tr,eD]);return m().createElement(H.Provider,{value:P},m().createElement(eQ.Provider,{value:td},m().createElement(eZ.Provider,{value:tc},m().createElement(e3.Provider,{value:ti},v)),m().createElement(e2,{disabled:(null==p?void 0:p.restoreFocus)===!1})),m().createElement(Q,{...p,hiddenTextDescribedById:eh}))}),e5=(0,g.createContext)(null),e8="button",e6={timeout:25};function e7({size:e=28}){return(0,p.jsxs)("svg",{width:e,height:e,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("defs",{children:(0,p.jsxs)("linearGradient",{id:"g",x1:"0",y1:"0",x2:"1",y2:"1",children:[p.jsx("stop",{offset:"0%",stopColor:"#ff8a8a"}),p.jsx("stop",{offset:"100%",stopColor:"#ff3b3b"})]})}),p.jsx("path",{d:"M44 22c4 1 8 5 8 12 0 10-8 18-20 18S12 44 12 34c0-7 4-11 8-12 3-1 6 0 8 1 2 1 4 1 6 0 2-1 5-2 8-1z",fill:"url(#g)"}),p.jsx("path",{d:"M34 18c-2-6 4-9 8-8-2 5-5 7-8 8z",fill:"#6b7280"}),p.jsx("path",{d:"M34 14c0-2 2-4 4-4",stroke:"#15803d",strokeWidth:"4",strokeLinecap:"round"})]})}function e9({size:e=28,skin:t="#f9c9b6",shirt:n="#93c5fd"}){return(0,p.jsxs)("svg",{width:e,height:e,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("circle",{cx:"32",cy:"22",r:"12",fill:t}),p.jsx("rect",{x:"16",y:"36",width:"32",height:"20",rx:"10",fill:n}),p.jsx("circle",{cx:"26",cy:"24",r:"2",fill:"#111827"}),p.jsx("circle",{cx:"38",cy:"24",r:"2",fill:"#111827"}),p.jsx("path",{d:"M24 30c4 3 12 3 16 0",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"})]})}r={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:n}=e,l={},{styles:i,className:a}=r;if(null!=i&&i.active)for(let[e,n]of Object.entries(i.active))void 0!==n&&(l[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,n));if(null!=i&&i.dragOverlay)for(let[e,t]of Object.entries(i.dragOverlay))void 0!==t&&n.node.style.setProperty(e,t);return null!=a&&a.active&&t.node.classList.add(a.active),null!=a&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(let[e,n]of Object.entries(l))t.node.style.setProperty(e,n);null!=a&&a.active&&t.node.classList.remove(a.active)}};class te{setEnabled(e){this.enabled=e}ensure(){}tone(e,t=.12,n="sine",r=.2){if(!this.enabled||(this.ensure(),!this.ctx))return;let l=this.ctx.createOscillator(),i=this.ctx.createGain();l.type=n,l.frequency.value=e,i.gain.value=r,l.connect(i).connect(this.ctx.destination),l.start(),i.gain.exponentialRampToValueAtTime(1e-4,this.ctx.currentTime+t),l.stop(this.ctx.currentTime+t)}success(){this.tone(660,.08,"triangle",.25),setTimeout(()=>this.tone(880,.1,"triangle",.22),60)}error(){this.tone(200,.12,"sawtooth",.2),setTimeout(()=>this.tone(150,.14,"sawtooth",.18),60)}drag(){this.tone(500,.05,"sine",.05)}drop(){this.tone(420,.06,"square",.08)}levelUp(){this.tone(523,.08,"triangle",.2),setTimeout(()=>this.tone(659,.08,"triangle",.18),70),setTimeout(()=>this.tone(783,.12,"triangle",.16),140)}constructor(){this.enabled=!0}}let tt=new te;function tn({id:e,children:t}){let{attributes:n,listeners:r,setNodeRef:l,transform:i,isDragging:a}=function(e){let{id:t,data:n,disabled:r=!1,attributes:l}=e,i=$("Draggable"),{activators:a,activatorEvent:s,active:o,activeNodeRect:u,ariaDescribedById:c,draggableNodes:d,over:h}=(0,g.useContext)(eQ),{role:f=e8,roleDescription:p="draggable",tabIndex:m=0}=null!=l?l:{},x=(null==o?void 0:o.id)===t,v=(0,g.useContext)(x?e3:e5),[b,y]=L(),[w,D]=L(),j=(0,g.useMemo)(()=>a.reduce((e,n)=>{let{eventName:r,handler:l}=n;return e[r]=e=>{l(e,t)},e},{}),[a,t]),M=A(n);return R(()=>(d.set(t,{id:t,key:i,node:b,activatorNode:w,data:M}),()=>{let e=d.get(t);e&&e.key===i&&d.delete(t)}),[d,t]),{active:o,activatorEvent:s,activeNodeRect:u,attributes:(0,g.useMemo)(()=>({role:f,tabIndex:m,"aria-disabled":r,"aria-pressed":!!x&&f===e8||void 0,"aria-roledescription":p,"aria-describedby":c.draggable}),[r,f,m,x,p,c.draggable]),isDragging:x,listeners:r?void 0:j,node:b,over:h,setNodeRef:y,setActivatorNodeRef:D,transform:v}}({id:String(e)}),s=i?{transform:`translate3d(${i.x}px, ${i.y}px, 0)`}:{};return p.jsx("div",{ref:l,...r,...n,style:s,className:b(a&&"opacity-70"),children:t})}function tr({id:e,className:t,style:n,children:r}){let{isOver:i,setNodeRef:a}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e,a=$("Droppable"),{active:s,dispatch:o,over:u,measureDroppableContainers:c}=(0,g.useContext)(eQ),d=(0,g.useRef)({disabled:n}),h=(0,g.useRef)(!1),f=(0,g.useRef)(null),p=(0,g.useRef)(null),{disabled:m,updateMeasurementsFor:x,timeout:v}={...e6,...i},b=A(null!=x?x:r),y=eB({callback:(0,g.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(b.current)?b.current:[b.current]),p.current=null},v)},[v]),disabled:m||!s}),[w,D]=L((0,g.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))},[y])),j=A(t);return(0,g.useEffect)(()=>{y&&w.current&&(y.disconnect(),h.current=!1,y.observe(w.current))},[w,y]),(0,g.useEffect)(()=>(o({type:l.RegisterDroppable,element:{id:r,key:a,disabled:n,node:w,rect:f,data:j}}),()=>o({type:l.UnregisterDroppable,key:a,id:r})),[r]),(0,g.useEffect)(()=>{n!==d.current.disabled&&(o({type:l.SetDroppableDisabled,id:r,key:a,disabled:n}),d.current.disabled=n)},[r,a,n,o]),{active:s,rect:f,isOver:(null==u?void 0:u.id)===r,node:w,over:u,setNodeRef:D}}({id:e});return p.jsx("div",{ref:a,className:b(t,i&&"ring-2 ring-brand/50"),style:n,children:r})}var tl=n(3933);function ti({a:e,b:t,mistake:n,onReady:r,mistakes:l}){let i=(0,tl.Q)(),[a,s]=(0,g.useState)([]),[o,u]=(0,g.useState)(()=>Array.from({length:e},(e,n)=>Array.from({length:t},(e,r)=>n*t+r))),[c,d]=(0,g.useState)(!1),[h,f]=(0,g.useState)(0),[m,x]=(0,g.useState)(null),v=Math.min(10,t),b=(0,g.useMemo)(()=>v>=10?32:v>=8?36:v>=6?44:56,[v]),y=Math.max(20,Math.round(.66*b));return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){let n=Number(e.active.id),r=e.over?.id;if(!r)return;tt.drop();let l=o.findIndex(e=>e.includes(n)),i=-1===l;if("pool"===r){i||(u(e=>e.map((e,t)=>t===l?e.filter(e=>e!==n):e)),s(e=>[...e,n]));return}if(r.startsWith("group-")){let e=parseInt(r.split("-")[1]);if(isNaN(e)||o[e].length>=t)return;if(i)s(e=>e.filter(e=>e!==n)),u(t=>t.map((t,r)=>r===e?[...t,n]:t));else{if(l===e)return;u(t=>t.map((t,r)=>r===l?t.filter(e=>e!==n):r===e?[...t,n]:t))}}},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[p.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-3 gap-3 ${c?"pointer-events-none opacity-95":""}`,children:o.map((e,n)=>(0,p.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-2",children:[(0,p.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:[p.jsx(e9,{size:36})," ",p.jsx("span",{className:"text-base",children:"\xd7"})," ",p.jsx(e7,{size:y})]}),(0,p.jsxs)(tr,{id:`group-${n}`,className:"mt-2 grid gap-2 min-h-[120px]",style:{gridTemplateColumns:`repeat(${v}, minmax(0,1fr))`},children:[e.map(e=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${m===e?"animate-pop":""}`,style:{width:b,height:b},children:p.jsx(e7,{size:y})})},e)),Array.from({length:Math.max(0,t-e.length)}).map((e,t)=>p.jsx("div",{className:"rounded-xl border border-gray-200",style:{width:b,height:b}},t))]}),(0,p.jsxs)("div",{className:"text-[10px] mt-1 text-gray-400 font-bold",children:[e.length,"/",t]})]},n))}),(0,p.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[p.jsx("span",{children:"\uD83E\uDDFA"}),p.jsx("span",{children:i("pool")}),(c||"number"==typeof l&&l>=1)&&(0,p.jsxs)("span",{className:"ml-auto text-[11px] text-gray-400 flex items-center gap-1",children:[p.jsx("span",{className:"animate-pointer",children:"\uD83D\uDC49"}),i("countTogether")," ",h,"/",e*t]})]}),p.jsx(tr,{id:"pool",className:`mt-2 flex flex-wrap gap-2 min-h-[120px] ${l&&l>=1?"ring-2 ring-brand/40 rounded-xl p-2 -m-2":""}`,children:a.map(e=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${m===e?"animate-pop":""}`,style:{width:b,height:b},children:p.jsx(e7,{size:y})})},e))})]})]})})}function ta({a:e,b:t,mistake:n,onReady:r,mistakes:l}){let i=(0,tl.Q)(),a=Math.floor(e/t),[s,o]=(0,g.useState)(()=>Array.from({length:e},(e,t)=>t)),[u,c]=(0,g.useState)(()=>Array.from({length:t},()=>[])),[d,h]=(0,g.useState)(!1),[f,m]=(0,g.useState)(null),x=Math.min(10,a),v=(0,g.useMemo)(()=>x>=10?32:x>=8?36:x>=6?44:56,[x]),b=Math.max(20,Math.round(.66*v));return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){let t=Number(e.active.id),n=e.over?.id;if(!n)return;tt.drop();let r=u.findIndex(e=>e.includes(t)),l=-1===r;if("pool"===n){l||(c(e=>e.map((e,n)=>n===r?e.filter(e=>e!==t):e)),o(e=>[...e,t]));return}if(n.startsWith("friend-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||u[e].length>=a)return;if(l)o(e=>e.filter(e=>e!==t)),c(n=>n.map((n,r)=>r===e?[...n,t]:n));else{if(r===e)return;c(n=>n.map((n,l)=>l===r?n.filter(e=>e!==t):l===e?[...n,t]:n))}}},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[(0,p.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[p.jsx("span",{className:"text-xl",children:"\uD83D\uDDC3️"}),(d||"number"==typeof l&&l>=1)&&(0,p.jsxs)("span",{className:"ml-auto text-[11px] text-gray-400 flex items-center gap-1",children:[p.jsx("span",{className:"animate-pointer",children:"\uD83D\uDC49"}),i("countTogether")," ",e-s.length,"/",e]})]}),p.jsx(tr,{id:"pool",className:"mt-2 flex flex-wrap gap-2 min-h-[120px]",children:s.map(e=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${f===e?"animate-pop":""}`,style:{width:v,height:v},children:p.jsx(e7,{size:b})})},e))})]}),p.jsx("div",{className:`grid grid-cols-2 sm:grid-cols-3 gap-3 ${d?"pointer-events-none opacity-95":""}`,children:u.map((e,t)=>(0,p.jsxs)("div",{className:"border-2 border-dashed rounded-xl p-2",children:[p.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-500",children:p.jsx(e9,{size:36})}),(0,p.jsxs)(tr,{id:`friend-${t}`,className:"mt-2 flex flex-wrap gap-2 min-h-[120px]",children:[e.map(e=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${f===e?"animate-pop":""}`,style:{width:v,height:v},children:p.jsx(e7,{size:b})})},e)),Array.from({length:Math.max(0,a-e.length)}).map((e,t)=>p.jsx("div",{className:"rounded-xl border border-gray-200",style:{width:v,height:v}},t))]}),(0,p.jsxs)("div",{className:"text-[10px] mt-1 text-gray-400 font-bold",children:[e.length,"/",a]})]},t))})]})})}function ts({a:e,b:t,mistake:n,onReady:r,mistakes:l}){let i=(0,tl.Q)(),a=e*t,[s,o]=(0,g.useState)(()=>Array.from({length:a},(e,t)=>t)),[u,c]=(0,g.useState)(()=>Array.from({length:a},()=>null)),[d,h]=(0,g.useState)(!1),[f,m]=(0,g.useState)(null),x={gridTemplateColumns:`repeat(${t}, minmax(0,1fr))`},v=Math.min(10,t),b=(0,g.useMemo)(()=>v>=10?32:v>=8?36:v>=6?44:56,[v]),y=Math.max(20,Math.round(.66*b));return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){let t=Number(e.active.id),n=e.over?.id;if(!n)return;tt.drop();let r=s.includes(t);if("pool"===n){r||(c(e=>e.map(e=>e===t?null:e)),o(e=>[...e,t]));return}if(n.startsWith("cell-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||null!==u[e])return;if(r)o(e=>e.filter(e=>e!==t)),c(n=>n.map((n,r)=>r===e?t:n));else{let n=u.findIndex(e=>e===t);if(-1===n)return;c(r=>r.map((r,l)=>l===n?null:l===e?t:r))}}},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[(0,p.jsxs)("div",{className:`border-2 border-dashed rounded-xl p-3 ${d?"pointer-events-none opacity-95":""}`,children:[p.jsx(tr,{id:"array",className:"grid gap-2"}),p.jsx("div",{className:"grid gap-2 mt-1",style:x,children:u.map((e,t)=>p.jsx(tr,{id:`cell-${t}`,className:"rounded-xl border border-gray-200 grid place-items-center",style:{width:b,height:b},children:null!==e&&p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${f===e?"animate-pop":""}`,style:{width:b,height:b},children:p.jsx(e7,{size:y})})})},t))}),(0,p.jsxs)("div",{className:"flex justify-between mt-2 text-[10px] text-gray-400 font-bold",children:[(0,p.jsxs)("span",{children:[e,"\xd7",t]}),(0,p.jsxs)("span",{children:[u.filter(e=>null!==e).length,"/",a]})]})]}),(0,p.jsxs)("div",{className:"border rounded-xl p-3",children:[(0,p.jsxs)("div",{className:"flex items-center gap-2 text-gray-500 text-xs",children:[p.jsx("span",{children:"\uD83E\uDDFA"}),p.jsx("span",{children:i("pool")}),(d||"number"==typeof l&&l>=1)&&(0,p.jsxs)("span",{className:"ml-auto text-[11px] text-gray-400 flex items-center gap-1",children:[p.jsx("span",{className:"animate-pointer",children:"\uD83D\uDC49"}),i("countTogether")," ",u.filter(e=>null!==e).length,"/",a]})]}),p.jsx(tr,{id:"pool",className:"mt-2 flex flex-wrap gap-2 min-h-[120px]",children:s.map(e=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${f===e?"animate-pop":""}`,style:{width:b,height:b},children:p.jsx(e7,{size:y})})},e))})]})]})})}function to(){let e=(0,v.g)(),t=e.current,[n,r]=(0,g.useState)(!1),[l,i]=(0,g.useState)(0),[a,s]=(0,g.useState)(!1),[o,u]=(0,g.useState)(null),c=(0,g.useMemo)(()=>t?"multiply-groups"===t.game?p.jsx(ti,{a:t.a,b:t.b,mistake:n,mistakes:l,onReady:h},t.id):"division-dealer"===t.game?p.jsx(ta,{a:t.a,b:t.b,mistake:n,onReady:h,mistakes:l},t.id):"array-builder"===t.game?p.jsx(ts,{a:t.a,b:t.b,mistake:n,onReady:h,mistakes:l},t.id):null:null,[t,n,l]);if(!t)return null;function d(n){if(!t)return;let l=n===t.answer;if(l?tt.success():tt.error(),!l){r(!0),i(e=>e+1),s(!0),u(n);return}r(!1),e.answer(n)}function h(){a&&null!==o&&e.answer(o),s(!1),u(null),r(!1)}let f=Math.min(100,Math.round(e.sessionCorrect%10/10*100));return(0,p.jsxs)("main",{className:"game-screen flex flex-col",children:[(0,p.jsxs)("div",{className:"px-4 pt-4",children:[(0,p.jsxs)("header",{className:"flex items-center justify-between",children:[p.jsx(x.default,{href:"/menu",className:"text-xl px-3 py-1 rounded-lg border bg-white shadow-soft active:scale-95 select-none",children:"☰"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"text-xs bg-white px-2 py-1 rounded-lg border flex items-center gap-1",children:["\uD83C\uDFC5 ",p.jsx("span",{className:"font-bold",children:e.profile.level})]}),(0,p.jsxs)("span",{className:"text-xs bg-white px-2 py-1 rounded-lg border",children:["⭐ ",e.profile.points]}),p.jsx("button",{onClick:()=>e.toggleSound(),className:`text-xs px-2 py-1 rounded-lg border ${e.profile.soundOn?"bg-green-50":"bg-red-50"}`,children:e.profile.soundOn?"\uD83D\uDD0A":"\uD83D\uDD07"})]})]}),p.jsx("div",{className:"progress mt-2",children:p.jsx("div",{className:"bar bg-brand",style:{width:`${f}%`}})})]}),p.jsx("section",{className:"flex-1 overflow-hidden px-4 py-2",children:(0,p.jsxs)("div",{className:"card h-full p-4 game-area overflow-auto flex flex-col items-center",children:[p.jsx("div",{className:"text-center mb-4 mt-2",children:(0,p.jsxs)("div",{className:"text-5xl sm:text-6xl font-black tracking-tight",children:[t.a," ","mul"===t.op?"\xd7":"\xf7"," ",t.b]})}),p.jsx("div",{className:"w-full max-w-4xl mx-auto",children:c})]})}),p.jsx("section",{className:"px-4 pb-5",children:"mc"===t.input?p.jsx(y,{values:t.choices,correct:t.answer,onSelect:d,highlightCorrect:l>=3,disabled:a}):p.jsx(w,{min:0,max:100,onPick:d,disabled:a})})]})}},2195:(e,t,n)=>{"use strict";n.d(t,{FabMenu:()=>s});var r=n(326),l=n(434),i=n(5047);n(7577);var a=n(8490);function s(){let e=["/menu","/settings"].includes((0,i.usePathname)());return((0,a.g)(e=>e.profile.theme),e)?null:r.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:r.jsx(l.default,{href:"/menu",className:"rounded-full w-14 h-14 grid place-items-center bg-brand text-white shadow-soft active:scale-95 select-none text-2xl",children:"☰"})})}},6817:(e,t,n)=>{"use strict";n.d(t,{ThemeEffect:()=>l}),n(7577);var r=n(8490);function l(){return(0,r.g)(e=>e.profile.theme),(0,r.g)(e=>e.profile.language||"en"),null}},3933:(e,t,n)=>{"use strict";n.d(t,{Q:()=>i});var r=n(8490);let l={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"МэтТик",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"מתיק",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function i(){let e=(0,r.g)(e=>e.profile.language||"en");return t=>l[e][t]}},8490:(e,t,n)=>{"use strict";n.d(t,{O:()=>u,g:()=>f});var r=n(114),l=n(5251);let i=e=>Math.floor(Math.random()*e),a=(e,t,n)=>Math.max(t,Math.min(n,e)),s=(e,t,n)=>"mul"===e?`m:${t}x${n}`:`d:${t}/${n}`;function o(){return Math.floor(Date.now()/1e3)}let u=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],c={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function d(e){let t=i(e)+1,n=i(e)+1;return{op:"mul",a:t,b:n,answer:t*n}}function h(e){let t=i(e)+1,n=i(e)+1;return{op:"div",a:t*n,b:t,answer:n}}let f=(0,r.Ue)()((0,l.tJ)((e,t)=>({...c,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let n;let r=t(),l=a(r.profile.maxFactor,2,10);if(r.recentMistakes.length){let[e,t]=r.recentMistakes.shift().split(":"),[l,i]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);n={op:"m"===e?"mul":"div",a:l,b:i}}else{let e=Object.values(r.mastery).find(e=>e.dueAt<=o());if(e){let[t,r]=e.key.split(":"),[l,i]=r.includes("x")?r.split("x").map(Number):r.split("/").map(Number);n={op:"m"===t?"mul":"div",a:l,b:i}}}let s=function(e,t,n){let r=n?{op:n.op,a:n.a,b:n.b,answer:"mul"===n.op?n.a*n.b:Math.floor(n.a/n.b)}:.5>Math.random()?d(e):h(e),l=!n&&t&&.5>Math.random()?"mul"===t?h(e):d(e):r;return{id:`${l.op}:${l.a}:${l.b}:${Date.now()}`,op:l.op,a:l.a,b:l.b,answer:l.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let n=i(9)-4,r=Math.max(0,e+n+(0===n?i(3)+1:0));t.add(r)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}([...t])}(l.answer),game:"mul"===l.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(l,r.lastOp,n);e({current:s,startedAt:Date.now(),lastOp:s.op})},answer:n=>{let r=t(),l=r.current;if(!l)return;let i=n===l.answer;Date.now(),r.startedAt??Date.now();let c=s(l.op,l.a,l.b),d=r.mastery[c],h=function(e,t){let n=o();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:n+10,lastResult:t};let r=a(e.score+(t?1:-2),0,5),l=a(e.ease+(t?.08:-.2),1.2,2.6),i=t?Math.max(10,Math.round(e.intervalSec*l)):10;return{...e,score:r,ease:l,intervalSec:i,dueAt:n+i,lastResult:t}}(d&&{...d,key:c},i);h.key=c;let f=Math.min(10,Math.max(0,2*r.profile.streak)),p={...r.profile};if(p.totalAttempts+=1,i)for(let e of(p.totalCorrect+=1,p.streak+=1,p.bestStreak=Math.max(p.bestStreak,p.streak),p.points+=10+f,p.streak%4==0&&(p.maxFactor=a(p.maxFactor+1,2,10),p.level=Math.max(p.level,p.maxFactor)),u))p.points>=e.cost&&(p.unlocked[e.id]=!0);else{p.streak=0,p.maxFactor=a(p.maxFactor-1,2,10),p.level=Math.max(1,p.maxFactor);let t="mul"===l.op?`m:${l.a}x${l.b}`:`d:${l.a}/${l.b}`,n=r.recentMistakes.slice();n.includes(t)||n.push(t),e({recentMistakes:n})}e({profile:p,mastery:{...r.mastery,[h.key]:h},sessionAttempts:(r.sessionAttempts??0)+1,sessionCorrect:(r.sessionCorrect??0)+(i?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},5624:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u,metadata:()=>s,viewport:()=>o});var r=n(9510);n(7272);var l=n(8570);let i=(0,l.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/FabMenu.tsx#FabMenu`),a=(0,l.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/ThemeEffect.tsx#ThemeEffect`),s={title:"MathTik",description:"MathTik — Multiply & Divide with fun mini-games"},o={width:"device-width",initialScale:1,maximumScale:1};function u({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,r.jsxs)("body",{children:[r.jsx(a,{}),r.jsx("div",{className:"min-h-screen bg-[var(--bg)]",children:e}),r.jsx(i,{})]})})}},1871:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(8570).createProxy)(String.raw`/Users/ais/Projects/edugames/app/play/page.tsx#default`)},4697:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(6621);let l=e=>[{type:"image/svg+xml",sizes:"any",url:(0,r.fillMetadataSegment)(".",e.params,"icon.svg")+"?2c021bb99e44f577"}]},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[948,429,621],()=>n(1201));module.exports=r})();