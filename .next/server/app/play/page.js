(()=>{var e={};e.id=974,e.ids=[974],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},1201:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>c,pages:()=>d,routeModule:()=>f,tree:()=>u}),n(1871),n(5349),n(5866);var r=n(3191),i=n(8716),l=n(7922),a=n.n(l),s=n(5231),o={};for(let e in s)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>s[e]);n.d(t,o);let u=["",{children:["play",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(n.bind(n,1871)),"/Users/ais/Projects/edugames/app/play/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(n.bind(n,5349)),"/Users/ais/Projects/edugames/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(n.t.bind(n,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(n.bind(n,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/ais/Projects/edugames/app/play/page.tsx"],c="/play/page",h={require:n,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/play/page",pathname:"/play",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},3911:(e,t,n)=>{Promise.resolve().then(n.bind(n,6817))},3222:(e,t,n)=>{Promise.resolve().then(n.bind(n,4041))},4667:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,2994,23)),Promise.resolve().then(n.t.bind(n,6114,23)),Promise.resolve().then(n.t.bind(n,9727,23)),Promise.resolve().then(n.t.bind(n,9671,23)),Promise.resolve().then(n.t.bind(n,1868,23)),Promise.resolve().then(n.t.bind(n,4759,23))},4041:(e,t,n)=>{"use strict";let r;n.r(t),n.d(t,{default:()=>tf});var i,l,a,s,o,u,d,c,h,f,p=n(326),m=n(7577),g=n.n(m),x=n(434),v=n(8490);let b=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=function e(t){var n,r,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(n=0;n<l;n++)t[n]&&(r=e(t[n]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r)}return i}(e))&&(r&&(r+=" "),r+=t);return r};function y({values:e,correct:t,onSelect:n,disabled:r,highlightCorrect:i}){return p.jsx("div",{className:b("grid grid-cols-2 sm:grid-cols-4 gap-3",r&&"opacity-60 pointer-events-none"),children:e.map(e=>{let r=e===t;return p.jsx("button",{onClick:()=>n(e),className:b("btn btn-secondary text-3xl py-6",i&&r&&"animate-pump"),"data-correct":r?"true":"false",children:e},e)})})}function w({min:e=0,max:t=100,value:n,onPick:r,disabled:i,correct:l,highlightCorrect:a}){let s=(0,m.useMemo)(()=>{let n=[];for(let r=e;r<=t;r++)n.push(r);return n},[e,t]);return p.jsx("div",{dir:"ltr",className:b("overflow-x-auto card p-3",i&&"opacity-60 pointer-events-none"),children:p.jsx("div",{className:"flex gap-3 w-max",children:s.map(e=>{let t="number"==typeof l&&e===l;return p.jsx("button",{onClick:()=>r(e),className:b("px-5 py-4 rounded-xl font-extrabold shadow-soft text-2xl",e===n?"bg-brand text-white":"bg-white border",a&&t&&"animate-pump"),"data-correct":t?"true":"false",children:e},e)})})})}var M=n(962);let D="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function j(e){let t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function S(e){return"nodeType"in e}function C(e){var t,n;return e?j(e)?e:S(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function N(e){let{Document:t}=C(e);return e instanceof t}function k(e){return!j(e)&&e instanceof C(e).HTMLElement}function E(e){return e instanceof C(e).SVGElement}function R(e){return e?j(e)?e.document:S(e)?N(e)?e:k(e)||E(e)?e.ownerDocument:document:document:document}let T=D?m.useLayoutEffect:m.useEffect;function $(e){let t=(0,m.useRef)(e);return T(()=>{t.current=e}),(0,m.useCallback)(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return null==t.current?void 0:t.current(...n)},[])}function P(e,t){void 0===t&&(t=[e]);let n=(0,m.useRef)(e);return T(()=>{n.current!==e&&(n.current=e)},t),n}function A(e,t){let n=(0,m.useRef)();return(0,m.useMemo)(()=>{let t=e(n.current);return n.current=t,t},[...t])}function z(e){let t=$(e),n=(0,m.useRef)(null),r=(0,m.useCallback)(e=>{e!==n.current&&(null==t||t(e,n.current)),n.current=e},[]);return[n,r]}function L(e){let t=(0,m.useRef)();return(0,m.useEffect)(()=>{t.current=e},[e]),t.current}let O={};function I(e,t){return(0,m.useMemo)(()=>{if(t)return t;let n=null==O[e]?0:O[e]+1;return O[e]=n,e+"-"+n},[e,t])}function B(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>{for(let[r,i]of Object.entries(n)){let n=t[r];null!=n&&(t[r]=n+e*i)}return t},{...t})}}let F=B(1),U=B(-1);function W(e){if(!e)return!1;let{KeyboardEvent:t}=C(e.target);return t&&e instanceof t}function H(e){if(function(e){if(!e)return!1;let{TouchEvent:t}=C(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return"clientX"in e&&"clientY"in e?{x:e.clientX,y:e.clientY}:null}let _=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[_.Translate.toString(e),_.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),q="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]",Y={display:"none"};function K(e){let{id:t,value:n}=e;return g().createElement("div",{id:t,style:Y},n)}function X(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;return g().createElement("div",{id:t,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},n)}let G=(0,m.createContext)(null),V={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},J={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Q(e){let{announcements:t=J,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=V}=e,{announce:l,announcement:a}=function(){let[e,t]=(0,m.useState)("");return{announce:(0,m.useCallback)(e=>{null!=e&&t(e)},[]),announcement:e}}(),s=I("DndLiveRegion"),[o,u]=(0,m.useState)(!1);if((0,m.useEffect)(()=>{u(!0)},[]),function(e){let t=(0,m.useContext)(G);(0,m.useEffect)(()=>{if(!t)throw Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}((0,m.useMemo)(()=>({onDragStart(e){let{active:n}=e;l(t.onDragStart({active:n}))},onDragMove(e){let{active:n,over:r}=e;t.onDragMove&&l(t.onDragMove({active:n,over:r}))},onDragOver(e){let{active:n,over:r}=e;l(t.onDragOver({active:n,over:r}))},onDragEnd(e){let{active:n,over:r}=e;l(t.onDragEnd({active:n,over:r}))},onDragCancel(e){let{active:n,over:r}=e;l(t.onDragCancel({active:n,over:r}))}}),[l,t])),!o)return null;let d=g().createElement(g().Fragment,null,g().createElement(K,{id:r,value:i.draggable}),g().createElement(X,{id:s,announcement:a}));return n?(0,M.createPortal)(d,n):d}function Z(){}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(i||(i={}));let ee=Object.freeze({x:0,y:0});function et(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}let en=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e,i=[];for(let e of r){let{id:r}=e,l=n.get(r);if(l){let n=function(e,t){let n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),l=Math.min(t.top+t.height,e.top+e.height);if(r<i&&n<l){let a=t.width*t.height,s=e.width*e.height,o=(i-r)*(l-n);return Number((o/(a+s-o)).toFixed(4))}return 0}(l,t);n>0&&i.push({id:r,data:{droppableContainer:e,value:n}})}}return i.sort(et)};function er(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ee}let ei=function(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((t,n)=>({...t,top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),{...t})}}(1),el={ignoreTransform:!1};function ea(e,t){void 0===t&&(t=el);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:t,transformOrigin:r}=C(e).getComputedStyle(e);t&&(n=function(e,t,n){let r=function(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}(t);if(!r)return e;let{scaleX:i,scaleY:l,x:a,y:s}=r,o=e.left-a-(1-i)*parseFloat(n),u=e.top-s-(1-l)*parseFloat(n.slice(n.indexOf(" ")+1)),d=i?e.width/i:e.width,c=l?e.height/l:e.height;return{width:d,height:c,top:u,right:o+d,bottom:u+c,left:o}}(n,t,r))}let{top:r,left:i,width:l,height:a,bottom:s,right:o}=n;return{top:r,left:i,width:l,height:a,bottom:s,right:o}}function es(e){return ea(e,{ignoreTransform:!0})}function eo(e,t){let n=[];return e?function r(i){var l;if(null!=t&&n.length>=t||!i)return n;if(N(i)&&null!=i.scrollingElement&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!k(i)||E(i)||n.includes(i))return n;let a=C(e).getComputedStyle(i);return(i!==e&&function(e,t){void 0===t&&(t=C(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{let r=t[e];return"string"==typeof r&&n.test(r)})}(i,a)&&n.push(i),void 0===(l=a)&&(l=C(i).getComputedStyle(i)),"fixed"===l.position)?n:r(i.parentNode)}(e):n}function eu(e){let[t]=eo(e,1);return null!=t?t:null}function ed(e){return D&&e?j(e)?e:S(e)?N(e)||e===R(e).scrollingElement?window:k(e)?e:null:null:null}function ec(e){return j(e)?e.scrollX:e.scrollLeft}function eh(e){return j(e)?e.scrollY:e.scrollTop}function ef(e){return{x:ec(e),y:eh(e)}}function ep(e){return!!D&&!!e&&e===document.scrollingElement}function em(e){let t={x:0,y:0},n=ep(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y;return{isTop:i,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=r.y,isRight:e.scrollLeft>=r.x,maxScroll:r,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(l||(l={}));let eg={x:.2,y:.2};function ex(e){return e.reduce((e,t)=>F(e,ef(t)),ee)}let ev=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+ec(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+eh(t),0)}]];class eb{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let n=eo(t),r=ex(n);for(let[t,i,l]of(this.rect={...e},this.width=e.width,this.height=e.height,ev))for(let e of i)Object.defineProperty(this,e,{get:()=>{let i=l(n),a=r[t]-i;return this.rect[e]+a},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ey{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var r;null==(r=this.target)||r.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function ew(e,t){let n=Math.abs(e.x),r=Math.abs(e.y);return"number"==typeof t?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t&&r>t.y}function eM(e){e.preventDefault()}function eD(e){e.stopPropagation()}(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(a||(a={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(s||(s={}));let ej={start:[s.Space,s.Enter],cancel:[s.Esc],end:[s.Space,s.Enter,s.Tab]},eS=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case s.Right:return{...n,x:n.x+25};case s.Left:return{...n,x:n.x-25};case s.Down:return{...n,y:n.y+25};case s.Up:return{...n,y:n.y-25}}};class eC{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;let{event:{target:t}}=e;this.props=e,this.listeners=new ey(R(t)),this.windowListeners=new ey(C(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(a.Resize,this.handleCancel),this.windowListeners.add(a.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(a.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&function(e,t){if(void 0===t&&(t=ea),!e)return;let{top:n,left:r,bottom:i,right:l}=t(e);eu(e)&&(i<=0||l<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}(n),t(ee)}handleKeyDown(e){if(W(e)){let{active:t,context:n,options:r}=this.props,{keyboardCodes:i=ej,coordinateGetter:l=eS,scrollBehavior:a="smooth"}=r,{code:o}=e;if(i.end.includes(o)){this.handleEnd(e);return}if(i.cancel.includes(o)){this.handleCancel(e);return}let{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:ee;this.referenceCoordinates||(this.referenceCoordinates=d);let c=l(e,{active:t,context:n.current,currentCoordinates:d});if(c){let t=U(c,d),r={x:0,y:0},{scrollableAncestors:i}=n.current;for(let n of i){let i=e.code,{isTop:l,isRight:o,isLeft:u,isBottom:d,maxScroll:h,minScroll:f}=em(n),p=function(e){if(e===document.scrollingElement){let{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}let{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}(n),m={x:Math.min(i===s.Right?p.right-p.width/2:p.right,Math.max(i===s.Right?p.left:p.left+p.width/2,c.x)),y:Math.min(i===s.Down?p.bottom-p.height/2:p.bottom,Math.max(i===s.Down?p.top:p.top+p.height/2,c.y))},g=i===s.Right&&!o||i===s.Left&&!u,x=i===s.Down&&!d||i===s.Up&&!l;if(g&&m.x!==c.x){let e=n.scrollLeft+t.x,l=i===s.Right&&e<=h.x||i===s.Left&&e>=f.x;if(l&&!t.y){n.scrollTo({left:e,behavior:a});return}l?r.x=n.scrollLeft-e:r.x=i===s.Right?n.scrollLeft-h.x:n.scrollLeft-f.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(x&&m.y!==c.y){let e=n.scrollTop+t.y,l=i===s.Down&&e<=h.y||i===s.Up&&e>=f.y;if(l&&!t.x){n.scrollTo({top:e,behavior:a});return}l?r.y=n.scrollTop-e:r.y=i===s.Down?n.scrollTop-h.y:n.scrollTop-f.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(e,F(U(c,this.referenceCoordinates),r))}}}handleMove(e,t){let{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){let{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){let{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function eN(e){return!!(e&&"distance"in e)}function ek(e){return!!(e&&"delay"in e)}eC.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ej,onActivation:i}=t,{active:l}=n,{code:a}=e.nativeEvent;if(r.start.includes(a)){let t=l.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==i||i({event:e.nativeEvent}),!0)}return!1}}];class eE{constructor(e,t,n){var r;void 0===n&&(n=function(e){let{EventTarget:t}=C(e);return e instanceof t?e:R(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;let{event:i}=e,{target:l}=i;this.props=e,this.events=t,this.document=R(l),this.documentListeners=new ey(this.document),this.listeners=new ey(n),this.windowListeners=new ey(C(l)),this.initialCoordinates=null!=(r=H(i))?r:ee,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(a.Resize,this.handleCancel),this.windowListeners.add(a.DragStart,eM),this.windowListeners.add(a.VisibilityChange,this.handleCancel),this.windowListeners.add(a.ContextMenu,eM),this.documentListeners.add(a.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ek(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(eN(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){let{active:n,onPending:r}=this.props;r(n,e,this.initialCoordinates,t)}handleStart(){let{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(a.Click,eD,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(a.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;let{activated:n,initialCoordinates:r,props:i}=this,{onMove:l,options:{activationConstraint:a}}=i;if(!r)return;let s=null!=(t=H(e))?t:ee,o=U(r,s);if(!n&&a){if(eN(a)){if(null!=a.tolerance&&ew(o,a.tolerance))return this.handleCancel();if(ew(o,a.distance))return this.handleStart()}return ek(a)&&ew(o,a.tolerance)?this.handleCancel():void this.handlePending(a,o)}e.cancelable&&e.preventDefault(),l(s)}handleEnd(){let{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){let{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===s.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}let eR={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eT extends eE{constructor(e){let{event:t}=e;super(e,eR,R(t.target))}}eT.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!!n.isPrimary&&0===n.button&&(null==r||r({event:n}),!0)}}];let e$={move:{name:"mousemove"},end:{name:"mouseup"}};!function(e){e[e.RightClick=2]="RightClick"}(o||(o={}));class eP extends eE{constructor(e){super(e,e$,R(e.event.target))}}eP.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button!==o.RightClick&&(null==r||r({event:n}),!0)}}];let eA={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class ez extends eE{constructor(e){super(e,eA)}static setup(){return window.addEventListener(eA.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(eA.move.name,e)};function e(){}}}ez.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t,{touches:i}=n;return!(i.length>1)&&(null==r||r({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(u||(u={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(d||(d={}));let eL={x:{[l.Backward]:!1,[l.Forward]:!1},y:{[l.Backward]:!1,[l.Forward]:!1}};(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(c||(c={})),(h||(h={})).Optimized="optimized";let eO=new Map;function eI(e,t){return A(n=>e?n||("function"==typeof t?t(e):e):null,[t,e])}function eB(e){let{callback:t,disabled:n}=e,r=$(t),i=(0,m.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.ResizeObserver)return;let{ResizeObserver:e}=window;return new e(r)},[n]);return(0,m.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function eF(e){return new eb(ea(e),e)}function eU(e,t,n){void 0===t&&(t=eF);let[r,i]=(0,m.useState)(null);function l(){i(r=>{if(!e)return null;if(!1===e.isConnected){var i;return null!=(i=null!=r?r:n)?i:null}let l=t(e);return JSON.stringify(r)===JSON.stringify(l)?r:l})}let a=function(e){let{callback:t,disabled:n}=e,r=$(t),i=(0,m.useMemo)(()=>{if(n||"undefined"==typeof window||void 0===window.MutationObserver)return;let{MutationObserver:e}=window;return new e(r)},[r,n]);return(0,m.useEffect)(()=>()=>null==i?void 0:i.disconnect(),[i]),i}({callback(t){if(e)for(let n of t){let{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){l();break}}}}),s=eB({callback:l});return T(()=>{l(),e?(null==s||s.observe(e),null==a||a.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==a||a.disconnect())},[e]),r}let eW=[];function eH(e,t){void 0===t&&(t=[]);let n=(0,m.useRef)(null);return(0,m.useEffect)(()=>{n.current=null},t),(0,m.useEffect)(()=>{let t=e!==ee;t&&!n.current&&(n.current=e),!t&&n.current&&(n.current=null)},[e]),n.current?U(e,n.current):ee}function e_(e){return(0,m.useMemo)(()=>e?function(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}let eq=[],eY=[{sensor:eT,options:{}},{sensor:eC,options:{}}],eK={current:{}},eX={draggable:{measure:es},droppable:{measure:es,strategy:c.WhileDragging,frequency:h.Optimized},dragOverlay:{measure:ea}};class eG extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}let eV={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new eG,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Z},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eX,measureDroppableContainers:Z,windowRect:null,measuringScheduled:!1},eJ={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Z,draggableNodes:new Map,over:null,measureDroppableContainers:Z},eQ=(0,m.createContext)(eJ),eZ=(0,m.createContext)(eV);function e0(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new eG}}}function e1(e,t){switch(t.type){case i.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case i.DragMove:if(null==e.draggable.active)return e;return{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case i.DragEnd:case i.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case i.RegisterDroppable:{let{element:n}=t,{id:r}=n,i=new eG(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case i.SetDroppableDisabled:{let{id:n,key:r,disabled:i}=t,l=e.droppable.containers.get(n);if(!l||r!==l.key)return e;let a=new eG(e.droppable.containers);return a.set(n,{...l,disabled:i}),{...e,droppable:{...e.droppable,containers:a}}}case i.UnregisterDroppable:{let{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;let l=new eG(e.droppable.containers);return l.delete(n),{...e,droppable:{...e.droppable,containers:l}}}default:return e}}function e2(e){let{disabled:t}=e,{active:n,activatorEvent:r,draggableNodes:i}=(0,m.useContext)(eQ),l=L(r),a=L(null==n?void 0:n.id);return(0,m.useEffect)(()=>{if(!t&&!r&&l&&null!=a){if(!W(l)||document.activeElement===l.target)return;let e=i.get(a);if(!e)return;let{activatorNode:t,node:n}=e;(t.current||n.current)&&requestAnimationFrame(()=>{for(let e of[t.current,n.current]){if(!e)continue;let t=e.matches(q)?e:e.querySelector(q);if(t){t.focus();break}}})}},[r,t,i,a,l]),null}let e3=(0,m.createContext)({...ee,scaleX:1,scaleY:1});!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(f||(f={}));let e4=(0,m.memo)(function(e){var t,n,r,a,s,o;let{id:h,accessibility:p,autoScroll:x=!0,children:v,sensors:b=eY,collisionDetection:y=en,measuring:w,modifiers:j,...S}=e,[N,E]=(0,m.useReducer)(e1,void 0,e0),[R,$]=function(){let[e]=(0,m.useState)(()=>new Set),t=(0,m.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,m.useCallback)(t=>{let{type:n,event:r}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,r)})},[e]),t]}(),[O,B]=(0,m.useState)(f.Uninitialized),U=O===f.Initialized,{draggable:{active:W,nodes:_,translate:q},droppable:{containers:Y}}=N,K=null!=W?_.get(W):null,X=(0,m.useRef)({initial:null,translated:null}),V=(0,m.useMemo)(()=>{var e;return null!=W?{id:W,data:null!=(e=null==K?void 0:K.data)?e:eK,rect:X}:null},[W,K]),J=(0,m.useRef)(null),[Z,et]=(0,m.useState)(null),[el,es]=(0,m.useState)(null),ec=P(S,Object.values(S)),eh=I("DndDescribedBy",h),ev=(0,m.useMemo)(()=>Y.getEnabled(),[Y]),ey=(0,m.useMemo)(()=>({draggable:{...eX.draggable,...null==w?void 0:w.draggable},droppable:{...eX.droppable,...null==w?void 0:w.droppable},dragOverlay:{...eX.dragOverlay,...null==w?void 0:w.dragOverlay}}),[null==w?void 0:w.draggable,null==w?void 0:w.droppable,null==w?void 0:w.dragOverlay]),{droppableRects:ew,measureDroppableContainers:eM,measuringScheduled:eD}=function(e,t){let{dragging:n,dependencies:r,config:i}=t,[l,a]=(0,m.useState)(null),{frequency:s,measure:o,strategy:u}=i,d=(0,m.useRef)(e),h=function(){switch(u){case c.Always:return!1;case c.BeforeDragging:return n;default:return!n}}(),f=P(h),p=(0,m.useCallback)(function(e){void 0===e&&(e=[]),f.current||a(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[f]),g=(0,m.useRef)(null),x=A(t=>{if(h&&!n)return eO;if(!t||t===eO||d.current!==e||null!=l){let t=new Map;for(let n of e){if(!n)continue;if(l&&l.length>0&&!l.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}let e=n.node.current,r=e?new eb(o(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,l,n,h,o]);return(0,m.useEffect)(()=>{d.current=e},[e]),(0,m.useEffect)(()=>{h||p()},[n,h]),(0,m.useEffect)(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),(0,m.useEffect)(()=>{h||"number"!=typeof s||null!==g.current||(g.current=setTimeout(()=>{p(),g.current=null},s))},[s,h,p,...r]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:null!=l}}(ev,{dragging:U,dependencies:[q.x,q.y],config:ey.droppable}),ej=function(e,t){let n=null!=t?e.get(t):void 0,r=n?n.node.current:null;return A(e=>{var n;return null==t?null:null!=(n=null!=r?r:e)?n:null},[r,t])}(_,W),eS=(0,m.useMemo)(()=>el?H(el):null,[el]),eC=function(){let e=(null==Z?void 0:Z.autoScrollEnabled)===!1,t="object"==typeof x?!1===x.enabled:!1===x,n=U&&!e&&!t;return"object"==typeof x?{...x,enabled:n}:{enabled:n}}(),eN=eI(ej,ey.draggable.measure);!function(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e,l=(0,m.useRef)(!1),{x:a,y:s}="boolean"==typeof i?{x:i,y:i}:i;T(()=>{if(!a&&!s||!t){l.current=!1;return}if(l.current||!r)return;let e=null==t?void 0:t.node.current;if(!e||!1===e.isConnected)return;let i=er(n(e),r);if(a||(i.x=0),s||(i.y=0),l.current=!0,Math.abs(i.x)>0||Math.abs(i.y)>0){let t=eu(e);t&&t.scrollBy({top:i.y,left:i.x})}},[t,a,s,r,n])}({activeNode:null!=W?_.get(W):null,config:eC.layoutShiftCompensation,initialRect:eN,measure:ey.draggable.measure});let ek=eU(ej,ey.draggable.measure,eN),eE=eU(ej?ej.parentElement:null),eR=(0,m.useRef)({activatorEvent:null,active:null,activeNode:ej,collisionRect:null,collisions:null,droppableRects:ew,draggableNodes:_,draggingNode:null,draggingNodeRect:null,droppableContainers:Y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),eT=Y.getNodeFor(null==(t=eR.current.over)?void 0:t.id),e$=function(e){let{measure:t}=e,[n,r]=(0,m.useState)(null),i=eB({callback:(0,m.useCallback)(e=>{for(let{target:n}of e)if(k(n)){r(e=>{let r=t(n);return e?{...e,width:r.width,height:r.height}:r});break}},[t])}),[l,a]=z((0,m.useCallback)(e=>{let n=function(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return k(t)?t:e}(e);null==i||i.disconnect(),n&&(null==i||i.observe(n)),r(n?t(n):null)},[t,i]));return(0,m.useMemo)(()=>({nodeRef:l,rect:n,setRef:a}),[n,l,a])}({measure:ey.dragOverlay.measure}),eP=null!=(n=e$.nodeRef.current)?n:ej,eA=U?null!=(r=e$.rect)?r:ek:null,ez=!!(e$.nodeRef.current&&e$.rect),eF=function(e){let t=eI(e);return er(e,t)}(ez?null:ek),eG=e_(eP?C(eP):null),eV=function(e){let t=(0,m.useRef)(e),n=A(n=>e?n&&n!==eW&&e&&t.current&&e.parentNode===t.current.parentNode?n:eo(e):eW,[e]);return(0,m.useEffect)(()=>{t.current=e},[e]),n}(U?null!=eT?eT:ej:null),eJ=function(e,t){void 0===t&&(t=ea);let[n]=e,r=e_(n?C(n):null),[i,l]=(0,m.useState)(eq);function a(){l(()=>e.length?e.map(e=>ep(e)?r:new eb(t(e),e)):eq)}let s=eB({callback:a});return T(()=>{null==s||s.disconnect(),a(),e.forEach(e=>null==s?void 0:s.observe(e))},[e]),i}(eV),e4=function(e,t){let{transform:n,...r}=t;return null!=e&&e.length?e.reduce((e,t)=>t({transform:e,...r}),n):n}(j,{transform:{x:q.x-eF.x,y:q.y-eF.y,scaleX:1,scaleY:1},activatorEvent:el,active:V,activeNodeRect:ek,containerNodeRect:eE,draggingNodeRect:eA,over:eR.current.over,overlayNodeRect:e$.rect,scrollableAncestors:eV,scrollableAncestorRects:eJ,windowRect:eG}),e8=eS?F(eS,q):null,e5=function(e){let[t,n]=(0,m.useState)(null),r=(0,m.useRef)(e),i=(0,m.useCallback)(e=>{let t=ed(e.target);t&&n(e=>e?(e.set(t,ef(t)),new Map(e)):null)},[]);return(0,m.useEffect)(()=>{let t=r.current;if(e!==t){l(t);let a=e.map(e=>{let t=ed(e);return t?(t.addEventListener("scroll",i,{passive:!0}),[t,ef(t)]):null}).filter(e=>null!=e);n(a.length?new Map(a):null),r.current=e}return()=>{l(e),l(t)};function l(e){e.forEach(e=>{let t=ed(e);null==t||t.removeEventListener("scroll",i)})}},[i,e]),(0,m.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((e,t)=>F(e,t),ee):ex(e):ee,[e,t])}(eV),e6=eH(e5),e9=eH(e5,[ek]),e7=F(e4,e6),te=eA?ei(eA,e4):null,tt=V&&te?y({active:V,collisionRect:te,droppableRects:ew,droppableContainers:ev,pointerCoordinates:e8}):null,tn=function(e,t){if(!e||0===e.length)return null;let[n]=e;return n.id}(tt,0),[tr,ti]=(0,m.useState)(null),tl=(s=ez?e4:F(e4,e9),o=null!=(a=null==tr?void 0:tr.rect)?a:null,{...s,scaleX:o&&ek?o.width/ek.width:1,scaleY:o&&ek?o.height/ek.height:1}),ta=(0,m.useRef)(null),ts=(0,m.useCallback)((e,t)=>{let{sensor:n,options:r}=t;if(null==J.current)return;let l=_.get(J.current);if(!l)return;let a=e.nativeEvent,s=new n({active:J.current,activeNode:l,event:a,options:r,context:eR,onAbort(e){if(!_.get(e))return;let{onDragAbort:t}=ec.current,n={id:e};null==t||t(n),R({type:"onDragAbort",event:n})},onPending(e,t,n,r){if(!_.get(e))return;let{onDragPending:i}=ec.current,l={id:e,constraint:t,initialCoordinates:n,offset:r};null==i||i(l),R({type:"onDragPending",event:l})},onStart(e){let t=J.current;if(null==t)return;let n=_.get(t);if(!n)return;let{onDragStart:r}=ec.current,l={activatorEvent:a,active:{id:t,data:n.data,rect:X}};(0,M.unstable_batchedUpdates)(()=>{null==r||r(l),B(f.Initializing),E({type:i.DragStart,initialCoordinates:e,active:t}),R({type:"onDragStart",event:l}),et(ta.current),es(a)})},onMove(e){E({type:i.DragMove,coordinates:e})},onEnd:o(i.DragEnd),onCancel:o(i.DragCancel)});function o(e){return async function(){let{active:t,collisions:n,over:r,scrollAdjustedTranslate:l}=eR.current,s=null;if(t&&l){let{cancelDrop:o}=ec.current;s={activatorEvent:a,active:t,collisions:n,delta:l,over:r},e===i.DragEnd&&"function"==typeof o&&await Promise.resolve(o(s))&&(e=i.DragCancel)}J.current=null,(0,M.unstable_batchedUpdates)(()=>{E({type:e}),B(f.Uninitialized),ti(null),et(null),es(null),ta.current=null;let t=e===i.DragEnd?"onDragEnd":"onDragCancel";if(s){let e=ec.current[t];null==e||e(s),R({type:t,event:s})}})}}ta.current=s},[_]),to=(0,m.useCallback)((e,t)=>(n,r)=>{let i=n.nativeEvent,l=_.get(r);null!==J.current||!l||i.dndKit||i.defaultPrevented||!0!==e(n,t.options,{active:l})||(i.dndKit={capturedBy:t.sensor},J.current=r,ts(n,t))},[_,ts]),tu=(0,m.useMemo)(()=>b.reduce((e,t)=>{let{sensor:n}=t;return[...e,...n.activators.map(e=>({eventName:e.eventName,handler:to(e.handler,t)}))]},[]),[b,to]);(0,m.useEffect)(()=>{if(!D)return;let e=b.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(let t of e)null==t||t()}},b.map(e=>{let{sensor:t}=e;return t})),T(()=>{ek&&O===f.Initializing&&B(f.Initialized)},[ek,O]),(0,m.useEffect)(()=>{let{onDragMove:e}=ec.current,{active:t,activatorEvent:n,collisions:r,over:i}=eR.current;if(!t||!n)return;let l={active:t,activatorEvent:n,collisions:r,delta:{x:e7.x,y:e7.y},over:i};(0,M.unstable_batchedUpdates)(()=>{null==e||e(l),R({type:"onDragMove",event:l})})},[e7.x,e7.y]),(0,m.useEffect)(()=>{let{active:e,activatorEvent:t,collisions:n,droppableContainers:r,scrollAdjustedTranslate:i}=eR.current;if(!e||null==J.current||!t||!i)return;let{onDragOver:l}=ec.current,a=r.get(tn),s=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,o={active:e,activatorEvent:t,collisions:n,delta:{x:i.x,y:i.y},over:s};(0,M.unstable_batchedUpdates)(()=>{ti(s),null==l||l(o),R({type:"onDragOver",event:o})})},[tn]),T(()=>{eR.current={activatorEvent:el,active:V,activeNode:ej,collisionRect:te,collisions:tt,droppableRects:ew,draggableNodes:_,draggingNode:eP,draggingNodeRect:eA,droppableContainers:Y,over:tr,scrollableAncestors:eV,scrollAdjustedTranslate:e7},X.current={initial:eA,translated:te}},[V,ej,tt,te,_,eP,eA,ew,Y,tr,eV,e7]),function(e){let{acceleration:t,activator:n=u.Pointer,canScroll:r,draggingRect:i,enabled:a,interval:s=5,order:o=d.TreeOrder,pointerCoordinates:c,scrollableAncestors:h,scrollableAncestorRects:f,delta:p,threshold:g}=e,x=function(e){let{delta:t,disabled:n}=e,r=L(t);return A(e=>{if(n||!r||!e)return eL;let i={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[l.Backward]:e.x[l.Backward]||-1===i.x,[l.Forward]:e.x[l.Forward]||1===i.x},y:{[l.Backward]:e.y[l.Backward]||-1===i.y,[l.Forward]:e.y[l.Forward]||1===i.y}}},[n,t,r])}({delta:p,disabled:!a}),[v,b]=function(){let e=(0,m.useRef)(null);return[(0,m.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,m.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=(0,m.useRef)({x:0,y:0}),w=(0,m.useRef)({x:0,y:0}),M=(0,m.useMemo)(()=>{switch(n){case u.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case u.DraggableRect:return i}},[n,i,c]),D=(0,m.useRef)(null),j=(0,m.useCallback)(()=>{let e=D.current;if(!e)return;let t=y.current.x*w.current.x,n=y.current.y*w.current.y;e.scrollBy(t,n)},[]),S=(0,m.useMemo)(()=>o===d.TreeOrder?[...h].reverse():h,[o,h]);(0,m.useEffect)(()=>{if(!a||!h.length||!M){b();return}for(let e of S){if((null==r?void 0:r(e))===!1)continue;let n=f[h.indexOf(e)];if(!n)continue;let{direction:i,speed:a}=function(e,t,n,r,i){let{top:a,left:s,right:o,bottom:u}=n;void 0===r&&(r=10),void 0===i&&(i=eg);let{isTop:d,isBottom:c,isLeft:h,isRight:f}=em(e),p={x:0,y:0},m={x:0,y:0},g={height:t.height*i.y,width:t.width*i.x};return!d&&a<=t.top+g.height?(p.y=l.Backward,m.y=r*Math.abs((t.top+g.height-a)/g.height)):!c&&u>=t.bottom-g.height&&(p.y=l.Forward,m.y=r*Math.abs((t.bottom-g.height-u)/g.height)),!f&&o>=t.right-g.width?(p.x=l.Forward,m.x=r*Math.abs((t.right-g.width-o)/g.width)):!h&&s<=t.left+g.width&&(p.x=l.Backward,m.x=r*Math.abs((t.left+g.width-s)/g.width)),{direction:p,speed:m}}(e,n,M,t,g);for(let e of["x","y"])x[e][i[e]]||(a[e]=0,i[e]=0);if(a.x>0||a.y>0){b(),D.current=e,v(j,s),y.current=a,w.current=i;return}}y.current={x:0,y:0},w.current={x:0,y:0},b()},[t,j,r,b,a,s,JSON.stringify(M),JSON.stringify(x),v,h,S,f,JSON.stringify(g)])}({...eC,delta:q,draggingRect:te,pointerCoordinates:e8,scrollableAncestors:eV,scrollableAncestorRects:eJ});let td=(0,m.useMemo)(()=>({active:V,activeNode:ej,activeNodeRect:ek,activatorEvent:el,collisions:tt,containerNodeRect:eE,dragOverlay:e$,draggableNodes:_,droppableContainers:Y,droppableRects:ew,over:tr,measureDroppableContainers:eM,scrollableAncestors:eV,scrollableAncestorRects:eJ,measuringConfiguration:ey,measuringScheduled:eD,windowRect:eG}),[V,ej,ek,el,tt,eE,e$,_,Y,ew,tr,eM,eV,eJ,ey,eD,eG]),tc=(0,m.useMemo)(()=>({activatorEvent:el,activators:tu,active:V,activeNodeRect:ek,ariaDescribedById:{draggable:eh},dispatch:E,draggableNodes:_,over:tr,measureDroppableContainers:eM}),[el,tu,V,ek,E,eh,_,tr,eM]);return g().createElement(G.Provider,{value:$},g().createElement(eQ.Provider,{value:tc},g().createElement(eZ.Provider,{value:td},g().createElement(e3.Provider,{value:tl},v)),g().createElement(e2,{disabled:(null==p?void 0:p.restoreFocus)===!1})),g().createElement(Q,{...p,hiddenTextDescribedById:eh}))}),e8=(0,m.createContext)(null),e5="button",e6={timeout:25};function e9({size:e=28}){return(0,p.jsxs)("svg",{width:e,height:e,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("defs",{children:(0,p.jsxs)("linearGradient",{id:"g",x1:"0",y1:"0",x2:"1",y2:"1",children:[p.jsx("stop",{offset:"0%",stopColor:"#ff8a8a"}),p.jsx("stop",{offset:"100%",stopColor:"#ff3b3b"})]})}),p.jsx("path",{d:"M44 22c4 1 8 5 8 12 0 10-8 18-20 18S12 44 12 34c0-7 4-11 8-12 3-1 6 0 8 1 2 1 4 1 6 0 2-1 5-2 8-1z",fill:"url(#g)"}),p.jsx("path",{d:"M34 18c-2-6 4-9 8-8-2 5-5 7-8 8z",fill:"#6b7280"}),p.jsx("path",{d:"M34 14c0-2 2-4 4-4",stroke:"#15803d",strokeWidth:"4",strokeLinecap:"round"})]})}function e7({size:e=28,skin:t="#f9c9b6",shirt:n="#93c5fd"}){return(0,p.jsxs)("svg",{width:e,height:e,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("circle",{cx:"32",cy:"22",r:"12",fill:t}),p.jsx("rect",{x:"16",y:"36",width:"32",height:"20",rx:"10",fill:n}),p.jsx("circle",{cx:"26",cy:"24",r:"2",fill:"#111827"}),p.jsx("circle",{cx:"38",cy:"24",r:"2",fill:"#111827"}),p.jsx("path",{d:"M24 30c4 3 12 3 16 0",stroke:"#111827",strokeWidth:"2",strokeLinecap:"round"})]})}r={styles:{active:{opacity:"0"}}},e=>{let{active:t,dragOverlay:n}=e,i={},{styles:l,className:a}=r;if(null!=l&&l.active)for(let[e,n]of Object.entries(l.active))void 0!==n&&(i[e]=t.node.style.getPropertyValue(e),t.node.style.setProperty(e,n));if(null!=l&&l.dragOverlay)for(let[e,t]of Object.entries(l.dragOverlay))void 0!==t&&n.node.style.setProperty(e,t);return null!=a&&a.active&&t.node.classList.add(a.active),null!=a&&a.dragOverlay&&n.node.classList.add(a.dragOverlay),function(){for(let[e,n]of Object.entries(i))t.node.style.setProperty(e,n);null!=a&&a.active&&t.node.classList.remove(a.active)}};class te{setEnabled(e){this.enabled=e}ensure(){}tone(e,t=.12,n="sine",r=.2){if(!this.enabled||(this.ensure(),!this.ctx))return;let i=this.ctx.createOscillator(),l=this.ctx.createGain();i.type=n,i.frequency.value=e,l.gain.value=r,i.connect(l).connect(this.ctx.destination),i.start(),l.gain.exponentialRampToValueAtTime(1e-4,this.ctx.currentTime+t),i.stop(this.ctx.currentTime+t)}success(){this.tone(660,.08,"triangle",.25),setTimeout(()=>this.tone(880,.1,"triangle",.22),60)}error(){this.tone(200,.12,"sawtooth",.2),setTimeout(()=>this.tone(150,.14,"sawtooth",.18),60)}drag(){this.tone(500,.05,"sine",.05)}drop(){this.tone(420,.06,"square",.08)}levelUp(){this.tone(523,.08,"triangle",.2),setTimeout(()=>this.tone(659,.08,"triangle",.18),70),setTimeout(()=>this.tone(783,.12,"triangle",.16),140)}constructor(){this.enabled=!0}}let tt=new te;function tn({id:e,children:t}){let{attributes:n,listeners:r,setNodeRef:i,transform:l,isDragging:a}=function(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e,l=I("Draggable"),{activators:a,activatorEvent:s,active:o,activeNodeRect:u,ariaDescribedById:d,draggableNodes:c,over:h}=(0,m.useContext)(eQ),{role:f=e5,roleDescription:p="draggable",tabIndex:g=0}=null!=i?i:{},x=(null==o?void 0:o.id)===t,v=(0,m.useContext)(x?e3:e8),[b,y]=z(),[w,M]=z(),D=(0,m.useMemo)(()=>a.reduce((e,n)=>{let{eventName:r,handler:i}=n;return e[r]=e=>{i(e,t)},e},{}),[a,t]),j=P(n);return T(()=>(c.set(t,{id:t,key:l,node:b,activatorNode:w,data:j}),()=>{let e=c.get(t);e&&e.key===l&&c.delete(t)}),[c,t]),{active:o,activatorEvent:s,activeNodeRect:u,attributes:(0,m.useMemo)(()=>({role:f,tabIndex:g,"aria-disabled":r,"aria-pressed":!!x&&f===e5||void 0,"aria-roledescription":p,"aria-describedby":d.draggable}),[r,f,g,x,p,d.draggable]),isDragging:x,listeners:r?void 0:D,node:b,over:h,setNodeRef:y,setActivatorNodeRef:M,transform:v}}({id:String(e)}),s=l?{transform:`translate3d(${l.x}px, ${l.y}px, 0)`}:{};return p.jsx("div",{ref:i,...r,...n,style:s,className:b(a&&"opacity-70"),children:t})}function tr({id:e,className:t,style:n,children:r}){let{isOver:l,setNodeRef:a}=function(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:l}=e,a=I("Droppable"),{active:s,dispatch:o,over:u,measureDroppableContainers:d}=(0,m.useContext)(eQ),c=(0,m.useRef)({disabled:n}),h=(0,m.useRef)(!1),f=(0,m.useRef)(null),p=(0,m.useRef)(null),{disabled:g,updateMeasurementsFor:x,timeout:v}={...e6,...l},b=P(null!=x?x:r),y=eB({callback:(0,m.useCallback)(()=>{if(!h.current){h.current=!0;return}null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(b.current)?b.current:[b.current]),p.current=null},v)},[v]),disabled:g||!s}),[w,M]=z((0,m.useCallback)((e,t)=>{y&&(t&&(y.unobserve(t),h.current=!1),e&&y.observe(e))},[y])),D=P(t);return(0,m.useEffect)(()=>{y&&w.current&&(y.disconnect(),h.current=!1,y.observe(w.current))},[w,y]),(0,m.useEffect)(()=>(o({type:i.RegisterDroppable,element:{id:r,key:a,disabled:n,node:w,rect:f,data:D}}),()=>o({type:i.UnregisterDroppable,key:a,id:r})),[r]),(0,m.useEffect)(()=>{n!==c.current.disabled&&(o({type:i.SetDroppableDisabled,id:r,key:a,disabled:n}),c.current.disabled=n)},[r,a,n,o]),{active:s,rect:f,isOver:(null==u?void 0:u.id)===r,node:w,over:u,setNodeRef:M}}({id:e});return p.jsx("div",{ref:a,className:b(t,l&&"ring-2 ring-brand/50"),style:n,children:r})}var ti=n(3933);function tl({a:e,b:t,mistake:n,onReady:r,mistakes:i,maxH:l}){(0,ti.Q)();let a="he"===(0,v.g)(e=>e.profile.language||"en"),s=e*t,[o,u]=(0,m.useState)(()=>[]),[d,c]=(0,m.useState)(()=>{let n=Array.from({length:s},(e,t)=>t),r=Array.from({length:e},()=>[]),i=0;for(let l=0;l<e;l++)for(let e=0;e<t;e++)r[l].push(n[i++]);return r}),[h,f]=(0,m.useState)(!1),[g,x]=(0,m.useState)(null),[b,y]=(0,m.useState)(-1);(0,m.useRef)(null),(0,m.useRef)(0),(0,m.useRef)(null),(0,m.useRef)(-1),(0,m.useRef)(!1);let w=(0,m.useRef)(null),[M,D]=(0,m.useState)(0),j=(0,m.useMemo)(()=>e>=6&&M<420?Math.min(4,e):Math.min(3,e),[e,M]),S=Math.min(10,t),C=M>0?Math.floor((M-12*(j-1))/Math.max(j,1)):320,N=(0,m.useMemo)(()=>{let n=Math.max(24,Math.min(140,Math.floor((C-8*(S-1))/Math.max(S,1))));if(!l||l<=0)return n;let r=24,i=n,a=24;for(;r<=i;){let n=Math.floor((r+i)/2);(function(n){let r=Math.ceil(t/S),i=Math.ceil(e/j);return 48+n+12+(i*(Math.round(.9*n)+8+(r*n+8*Math.max(0,r-1))+24)+12*Math.max(0,i-1))})(n)<=l?(a=n,r=n+1):i=n-1}return a},[C,S,e,t,j,8,12,l]),k=Math.max(20,Math.round(.75*N)),E=(0,m.useMemo)(()=>Math.round(1.3*N),[N]);(0,m.useMemo)(()=>Math.max(8,Math.round(.6*E)),[E]);let R=(0,m.useMemo)(()=>Math.max(12,Math.round(1.2*E)),[E]),T=(0,m.useMemo)(()=>Math.max(6,Math.round(.4*E)),[E]),$=(0,m.useMemo)(()=>Math.max(12,Math.round(.8*E)),[E]);return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){if("number"==typeof i&&i>=1)return;let n=Number(e.active.id),r=e.over?.id;if(!r)return;tt.drop();let l=d.findIndex(e=>e.includes(n)),a=-1===l;if("pool"===r){a||(c(e=>e.map((e,t)=>t===l?e.filter(e=>e!==n):e)),u(e=>[...e,n]));return}if(r.startsWith("group-")){let e=parseInt(r.split("-")[1]);if(isNaN(e)||d[e].length>=t)return;if(a)u(e=>e.filter(e=>e!==n)),c(t=>t.map((t,r)=>r===e?[...t,n]:t));else{if(l===e)return;c(t=>t.map((t,r)=>r===l?t.filter(e=>e!==n):r===e?[...t,n]:t))}}},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[a?"paddingRight":"paddingLeft"]:R,paddingTop:T},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} text-gray-400`,style:{fontSize:E},children:"\uD83E\uDDFA"}),p.jsx(tr,{id:"pool",className:`flex flex-nowrap items-center overflow-x-auto gap-2 ${h||"number"==typeof i&&i>=1?"pointer-events-none opacity-95":""}`,style:{minHeight:Math.max(N,E+8)},children:o.map((e,t)=>p.jsx(tn,{id:e,children:(0,p.jsxs)("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${g===e?"animate-pop":""} relative`,style:{width:N,height:N},children:[p.jsx(e9,{size:k}),"number"==typeof i&&(i>=3?p.jsx("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:t+1}):i>=2?(0,p.jsxs)(p.Fragment,{children:[p.jsx("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:t<b?String(t+1):t===s-1?"?":""}),t===Math.min(b,s-1)&&p.jsx("span",{className:`absolute ${a?"-right-6":"-left-6"} top-[35%] pointer-events-none text-2xl z-50 ${a?"animate-pointer-rtl":"animate-pointer"}`,children:a?"\uD83D\uDC48":"\uD83D\uDC49"})]}):1===i&&0===t?p.jsx("span",{className:`absolute ${a?"-right-6":"-left-6"} top-[35%] pointer-events-none text-2xl z-50 ${a?"animate-pointer-rtl":"animate-pointer"}`,children:a?"\uD83D\uDC48":"\uD83D\uDC49"}):null)]})},e))})]}),p.jsx("div",{ref:w,className:`grid gap-3 ${h||"number"==typeof i&&i>=1?"pointer-events-none opacity-95":""}`,style:{gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`},children:d.map((e,n)=>(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[a?"paddingRight":"paddingLeft"]:$,paddingTop:T},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} opacity-80`,children:p.jsx(e7,{size:Math.round(1.3*N)})}),(0,p.jsxs)(tr,{id:`group-${n}`,className:"flex flex-wrap gap-2",style:{minHeight:Math.max(N,E+8)},children:[e.map((e,t)=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${g===e?"animate-pop":""} relative`,style:{width:N,height:N},children:p.jsx(e9,{size:k})})},e)),Array.from({length:Math.max(0,t-e.length)}).map((e,t)=>p.jsx("div",{className:"rounded-xl border border-gray-200",style:{width:N,height:N}},t))]})]},n))})]})})}function ta({a:e,b:t,mistake:n,onReady:r,mistakes:i,maxH:l}){(0,ti.Q)();let a="he"===(0,v.g)(e=>e.profile.language||"en"),s=Math.floor(e/t),[o,u]=(0,m.useState)(()=>Array.from({length:e},(e,t)=>t)),[d,c]=(0,m.useState)(()=>Array.from({length:t},()=>[])),[h,f]=(0,m.useState)(!1),[g,x]=(0,m.useState)(null),[b,y]=(0,m.useState)(-1);(0,m.useRef)(null),(0,m.useRef)(0),(0,m.useRef)(null),(0,m.useRef)(-1),(0,m.useRef)(!1);let w=(0,m.useRef)(null),[M,D]=(0,m.useState)(0),j=(0,m.useMemo)(()=>t>=6&&M<420?Math.min(4,t):Math.min(3,t),[t,M]),S=Math.min(10,s),C=M>0?Math.floor((M-12*(j-1))/Math.max(j,1)):320,N=(0,m.useMemo)(()=>{let e=Math.max(24,Math.min(140,Math.floor((C-8*(S-1))/Math.max(S,1))));if(!l||l<=0)return e;let n=24,r=e,i=24;for(;n<=r;){let e=Math.floor((n+r)/2);(function(e){let n=Math.ceil(s/S),r=Math.ceil(t/j);return 48+e+12+(r*(Math.round(.9*e)+8+(n*e+8*Math.max(0,n-1))+24)+12*Math.max(0,r-1))})(e)<=l?(i=e,n=e+1):r=e-1}return i},[C,S,s,t,j,8,12,l]),k=Math.max(20,Math.round(.75*N)),E=(0,m.useMemo)(()=>Math.round(1.3*N),[N]);(0,m.useMemo)(()=>Math.max(8,Math.round(.6*E)),[E]);let R=(0,m.useMemo)(()=>Math.max(12,Math.round(1.2*E)),[E]),T=(0,m.useMemo)(()=>Math.max(6,Math.round(.4*E)),[E]),$=(0,m.useMemo)(()=>Math.max(12,Math.round(.8*E)),[E]);return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){if("number"==typeof i&&i>=1)return;let t=Number(e.active.id),n=e.over?.id;if(!n)return;tt.drop();let r=d.findIndex(e=>e.includes(t)),l=-1===r;if("pool"===n){l||(c(e=>e.map((e,n)=>n===r?e.filter(e=>e!==t):e)),u(e=>[...e,t]));return}if(n.startsWith("friend-")){let e=parseInt(n.split("-")[1]);if(isNaN(e)||d[e].length>=s)return;if(l)u(e=>e.filter(e=>e!==t)),c(n=>n.map((n,r)=>r===e?[...n,t]:n));else{if(r===e)return;c(n=>n.map((n,i)=>i===r?n.filter(e=>e!==t):i===e?[...n,t]:n))}}},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[a?"paddingRight":"paddingLeft"]:R,paddingTop:T},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} text-gray-400`,style:{fontSize:E},children:"\uD83D\uDDC3️"}),p.jsx(tr,{id:"pool",className:`flex flex-nowrap items-center overflow-x-auto gap-2 ${"number"==typeof i&&i>=1?"pointer-events-none opacity-95":""}`,style:{minHeight:Math.max(N,E+8)},children:o.map(e=>p.jsx(tn,{id:e,children:p.jsx("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${g===e?"animate-pop":""}`,style:{width:N,height:N},children:p.jsx(e9,{size:k})})},e))})]}),p.jsx("div",{ref:w,className:`grid gap-3 ${h||"number"==typeof i&&i>=1?"pointer-events-none opacity-95":""}`,style:{gridTemplateColumns:`repeat(${j}, minmax(0, 1fr))`},children:d.map((e,t)=>(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[a?"paddingRight":"paddingLeft"]:$,paddingTop:T},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} opacity-80`,children:p.jsx(e7,{size:Math.round(1.3*N)})}),(0,p.jsxs)(tr,{id:`friend-${t}`,className:"flex flex-wrap gap-2",style:{minHeight:Math.max(N,E+8)},children:[e.map((e,n)=>p.jsx(tn,{id:e,children:(0,p.jsxs)("div",{className:`rounded-xl grid place-items-center bg-white shadow-soft ${g===e?"animate-pop":""} relative`,style:{width:N,height:N},children:[p.jsx(e9,{size:k}),"number"==typeof i&&(i>=3||i>=2&&0===t)&&p.jsx("span",{className:"absolute inset-0 grid place-items-center text-sm sm:text-base lg:text-lg font-black text-white num-stroke",children:i>=3?String(n+1):n<b?String(n+1):n===s-1?"?":""}),"number"==typeof i&&2===i&&0===t&&n===Math.min(b,s-1)&&p.jsx("span",{className:`absolute ${a?"-right-6":"-left-6"} top-[35%] pointer-events-none text-2xl z-50 ${a?"animate-pointer-rtl":"animate-pointer"}`,children:a?"\uD83D\uDC48":"\uD83D\uDC49"}),"number"==typeof i&&1===i&&0===t&&0===n&&p.jsx("span",{className:`absolute ${a?"-right-6":"-left-6"} top-[35%] pointer-events-none text-2xl z-50 ${a?"animate-pointer-rtl":"animate-pointer"}`,children:a?"\uD83D\uDC48":"\uD83D\uDC49"})]})},e)),Array.from({length:Math.max(0,s-e.length)}).map((e,t)=>p.jsx("div",{className:"rounded-xl border border-gray-200",style:{width:N,height:N}},t))]})]},t))})]})})}function ts({size:e=28}){let t=Math.max(1,Math.round(.04*e)),n=Math.round(e/2);return(0,p.jsxs)("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,xmlns:"http://www.w3.org/2000/svg",children:[p.jsx("defs",{children:(0,p.jsxs)("radialGradient",{id:"gold",cx:"50%",cy:"40%",r:"70%",children:[p.jsx("stop",{offset:"0%",stopColor:"#fde68a"}),p.jsx("stop",{offset:"60%",stopColor:"#fbbf24"}),p.jsx("stop",{offset:"100%",stopColor:"#f59e0b"})]})}),p.jsx("circle",{cx:n,cy:n,r:n-t,fill:"url(#gold)",stroke:"#b45309",strokeWidth:t}),p.jsx("circle",{cx:n,cy:n,r:Math.round(.55*n),fill:"none",stroke:"#d97706",strokeWidth:t})]})}function to({count:e=1,size:t=40}){let n=Math.round(.8*t),r=Math.round(.2*t),i=Array.from({length:Math.min(5,Math.max(1,e))}),l=n+r*(i.length-1);return p.jsx("div",{style:{width:t,height:"100%",position:"relative"},children:p.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:p.jsx("div",{style:{position:"relative",width:n,height:l},children:i.map((e,t)=>p.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:t*r,display:"grid",placeItems:"center"},children:p.jsx(ts,{size:n})},t))})})})}function tu(e){let t=[],n=Math.max(0,Math.floor(e)),r=e=>{e>=1&&t.push(Math.min(5,Math.max(1,e)))};for(;n>=5;)r(5),n-=5;for(let e of[4,3,2,1])for(;n>=e;)r(e),n-=e;return t}function td({count:e,size:t,overlayNumbers:n,pointerIndex:r,rtl:i,questionIndex:l}){let a=tu(e),s=Math.max(20,Math.min(t,40)),o=Math.round(.8*s),u=Math.max(2,Math.round(.2*s)),d=e=>o+u*(e-1),c=d(5);return p.jsx("div",{className:"flex flex-wrap items-center gap-1",style:{minHeight:c},children:a.map((e,t)=>(0,p.jsxs)("div",{className:"relative rounded-md bg-white shadow-soft grid place-items-center",style:{width:s,height:d(e)},children:[p.jsx(to,{count:e,size:s}),n&&"number"==typeof n[t]&&p.jsx("span",{className:"absolute inset-0 grid place-items-center text-xs sm:text-sm lg:text-base font-black text-white num-stroke",children:n[t]}),"number"==typeof l&&l===t&&!(n&&"number"==typeof n[t])&&p.jsx("span",{className:"absolute inset-0 grid place-items-center text-xs sm:text-sm lg:text-base font-black text-white num-stroke",children:"?"}),"number"==typeof r&&r===t&&p.jsx("span",{className:`absolute ${i?"-right-6":"-left-6"} top-[35%] pointer-events-none text-2xl z-50 ${i?"animate-pointer-rtl":"animate-pointer"}`,children:i?"\uD83D\uDC48":"\uD83D\uDC49"})]},t))})}function tc({a:e,b:t,mistake:n,onReady:r,mistakes:i,maxH:l}){(0,ti.Q)();let a="he"===(0,v.g)(e=>e.profile.language||"en"),s=e*t,[o,u]=(0,m.useState)(()=>0),[d,c]=(0,m.useState)(()=>Array.from({length:e},()=>t)),[h,f]=(0,m.useState)(null),g=(0,m.useRef)(0);(0,m.useRef)(null),(0,m.useRef)(0),(0,m.useRef)(!1);let x=(0,m.useMemo)(()=>e>=8?5:e>=6?4:Math.min(3,e),[e]),b=(0,m.useMemo)(()=>e>=8?32:e>=6?36:40,[e]),y=(0,m.useMemo)(()=>tu(o),[o]),w=(0,m.useMemo)(()=>{if("number"==typeof i&&0!==y.length){if(i>=3){let e=0;return y.map(t=>e+=t)}if(2===i){let e=0;return y.map((t,n)=>n<y.length-1?e+=t:void 0)}}},[i,y]),M=(0,m.useMemo)(()=>{if("number"==typeof i&&2===i&&y.length>0)return y.length-1},[i,y]),D=(0,m.useMemo)(()=>{if("number"==typeof i&&0!==y.length){if(1===i)return 0;if(2===i)return y.length-1}},[i,y]),j=(0,m.useMemo)(()=>Math.round(.8*b),[b]),S=(0,m.useMemo)(()=>Math.max(2,Math.round(.2*b)),[b]),C=e=>j+S*(e-1),N=(0,m.useMemo)(()=>C(5),[j,S]),k=(0,m.useMemo)(()=>Math.round(1.3*b),[b]),E=(0,m.useMemo)(()=>Math.max(8,Math.round(.6*k)),[k]),R=(0,m.useMemo)(()=>Math.max(12,Math.round(1.2*k)),[k]);return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){if("number"==typeof i&&i>=1)return;let t=e.over?.id;if(!t||(tt.drop(),"pool"!==t))return;let n=String(e.active.id);if(!n.startsWith("g-"))return;let r=parseInt(n.split("-")[1]);!isNaN(r)&&(d[r]<=0||(c(e=>e.map((e,t)=>t===r?Math.max(0,e-1):e)),u(e=>Math.min(s,e+1)),f(g.current++)))},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[a?"paddingRight":"paddingLeft"]:R},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} text-gray-400`,style:{fontSize:k},children:"\uD83D\uDDC3️"}),p.jsx(tr,{id:"pool",className:`flex flex-nowrap items-center overflow-x-auto gap-2 py-1 ${"number"==typeof i&&i>=1?"pointer-events-none opacity-95":""}`,style:{minHeight:N},children:p.jsx(td,{count:o,size:b,overlayNumbers:w,questionIndex:M,pointerIndex:D,rtl:a})})]}),p.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${x}, minmax(0, 1fr))`},children:d.map((e,t)=>(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[a?"paddingRight":"paddingLeft"]:E},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} opacity-80`,children:p.jsx(e7,{size:Math.round(1.3*b)})}),p.jsx(tr,{id:`group-${t}`,className:"grid place-items-center py-1",style:{minHeight:N},children:tu(e).map((e,n)=>{let r=C(e);return p.jsx("div",{className:"relative rounded-md bg-white shadow-soft",style:{width:b,height:r},children:p.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:p.jsx("div",{style:{position:"relative",width:j,height:r},children:Array.from({length:e}).map((r,i)=>{let l=`g-${t}-s-${n}-c-${i}-${h??0}`;return p.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:i*S,display:"grid",placeItems:"center",zIndex:10+i},children:p.jsx(tn,{id:l,children:p.jsx("div",{className:`grid place-items-center ${i===e-1?"animate-pop":""}`,style:{width:j,height:j},children:p.jsx(ts,{size:j})})})},l)})})})},`g-${t}-s-${n}-${h??0}`)})})]},t))})]})})}function th({a:e,b:t,mistake:n,onReady:r,mistakes:i,maxH:l}){(0,ti.Q)();let a="he"===(0,v.g)(e=>e.profile.language||"en"),s=Math.floor(e/t),[o,u]=(0,m.useState)(()=>e),[d,c]=(0,m.useState)(()=>Array.from({length:t},()=>0)),[h,f]=(0,m.useState)(null),g=(0,m.useRef)(0);(0,m.useRef)(null),(0,m.useRef)(0),(0,m.useRef)(!1);let x=(0,m.useMemo)(()=>t>=8?5:t>=6?4:Math.min(3,t),[t]),b=(0,m.useMemo)(()=>t>=8?32:t>=6?36:40,[t]),y=(0,m.useMemo)(()=>tu(o),[o]),w=(0,m.useMemo)(()=>"number"!=typeof i?[]:d.map((e,t)=>{let n=tu(e);if(i>=3){let e=0;return n.map(t=>e+=t)}if(2===i&&0===t){if(0===n.length)return;let e=0;return n.map((t,r)=>r<n.length-1?e+=t:void 0)}}),[i,d]),M=(0,m.useMemo)(()=>"number"!=typeof i?[]:d.map((e,t)=>{let n=tu(e);if(2===i&&0===t&&n.length>0)return n.length-1}),[i,d]),D=(0,m.useMemo)(()=>"number"!=typeof i?[]:d.map((e,t)=>{let n=tu(e);if(0===t&&0!==n.length){if(1===i)return 0;if(2===i)return n.length-1}}),[i,d]),j=(0,m.useMemo)(()=>Math.round(.8*b),[b]),S=(0,m.useMemo)(()=>Math.max(2,Math.round(.2*b)),[b]),C=e=>j+S*(e-1),N=(0,m.useMemo)(()=>C(5),[j,S]),k=(0,m.useMemo)(()=>Math.round(1.3*b),[b]),E=(0,m.useMemo)(()=>Math.max(8,Math.round(.6*k)),[k]),R=(0,m.useMemo)(()=>Math.max(12,Math.round(1.2*k)),[k]);return p.jsx(e4,{onDragStart:function(){tt.drag()},onDragEnd:function(e){if("number"==typeof i&&i>=1)return;let t=e.over?.id;if(!t||(tt.drop(),!t.startsWith("friend-")))return;let n=parseInt(t.split("-")[1]);isNaN(n)||d[n]>=s||o<=0||(u(e=>Math.max(0,e-1)),c(e=>e.map((e,t)=>t===n?Math.min(s,e+1):e)),f(g.current++))},children:(0,p.jsxs)("div",{className:`grid grid-cols-1 gap-3 ${n?"ring-2 ring-red-300 ring-offset-2":""}`,children:[(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-2",style:{[a?"paddingRight":"paddingLeft"]:R},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} text-gray-400`,style:{fontSize:k},children:"\uD83D\uDDC3️"}),p.jsx(tr,{id:"pool",className:`flex flex-nowrap items-center overflow-x-auto gap-2 py-1 ${"number"==typeof i&&i>=1?"pointer-events-none opacity-95":""}`,style:{minHeight:N},children:y.map((e,t)=>{let n=C(e);return p.jsx("div",{className:"relative rounded-md bg-white shadow-soft",style:{width:b,height:n},children:p.jsx("div",{style:{position:"absolute",inset:0,display:"grid",placeItems:"center"},children:p.jsx("div",{style:{position:"relative",width:j,height:n},children:Array.from({length:e}).map((n,r)=>{let i=`p-${t}-${r}-${h??0}`;return p.jsx("div",{style:{position:"absolute",left:0,right:0,bottom:r*S,display:"grid",placeItems:"center",zIndex:10+r},children:p.jsx(tn,{id:i,children:p.jsx("div",{className:`grid place-items-center ${r===e-1?"animate-pop":""}`,style:{width:j,height:j},children:p.jsx(ts,{size:j})})})},i)})})})},`s-${t}-${h??0}`)})})]}),p.jsx("div",{className:"grid gap-3",style:{gridTemplateColumns:`repeat(${x}, minmax(0, 1fr))`},children:d.map((e,t)=>(0,p.jsxs)("div",{className:"relative border border-gray-300 rounded-xl p-1",style:{[a?"paddingRight":"paddingLeft"]:E},children:[p.jsx("span",{className:`pointer-events-none absolute top-1 ${a?"right-1":"left-1"} opacity-80`,children:p.jsx(e7,{size:Math.round(1.3*b)})}),p.jsx(tr,{id:`friend-${t}`,className:"grid place-items-center py-1",children:p.jsx(td,{count:e,size:b,overlayNumbers:w[t],questionIndex:M[t],pointerIndex:D[t],rtl:a})})]},t))})]})})}function tf(){let e=(0,v.g)(),t=e.current,[n,r]=(0,m.useState)(!1),[i,l]=(0,m.useState)(0),[a,s]=(0,m.useState)(!1),o=(0,m.useRef)(null),u=(0,m.useRef)(null),[d,c]=(0,m.useState)(0),h=(0,m.useMemo)(()=>t?"multiply-groups"===t.game?p.jsx(tl,{a:t.a,b:t.b,mistake:n,mistakes:i,onReady:g,maxH:d},t.id):"division-dealer"===t.game?p.jsx(ta,{a:t.a,b:t.b,mistake:n,onReady:g,mistakes:i,maxH:d},t.id):"coins-multiply-groups"===t.game?p.jsx(tc,{a:t.a,b:t.b,mistake:n,mistakes:i,onReady:g,maxH:d},t.id):"coins-division-dealer"===t.game?p.jsx(th,{a:t.a,b:t.b,mistake:n,onReady:g,mistakes:i,maxH:d},t.id):null:null,[t,n,i,d]);if(!t)return null;function f(n){if(!t)return;let i=n===t.answer;if(i?tt.success():tt.error(),!i){r(!0),l(e=>e+1),s(!0);return}r(!1),e.answer(n)}function g(){s(!1),r(!1)}let b=Math.min(100,Math.round(e.sessionCorrect%10/10*100));return(0,p.jsxs)("main",{className:"game-screen flex flex-col",children:[(0,p.jsxs)("div",{className:"px-4 pt-4",children:[(0,p.jsxs)("header",{className:"flex items-center justify-between",children:[p.jsx(x.default,{href:"/menu",className:"text-xl px-3 py-1 rounded-lg border bg-white shadow-soft active:scale-95 select-none",children:"☰"}),(0,p.jsxs)("div",{className:"flex items-center gap-2",children:[(0,p.jsxs)("div",{className:"text-xs bg-white px-2 py-1 rounded-lg border flex items-center gap-1",children:["\uD83C\uDFC5 ",p.jsx("span",{className:"font-bold",children:e.profile.level})]}),(0,p.jsxs)("span",{className:"text-xs bg-white px-2 py-1 rounded-lg border",children:["⭐ ",e.profile.points]}),p.jsx("button",{onClick:()=>e.toggleSound(),className:`text-xs px-2 py-1 rounded-lg border ${e.profile.soundOn?"bg-green-50":"bg-red-50"}`,children:e.profile.soundOn?"\uD83D\uDD0A":"\uD83D\uDD07"})]})]}),p.jsx("div",{className:"progress mt-2",children:p.jsx("div",{className:"bar bg-brand",style:{width:`${b}%`}})})]}),p.jsx("section",{className:"flex-1 overflow-hidden px-4 py-1",children:(0,p.jsxs)("div",{ref:o,className:"card h-full p-3 game-area overflow-hidden flex flex-col items-center",children:[p.jsx("div",{ref:u,className:"text-center mb-4 mt-2",children:(0,p.jsxs)("div",{dir:"ltr",className:"text-4xl sm:text-5xl font-black tracking-tight",children:[t.a," ","mul"===t.op?"\xd7":"\xf7"," ",t.b]})}),p.jsx("div",{className:"w-full",children:h})]})}),p.jsx("section",{className:"px-4 pb-5",children:"mc"===t.input?p.jsx(y,{values:t.choices,correct:t.answer,onSelect:f,disabled:a,highlightCorrect:i>=3}):p.jsx(w,{min:0,max:100,onPick:f,disabled:a,correct:t.answer,highlightCorrect:i>=3})})]})}},6817:(e,t,n)=>{"use strict";n.d(t,{ThemeEffect:()=>i}),n(7577);var r=n(8490);function i(){return(0,r.g)(e=>e.profile.theme),(0,r.g)(e=>e.profile.language||"en"),null}},3933:(e,t,n)=>{"use strict";n.d(t,{Q:()=>l});var r=n(8490);let i={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",themeBuzz:"Buzz",themeBarbie:"Barbie",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"MathTik",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",themeBuzz:"Базз",themeBarbie:"Барби",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"MathTik",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",themeBuzz:"באז",themeBarbie:"ברבי",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function l(){let e=(0,r.g)(e=>e.profile.language||"en");return t=>i[e][t]}},8490:(e,t,n)=>{"use strict";n.d(t,{O:()=>u,g:()=>f});var r=n(114),i=n(5251);let l=e=>Math.floor(Math.random()*e),a=(e,t,n)=>Math.max(t,Math.min(n,e)),s=(e,t,n)=>"mul"===e?`m:${t}x${n}`:`d:${t}/${n}`;function o(){return Math.floor(Date.now()/1e3)}let u=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],d={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"buzz"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function c(e){let t=Math.max(5,e),n=l(t)+1,r=t>=5?l(t-4)+5:5;return{op:"mul",a:n,b:r,answer:n*r}}function h(e){let t=Math.max(5,e),n=l(t)+1,r=t>=5?l(t-4)+5:5;return{op:"div",a:n*r,b:n,answer:r}}let f=(0,r.Ue)()((0,i.tJ)((e,t)=>({...d,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let n;let r=t(),i=a(r.profile.maxFactor,2,10);if(r.recentMistakes.length){let[e,t]=r.recentMistakes.shift().split(":"),[i,l]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);n={op:"m"===e?"mul":"div",a:i,b:l}}else{let e=Object.values(r.mastery).find(e=>e.dueAt<=o());if(e){let[t,r]=e.key.split(":"),[i,l]=r.includes("x")?r.split("x").map(Number):r.split("/").map(Number);n={op:"m"===t?"mul":"div",a:i,b:l}}}let s=function(e,t,n){var r,i,a;let s=n?{op:n.op,a:n.a,b:n.b,answer:"mul"===n.op?n.a*n.b:Math.floor(n.a/n.b)}:.5>Math.random()?c(e):h(e),o=!n&&t&&.5>Math.random()?"mul"===t?h(e):c(e):s;return{id:`${o.op}:${o.a}:${o.b}:${Date.now()}`,op:o.op,a:o.a,b:o.b,answer:o.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let n=l(9)-4,r=Math.max(0,e+n+(0===n?l(3)+1:0));t.add(r)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}([...t])}(o.answer),game:(r=o.op,i=o.a,a=o.b,"mul"===r?a>4?"coins-multiply-groups":"multiply-groups":Math.floor(i/a)>4?"coins-division-dealer":"division-dealer"),input:.75>Math.random()?"mc":"wheel"}}(i,r.lastOp,n);e({current:s,startedAt:Date.now(),lastOp:s.op})},answer:n=>{let r=t(),i=r.current;if(!i)return;let l=n===i.answer;Date.now(),r.startedAt??Date.now();let d=s(i.op,i.a,i.b),c=r.mastery[d],h=function(e,t){let n=o();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:n+10,lastResult:t};let r=a(e.score+(t?1:-2),0,5),i=a(e.ease+(t?.08:-.2),1.2,2.6),l=t?Math.max(10,Math.round(e.intervalSec*i)):10;return{...e,score:r,ease:i,intervalSec:l,dueAt:n+l,lastResult:t}}(c&&{...c,key:d},l);h.key=d;let f=Math.min(10,Math.max(0,2*r.profile.streak)),p={...r.profile};if(p.totalAttempts+=1,l)for(let e of(p.totalCorrect+=1,p.streak+=1,p.bestStreak=Math.max(p.bestStreak,p.streak),p.points+=10+f,p.streak%4==0&&(p.maxFactor=a(p.maxFactor+1,2,10),p.level=Math.max(p.level,p.maxFactor)),u))p.points>=e.cost&&(p.unlocked[e.id]=!0);else{p.streak=0,p.maxFactor=a(p.maxFactor-1,2,10),p.level=Math.max(1,p.maxFactor);let t="mul"===i.op?`m:${i.a}x${i.b}`:`d:${i.a}/${i.b}`,n=r.recentMistakes.slice();n.includes(t)||n.push(t),e({recentMistakes:n})}e({profile:p,mastery:{...r.mastery,[h.key]:h},sessionAttempts:(r.sessionAttempts??0)+1,sessionCorrect:(r.sessionCorrect??0)+(l?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},5349:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s,metadata:()=>l,viewport:()=>a});var r=n(9510);n(7272);let i=(0,n(8570).createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/ThemeEffect.tsx#ThemeEffect`),l={title:"MathTik",description:"MathTik — Multiply & Divide with fun mini-games"},a={width:"device-width",initialScale:1,maximumScale:1,minimumScale:1,userScalable:!1};function s({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,r.jsxs)("body",{children:[r.jsx(i,{}),r.jsx("div",{className:"min-h-screen bg-[var(--bg)]",children:e})]})})}},1871:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});let r=(0,n(8570).createProxy)(String.raw`/Users/ais/Projects/edugames/app/play/page.tsx#default`)},4697:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(6621);let i=e=>[{type:"image/svg+xml",sizes:"any",url:(0,r.fillMetadataSegment)(".",e.params,"icon.svg")+"?2c021bb99e44f577"}]},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[948,807,621,434],()=>n(1201));module.exports=r})();