(()=>{var e={};e.id=178,e.ids=[178],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},3889:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(4591),s(5624),s(5866);var r=s(3191),a=s(8716),i=s(7922),l=s.n(i),n=s(5231),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(t,o);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4591)),"/Users/ais/Projects/edugames/app/profile/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5624)),"/Users/ais/Projects/edugames/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/ais/Projects/edugames/app/profile/page.tsx"],m="/profile/page",x={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6440:(e,t,s)=>{Promise.resolve().then(s.bind(s,2195)),Promise.resolve().then(s.bind(s,6817))},8801:(e,t,s)=>{Promise.resolve().then(s.bind(s,9776))},4667:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},9776:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(326),a=s(7577),i=s(8490);function l(){let e=(0,i.g)(),t=(0,a.useMemo)(()=>{let t=Object.values(e.mastery),s=t.filter(e=>e.dueAt<=Math.floor(Date.now()/1e3)).length,r=t.filter(e=>e.score>=4).length,a=t.filter(e=>e.score<=1).length;return{total:t.length,due:s,strong:r,weak:a}},[e.mastery]);return(0,r.jsxs)("main",{className:"container pt-6 pb-24",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between",children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Profile"}),(0,r.jsxs)("div",{className:"text-sm bg-white px-3 py-1 rounded-xl border",children:["Lvl ",e.profile.level]})]}),(0,r.jsxs)("section",{className:"card p-4 mt-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"text-5xl",children:"\uD83D\uDE42"}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-extrabold",children:"Math Explorer"}),(0,r.jsxs)("div",{className:"text-xs text-gray-500",children:["Facts up to \xd7",e.profile.maxFactor]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2 mt-4 text-center",children:[(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Points"}),r.jsx("div",{className:"text-xl font-extrabold",children:e.profile.points})]}),(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Streak"}),r.jsx("div",{className:"text-xl font-extrabold",children:e.profile.streak})]}),(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Best"}),r.jsx("div",{className:"text-xl font-extrabold",children:e.profile.bestStreak})]})]})]}),(0,r.jsxs)("section",{className:"card p-4 mt-3",children:[r.jsx("div",{className:"font-bold",children:"Mastery"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 mt-2 text-center",children:[(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Tracked"}),r.jsx("div",{className:"text-lg font-extrabold",children:t.total})]}),(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Due"}),r.jsx("div",{className:"text-lg font-extrabold",children:t.due})]}),(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Strong"}),r.jsx("div",{className:"text-lg font-extrabold text-good",children:t.strong})]}),(0,r.jsxs)("div",{className:"bg-white border rounded-xl p-3",children:[r.jsx("div",{className:"text-xs text-gray-500",children:"Weak"}),r.jsx("div",{className:"text-lg font-extrabold text-bad",children:t.weak})]})]})]})]})}},2195:(e,t,s)=>{"use strict";s.d(t,{FabMenu:()=>n});var r=s(326),a=s(434),i=s(5047);s(7577);var l=s(8490);function n(){let e=["/menu","/settings"].includes((0,i.usePathname)());return((0,l.g)(e=>e.profile.theme),e)?null:r.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:r.jsx(a.default,{href:"/menu",className:"rounded-full w-14 h-14 grid place-items-center bg-brand text-white shadow-soft active:scale-95 select-none text-2xl",children:"☰"})})}},6817:(e,t,s)=>{"use strict";s.d(t,{ThemeEffect:()=>a}),s(7577);var r=s(8490);function a(){return(0,r.g)(e=>e.profile.theme),(0,r.g)(e=>e.profile.language||"en"),null}},8490:(e,t,s)=>{"use strict";s.d(t,{O:()=>d,g:()=>u});var r=s(114),a=s(5251);let i=e=>Math.floor(Math.random()*e),l=(e,t,s)=>Math.max(t,Math.min(s,e)),n=(e,t,s)=>"mul"===e?`m:${t}x${s}`:`d:${t}/${s}`;function o(){return Math.floor(Date.now()/1e3)}let d=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],c={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function m(e){let t=i(e)+1,s=i(e)+1;return{op:"mul",a:t,b:s,answer:t*s}}function x(e){let t=i(e)+1,s=i(e)+1;return{op:"div",a:t*s,b:t,answer:s}}let u=(0,r.Ue)()((0,a.tJ)((e,t)=>({...c,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let s;let r=t(),a=l(r.profile.maxFactor,2,10);if(r.recentMistakes.length){let[e,t]=r.recentMistakes.shift().split(":"),[a,i]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);s={op:"m"===e?"mul":"div",a,b:i}}else{let e=Object.values(r.mastery).find(e=>e.dueAt<=o());if(e){let[t,r]=e.key.split(":"),[a,i]=r.includes("x")?r.split("x").map(Number):r.split("/").map(Number);s={op:"m"===t?"mul":"div",a,b:i}}}let n=function(e,t,s){let r=s?{op:s.op,a:s.a,b:s.b,answer:"mul"===s.op?s.a*s.b:Math.floor(s.a/s.b)}:.5>Math.random()?m(e):x(e),a=!s&&t&&.5>Math.random()?"mul"===t?x(e):m(e):r;return{id:`${a.op}:${a.a}:${a.b}:${Date.now()}`,op:a.op,a:a.a,b:a.b,answer:a.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let s=i(9)-4,r=Math.max(0,e+s+(0===s?i(3)+1:0));t.add(r)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}([...t])}(a.answer),game:"mul"===a.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(a,r.lastOp,s);e({current:n,startedAt:Date.now(),lastOp:n.op})},answer:s=>{let r=t(),a=r.current;if(!a)return;let i=s===a.answer;Date.now(),r.startedAt??Date.now();let c=n(a.op,a.a,a.b),m=r.mastery[c],x=function(e,t){let s=o();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:s+10,lastResult:t};let r=l(e.score+(t?1:-2),0,5),a=l(e.ease+(t?.08:-.2),1.2,2.6),i=t?Math.max(10,Math.round(e.intervalSec*a)):10;return{...e,score:r,ease:a,intervalSec:i,dueAt:s+i,lastResult:t}}(m&&{...m,key:c},i);x.key=c;let u=Math.min(10,Math.max(0,2*r.profile.streak)),p={...r.profile};if(p.totalAttempts+=1,i)for(let e of(p.totalCorrect+=1,p.streak+=1,p.bestStreak=Math.max(p.bestStreak,p.streak),p.points+=10+u,p.streak%4==0&&(p.maxFactor=l(p.maxFactor+1,2,10),p.level=Math.max(p.level,p.maxFactor)),d))p.points>=e.cost&&(p.unlocked[e.id]=!0);else{p.streak=0,p.maxFactor=l(p.maxFactor-1,2,10),p.level=Math.max(1,p.maxFactor);let t="mul"===a.op?`m:${a.a}x${a.b}`:`d:${a.a}/${a.b}`,s=r.recentMistakes.slice();s.includes(t)||s.push(t),e({recentMistakes:s})}e({profile:p,mastery:{...r.mastery,[x.key]:x},sessionAttempts:(r.sessionAttempts??0)+1,sessionCorrect:(r.sessionCorrect??0)+(i?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},5624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,metadata:()=>n,viewport:()=>o});var r=s(9510);s(7272);var a=s(8570);let i=(0,a.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/FabMenu.tsx#FabMenu`),l=(0,a.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/ThemeEffect.tsx#ThemeEffect`),n={title:"MathTik",description:"MathTik — Multiply & Divide with fun mini-games"},o={width:"device-width",initialScale:1,maximumScale:1};function d({children:e}){return r.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,r.jsxs)("body",{children:[r.jsx(l,{}),r.jsx("div",{className:"min-h-screen bg-[var(--bg)]",children:e}),r.jsx(i,{})]})})}},4591:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/Users/ais/Projects/edugames/app/profile/page.tsx#default`)},4697:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(6621);let a=e=>[{type:"image/svg+xml",sizes:"any",url:(0,r.fillMetadataSegment)(".",e.params,"icon.svg")+"?2c021bb99e44f577"}]},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[948,429,621],()=>s(3889));module.exports=r})();