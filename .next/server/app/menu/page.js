(()=>{var e={};e.id=106,e.ids=[106],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},5899:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>c,routeModule:()=>p,tree:()=>u}),s(6272),s(5624),s(5866);var a=s(3191),n=s(8716),r=s(7922),o=s.n(r),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let u=["",{children:["menu",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6272)),"/Users/ais/Projects/edugames/app/menu/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5624)),"/Users/ais/Projects/edugames/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,4697))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/ais/Projects/edugames/app/menu/page.tsx"],d="/menu/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/menu/page",pathname:"/menu",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},6440:(e,t,s)=>{Promise.resolve().then(s.bind(s,2195)),Promise.resolve().then(s.bind(s,6817))},555:(e,t,s)=>{Promise.resolve().then(s.bind(s,4731))},4667:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2994,23)),Promise.resolve().then(s.t.bind(s,6114,23)),Promise.resolve().then(s.t.bind(s,9727,23)),Promise.resolve().then(s.t.bind(s,9671,23)),Promise.resolve().then(s.t.bind(s,1868,23)),Promise.resolve().then(s.t.bind(s,4759,23))},4731:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(326),n=s(434),r=s(5047),o=s(7577),i=s(8490),l=s(3933);function u(){let e=(0,i.g)(),t=(0,r.useRouter)(),[s,u]=(0,o.useState)(Date.now()),c=(0,l.Q)(),d=(0,o.useMemo)(()=>e.sessionStartAt?{durationMs:s-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect}:e.lastSession,[e.sessionStartAt,e.sessionAttempts,e.sessionCorrect,e.lastSession,s]);return(0,a.jsxs)("main",{className:"container py-8",children:[a.jsx("h1",{className:"text-3xl font-extrabold",children:c("appTitle")}),(0,a.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[(0,a.jsxs)(n.default,{href:"/play",className:"btn bg-brand text-white text-lg",children:["▶ ",c("continue")]}),(0,a.jsxs)(n.default,{href:"/settings",className:"btn btn-ghost text-lg",children:["⚙ ",c("settings")]}),(0,a.jsxs)(n.default,{href:"/rewards",className:"btn btn-ghost text-lg",children:["\uD83C\uDFC6 ",c("rewards")]})]}),(0,a.jsxs)("div",{className:"mt-6 card p-4",children:[a.jsx("h2",{className:"font-bold mb-2",children:c("session")}),d?(0,a.jsxs)("div",{className:"text-sm text-gray-600 flex gap-4 flex-wrap",children:[(0,a.jsxs)("span",{children:["⏱ ",d.durationMs/1e3|0,"s"]}),(0,a.jsxs)("span",{children:["✅ ",d.correct,"/",d.attempts]}),(0,a.jsxs)("span",{children:["⭐ ",e.profile.points]})]}):a.jsx("div",{className:"text-sm text-gray-500",children:c("noSessionYet")})]}),a.jsx("div",{className:"mt-6",children:(0,a.jsxs)("button",{onClick:function(){e.endSession(),t.push("/")},className:"btn btn-ghost",children:["\uD83C\uDFE0 ",c("exit")]})})]})}},2195:(e,t,s)=>{"use strict";s.d(t,{FabMenu:()=>i});var a=s(326),n=s(434),r=s(5047);s(7577);var o=s(8490);function i(){let e=["/menu","/settings"].includes((0,r.usePathname)());return((0,o.g)(e=>e.profile.theme),e)?null:a.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:a.jsx(n.default,{href:"/menu",className:"rounded-full w-14 h-14 grid place-items-center bg-brand text-white shadow-soft active:scale-95 select-none text-2xl",children:"☰"})})}},6817:(e,t,s)=>{"use strict";s.d(t,{ThemeEffect:()=>n}),s(7577);var a=s(8490);function n(){return(0,a.g)(e=>e.profile.theme),(0,a.g)(e=>e.profile.language||"en"),null}},3933:(e,t,s)=>{"use strict";s.d(t,{Q:()=>r});var a=s(8490);let n={en:{appTitle:"MathTik",subtitle:"Multiply & Divide with fun mini-games",startPlaying:"Start Playing",continue:"Continue",settings:"Settings",session:"Session",exit:"Exit",noSessionYet:"No session yet",language:"Language",theme:"Theme",menu:"Menu",pool:"Pool",dragToPool:"Drag the apples to the pool",countTogether:"Let’s count together",rewards:"Rewards",unlocked:"Unlocked",use:"Use",locked:"Locked",cost:"Cost",points:"Points",level:"Level"},ru:{appTitle:"МэтТик",subtitle:"Умножай и дели в веселых мини-играх",startPlaying:"Начать игру",continue:"Продолжить",settings:"Настройки",session:"Сессия",exit:"Выход",noSessionYet:"Сессий пока нет",language:"Язык",theme:"Тема",menu:"Меню",pool:"Корзина",dragToPool:"Перетащи яблоки в корзину",countTogether:"Давайте посчитаем вместе",rewards:"Награды",unlocked:"Открыто",use:"Использовать",locked:"Закрыто",cost:"Цена",points:"Очки",level:"Уровень"},he:{appTitle:"מתיק",subtitle:"כפל וחילוק במשחקונים מהנים",startPlaying:"התחל משחק",continue:"להמשיך",settings:"הגדרות",session:"סשן",exit:"יציאה",noSessionYet:"אין סשן עדיין",language:"שפה",theme:"ערכת נושא",menu:"תפריט",pool:"סל",dragToPool:"גררו את התפוחים לסל",countTogether:"נספור יחד",rewards:"פרסים",unlocked:"נפתח",use:"השתמש",locked:"נעול",cost:"עלות",points:"נקודות",level:"רמה"}};function r(){let e=(0,a.g)(e=>e.profile.language||"en");return t=>n[e][t]}},8490:(e,t,s)=>{"use strict";s.d(t,{O:()=>u,g:()=>p});var a=s(114),n=s(5251);let r=e=>Math.floor(Math.random()*e),o=(e,t,s)=>Math.max(t,Math.min(s,e)),i=(e,t,s)=>"mul"===e?`m:${t}x${s}`:`d:${t}/${s}`;function l(){return Math.floor(Date.now()/1e3)}let u=[{id:"star",label:"Shiny Star",emoji:"\uD83C\uDF1F",cost:50},{id:"rocket",label:"Rocket",emoji:"\uD83D\uDE80",cost:120},{id:"rainbow",label:"Rainbow",emoji:"\uD83C\uDF08",cost:250},{id:"unicorn",label:"Unicorn",emoji:"\uD83E\uDD84",cost:400}],c={profile:{points:0,streak:0,bestStreak:0,level:1,maxFactor:2,totalCorrect:0,totalAttempts:0,soundOn:!0,unlocked:{},language:"en",theme:"default"},mastery:{},recentMistakes:[],lastOp:void 0,sessionStartAt:void 0,sessionAttempts:0,sessionCorrect:0};function d(e){let t=r(e)+1,s=r(e)+1;return{op:"mul",a:t,b:s,answer:t*s}}function m(e){let t=r(e)+1,s=r(e)+1;return{op:"div",a:t*s,b:t,answer:s}}let p=(0,a.Ue)()((0,n.tJ)((e,t)=>({...c,startSession:()=>e(e=>e.sessionStartAt?e:{sessionStartAt:Date.now(),sessionAttempts:0,sessionCorrect:0}),endSession:()=>e(e=>e.sessionStartAt?{lastSession:{durationMs:Date.now()-e.sessionStartAt,attempts:e.sessionAttempts,correct:e.sessionCorrect},sessionStartAt:void 0}:e),setLanguage:t=>e(e=>({profile:{...e.profile,language:t}})),setTheme:t=>e(e=>({profile:{...e.profile,theme:t}})),nextChallenge:()=>{let s;let a=t(),n=o(a.profile.maxFactor,2,10);if(a.recentMistakes.length){let[e,t]=a.recentMistakes.shift().split(":"),[n,r]=t.includes("x")?t.split("x").map(Number):t.split("/").map(Number);s={op:"m"===e?"mul":"div",a:n,b:r}}else{let e=Object.values(a.mastery).find(e=>e.dueAt<=l());if(e){let[t,a]=e.key.split(":"),[n,r]=a.includes("x")?a.split("x").map(Number):a.split("/").map(Number);s={op:"m"===t?"mul":"div",a:n,b:r}}}let i=function(e,t,s){let a=s?{op:s.op,a:s.a,b:s.b,answer:"mul"===s.op?s.a*s.b:Math.floor(s.a/s.b)}:.5>Math.random()?d(e):m(e),n=!s&&t&&.5>Math.random()?"mul"===t?m(e):d(e):a;return{id:`${n.op}:${n.a}:${n.b}:${Date.now()}`,op:n.op,a:n.a,b:n.b,answer:n.answer,choices:function(e){let t=new Set([e]);for(;t.size<4;){let s=r(9)-4,a=Math.max(0,e+s+(0===s?r(3)+1:0));t.add(a)}return function(e){let t=e.slice();for(let e=t.length-1;e>0;e--){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}([...t])}(n.answer),game:"mul"===n.op?.5>Math.random()?"multiply-groups":"array-builder":"division-dealer",input:.75>Math.random()?"mc":"wheel"}}(n,a.lastOp,s);e({current:i,startedAt:Date.now(),lastOp:i.op})},answer:s=>{let a=t(),n=a.current;if(!n)return;let r=s===n.answer;Date.now(),a.startedAt??Date.now();let c=i(n.op,n.a,n.b),d=a.mastery[c],m=function(e,t){let s=l();if(!e)return{key:"",score:t?1:0,ease:t?2:1.6,intervalSec:10,dueAt:s+10,lastResult:t};let a=o(e.score+(t?1:-2),0,5),n=o(e.ease+(t?.08:-.2),1.2,2.6),r=t?Math.max(10,Math.round(e.intervalSec*n)):10;return{...e,score:a,ease:n,intervalSec:r,dueAt:s+r,lastResult:t}}(d&&{...d,key:c},r);m.key=c;let p=Math.min(10,Math.max(0,2*a.profile.streak)),h={...a.profile};if(h.totalAttempts+=1,r)for(let e of(h.totalCorrect+=1,h.streak+=1,h.bestStreak=Math.max(h.bestStreak,h.streak),h.points+=10+p,h.streak%4==0&&(h.maxFactor=o(h.maxFactor+1,2,10),h.level=Math.max(h.level,h.maxFactor)),u))h.points>=e.cost&&(h.unlocked[e.id]=!0);else{h.streak=0,h.maxFactor=o(h.maxFactor-1,2,10),h.level=Math.max(1,h.maxFactor);let t="mul"===n.op?`m:${n.a}x${n.b}`:`d:${n.a}/${n.b}`,s=a.recentMistakes.slice();s.includes(t)||s.push(t),e({recentMistakes:s})}e({profile:h,mastery:{...a.mastery,[m.key]:m},sessionAttempts:(a.sessionAttempts??0)+1,sessionCorrect:(a.sessionCorrect??0)+(r?1:0)}),t().nextChallenge()},toggleSound:()=>e(e=>({profile:{...e.profile,soundOn:!e.profile.soundOn}}))}),{name:"mg2_state"}))},5624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,metadata:()=>i,viewport:()=>l});var a=s(9510);s(7272);var n=s(8570);let r=(0,n.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/FabMenu.tsx#FabMenu`),o=(0,n.createProxy)(String.raw`/Users/ais/Projects/edugames/components/nav/ThemeEffect.tsx#ThemeEffect`),i={title:"MathTik",description:"MathTik — Multiply & Divide with fun mini-games"},l={width:"device-width",initialScale:1,maximumScale:1};function u({children:e}){return a.jsx("html",{lang:"en",suppressHydrationWarning:!0,children:(0,a.jsxs)("body",{children:[a.jsx(o,{}),a.jsx("div",{className:"min-h-screen bg-[var(--bg)]",children:e}),a.jsx(r,{})]})})}},6272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/ais/Projects/edugames/app/menu/page.tsx#default`)},4697:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var a=s(6621);let n=e=>[{type:"image/svg+xml",sizes:"any",url:(0,a.fillMetadataSegment)(".",e.params,"icon.svg")+"?2c021bb99e44f577"}]},7272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[948,429,621],()=>s(5899));module.exports=a})();